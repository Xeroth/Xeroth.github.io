<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Live with love]]></title>
  <subtitle><![CDATA[Live with love]]></subtitle>
  <link href="/atom.xml" rel="self"/>
  <link href="http://yoursite.com/"/>
  <updated>2016-04-14T10:49:01.000Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name><![CDATA[è·µè¡Œ]]></name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title><![CDATA[Vagrantå®‰è£…ä½¿ç”¨]]></title>
    <link href="http://yoursite.com/2016/04/14/Vagrant%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8/"/>
    <id>http://yoursite.com/2016/04/14/Vagrantå®‰è£…ä½¿ç”¨/</id>
    <published>2016-04-14T10:49:01.000Z</published>
    <updated>2016-04-14T10:49:01.000Z</updated>
    <content type="html"></content>
    <summary type="html">
    
    </summary>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[å®‰è£…ç®¡ç†Dokuwiki]]></title>
    <link href="http://yoursite.com/2016/04/14/%E5%AE%89%E8%A3%85%E7%AE%A1%E7%90%86Dokuwiki/"/>
    <id>http://yoursite.com/2016/04/14/å®‰è£…ç®¡ç†Dokuwiki/</id>
    <published>2016-04-14T04:00:33.000Z</published>
    <updated>2016-04-14T11:08:13.000Z</updated>
    <content type="html"><![CDATA[<p>æ­å»º lnmp ç¯å¢ƒ</p>
<p>ä¸‹è½½è§£å‹, å°†è§£å‹æ–‡ä»¶é…ç½®ä¸ºnginxè™šæ‹Ÿä¸»æœºæ ¹ç›®å½•</p>
<p>ä¸»è¦è®²ä¸‹å®‰å…¨è®¾ç½®</p>
<p>ä¸»è¦æ˜¯ç¦æ­¢ç›´æ¥è®¿é—®</p>
<ul>
<li>data</li>
<li>conf</li>
<li>bin</li>
</ul>
<p>è¿™ä¸‰ä¸ªç›®å½•</p>
<p>æ£€æµ‹æ–¹å¼æ˜¯çœ‹èƒ½å¦è®¿é—®åˆ°</p>
<p><a href="http://yoursite.com/data/pages/wiki/dokuwiki.txt">http://yoursite.com/data/pages/wiki/dokuwiki.txt</a></p>
<a id="more"></a>
<h3 id="u914D_u7F6Enginx_u7981_u6B62_u8BBF_u95EE_u7279_u5B9A_u76EE_u5F55"><a href="#u914D_u7F6Enginx_u7981_u6B62_u8BBF_u95EE_u7279_u5B9A_u76EE_u5F55" class="headerlink" title="é…ç½®nginxç¦æ­¢è®¿é—®ç‰¹å®šç›®å½•"></a>é…ç½®nginxç¦æ­¢è®¿é—®ç‰¹å®šç›®å½•</h3><p>ä¸€å¼€å§‹æ‰“ç®—ç”¨ nginx ç¦æ­¢ç›®å½•è®¿é—®åŠŸèƒ½, åœ¨ nginx é…ç½®äº†:</p>
<pre><code>location ^~ /(data|conf|bin|inc)/* {
        deny all;
}
</code></pre><h3 id="u6539_u53D8_u6570_u636E_u76EE_u5F55_u4F4D_u7F6E"><a href="#u6539_u53D8_u6570_u636E_u76EE_u5F55_u4F4D_u7F6E" class="headerlink" title="æ”¹å˜æ•°æ®ç›®å½•ä½ç½®"></a>æ”¹å˜æ•°æ®ç›®å½•ä½ç½®</h3><p>å½“ç„¶æœ€å¥½æ˜¯ç›´æ¥æŠŠè¿™äº›ç›®å½•è¿å‡ºç½‘ç«™æ ¹ç›®å½•äº†</p>
<pre><code># è½¬ç§»conf
[root@HD_Server_Config dokuwiki-2015-08-10a]# mv conf /data/dokuwiki/
# æ·»åŠ é…ç½®
[root@HD_Server_Config dokuwiki-2015-08-10a]# vim inc/preload.php
&lt;?php

define(&apos;DOKU_CONF&apos;,&apos;/data/dokuwiki/conf/&apos;);

# è½¬ç§» data
[root@HD_Server_Config dokuwiki-2015-08-10a]# mv data /data/dokuwiki/
# æ·»åŠ é…ç½®
[root@HD_Server_Config dokuwiki-2015-08-10a]# vim /data/dokuwiki/conf/local.php

$conf[&apos;savedir&apos;] = &apos;/data/dokuwiki/data/&apos;;

# è½¬ç§» bin
[root@HD_Server_Config dokuwiki-2015-08-10a]# mv bin /data/dokuwiki/
</code></pre><h3 id="u5B89_u88C5_u63D2_u4EF6"><a href="#u5B89_u88C5_u63D2_u4EF6" class="headerlink" title="å®‰è£…æ’ä»¶"></a>å®‰è£…æ’ä»¶</h3><p><strong>ç®¡ç†</strong> -&gt; <strong>æ‰©å±•ç®¡ç†å™¨</strong></p>
<p><strong>æœç´¢å’Œå®‰è£…</strong>  </p>
<p><em>swiftmail</em> é…ç½®å‘é€ smtp é‚®ä»¶, ç„¶ååœ¨ <strong>ç®¡ç†</strong> -&gt; <strong>é…ç½®è®¾ç½®</strong> -&gt; <strong>æ’ä»¶è®¾ç½®</strong>(å³ä¾§è¾¹æ å¤„)</p>
<p>smtp_host : smtp.exmail.qq.com</p>
<p>smtp_port: 465</p>
<p>smtp_ssl: SSL</p>
<p>auth_user: smtp é‚®ç®±åœ°å€, æ¯”å¦‚admin@123.com</p>
<p>auth_pass: é‚®ç®±å¯†ç </p>
<p>localdomain: yoursite.com</p>
<p>é™¤æ­¤ä¹‹å¤–, è¿˜éœ€è¦é…ç½®<strong>é€šçŸ¥è®¾ç½®</strong></p>
<p>é€šçŸ¥è®¾ç½®é‡Œçš„ä¸œè¥¿å…¨éƒ¨å¡«ä¸Šå‹¾ä¸Š</p>
<p>æ¯”å¦‚é‚®ä»¶åœ°å€éƒ½å¡«</p>
<p>admin@123.com</p>
<p>é‚®ä»¶å‰ç¼€å¡«wiki_admin</p>
<p>è®¾ç½®å®Œä¹‹å <strong>ç®¡ç†</strong> ç•Œé¢ä¸‹æœ‰ä¸ª <strong>æ£€æŸ¥ SwiftMail é…ç½®</strong></p>
<p><em>imgpaste</em> åœ¨ç¼–è¾‘å™¨ç›´æ¥ç²˜è´´å°±å¯ä»¥æ’å…¥å‰ªè´´æ¿ä¸­çš„å›¾ç‰‡ï¼Œå¯ä»¥ç”¨æ¥å¿«é€Ÿä¸Šä¼ æˆªå›¾ã€‚</p>
<p><em>Tag</em></p>
<p><em>addnewpage</em>  æ–°å»ºé¡µé¢åŠŸèƒ½å¤ªéšæ™¦äº†â€¦ å¾—åœ¨ url é‚£é‡Œæ·»åŠ , æ‰€ä»¥æäº†ä¸ªæ’ä»¶</p>
<h3 id="u7F16_u8F91"><a href="#u7F16_u8F91" class="headerlink" title="ç¼–è¾‘"></a>ç¼–è¾‘</h3><p><a href="https://www.dokuwiki.org/start?id=zh:wiki:syntax" target="_blank" rel="external">æ ¼å¼åŒ–è¯­æ³•</a></p>
<h3 id="u5347_u7EA7"><a href="#u5347_u7EA7" class="headerlink" title="å‡çº§"></a>å‡çº§</h3><p><a href="https://www.dokuwiki.org/zh:install:upgrade" target="_blank" rel="external">å‡çº§</a></p>
<h3 id="u6279_u91CF_u7528_u6237_u5BFC_u5165"><a href="#u6279_u91CF_u7528_u6237_u5BFC_u5165" class="headerlink" title="æ‰¹é‡ç”¨æˆ·å¯¼å…¥"></a>æ‰¹é‡ç”¨æˆ·å¯¼å…¥</h3><p>å…ˆæ˜¯åˆ›å»ºäº†2ä¸ªç”¨æˆ·, ç„¶åå¯¼å‡ºäº†ç”¨æˆ· csv æ–‡ä»¶, çœ‹äº†ä¸€ä¸‹æ–‡ä»¶ç»“æ„:</p>
<pre><code>user1,user1,user1@yoursite.cn,user
user2,user2,user2@yoursite.cn,user
</code></pre><p>ç„¶åå»ºç«‹ä¸€ä¸ªæ–‡ä»¶,é‡Œé¢å­˜æ”¾ç”¨æˆ·å:</p>
<pre><code>user3
user4
...
</code></pre><p>æœ€åç”¨ awk ç”Ÿæˆ csv æ–‡ä»¶</p>
<pre><code>awk &apos;{printf &quot;%s,%s,%s@yoursite.cn,user\n&quot;, $1,$1,$1}&apos; member.txt &gt; member.csv
</code></pre><p>å¯¼å…¥ csv æ–‡ä»¶å³å¯</p>
<p>å‚è€ƒ:</p>
<p><a href="https://www.dokuwiki.org/zh:security" target="_blank" rel="external">Dokuwikiuå®‰å…¨</a></p>
<p><a href="http://drops.wooyun.org/tips/1323" target="_blank" rel="external">Nginxå®‰å…¨é…ç½®ç ”ç©¶</a></p>
<p><a href="http://www.jianshu.com/p/a6b00b055fcd" target="_blank" rel="external">DokuWikiç®€ä»‹åŠæ’ä»¶æ¨è</a></p>
<p><a href="http://www.ligenyuan.cn/wiki/reproduce:dokuwiki_page_name" target="_blank" rel="external">dokuwikiå‘½åç©ºé—´</a></p>
<p><a href="http://www.baiguo.net/wiki/doku.php?id=wiki:plugins" target="_blank" rel="external">Dokuæ’ä»¶æ•´ç†</a></p>
<p><a href="http://blog.csdn.net/zouhao619/article/details/8523637" target="_blank" rel="external">æ›´æ¢ç¼–è¾‘å™¨â€“æˆ‘è¿˜æ²¡ç©ºæŠ˜è…¾è¿™ä¸ªâ€¦</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>æ­å»º lnmp ç¯å¢ƒ</p>
<p>ä¸‹è½½è§£å‹, å°†è§£å‹æ–‡ä»¶é…ç½®ä¸ºnginxè™šæ‹Ÿä¸»æœºæ ¹ç›®å½•</p>
<p>ä¸»è¦è®²ä¸‹å®‰å…¨è®¾ç½®</p>
<p>ä¸»è¦æ˜¯ç¦æ­¢ç›´æ¥è®¿é—®</p>
<ul>
<li>data</li>
<li>conf</li>
<li>bin</li>
</ul>
<p>è¿™ä¸‰ä¸ªç›®å½•</p>
<p>æ£€æµ‹æ–¹å¼æ˜¯çœ‹èƒ½å¦è®¿é—®åˆ°</p>
<p><a href="http://yoursite.com/data/pages/wiki/dokuwiki.txt">http://yoursite.com/data/pages/wiki/dokuwiki.txt</a></p>]]>
    
    </summary>
    
      <category term="Dokuwiki" scheme="http://yoursite.com/tags/Dokuwiki/"/>
    
      <category term="nginx" scheme="http://yoursite.com/tags/nginx/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[MySQL Galera Cluster å­¦ä¹ ]]></title>
    <link href="http://yoursite.com/2016/04/13/MySQL-Galera-Cluster-%E5%AD%A6%E4%B9%A0/"/>
    <id>http://yoursite.com/2016/04/13/MySQL-Galera-Cluster-å­¦ä¹ /</id>
    <published>2016-04-13T09:07:44.000Z</published>
    <updated>2016-04-13T09:10:52.000Z</updated>
    <content type="html"><![CDATA[<a id="more"></a>
]]></content>
    <summary type="html">
    <![CDATA[<a id="more"></a>
]]>
    </summary>
    
      <category term="Galera" scheme="http://yoursite.com/tags/Galera/"/>
    
      <category term="MySQL" scheme="http://yoursite.com/tags/MySQL/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[svnä»“åº“é—´æ•°æ®è½¬ç§», å›æ»š, å­ç›®å½•æƒé™æ§åˆ¶]]></title>
    <link href="http://yoursite.com/2016/04/12/svn%E4%BB%93%E5%BA%93%E9%97%B4%E6%95%B0%E6%8D%AE%E8%BD%AC%E7%A7%BB/"/>
    <id>http://yoursite.com/2016/04/12/svnä»“åº“é—´æ•°æ®è½¬ç§»/</id>
    <published>2016-04-12T01:36:17.000Z</published>
    <updated>2016-04-12T12:23:33.000Z</updated>
    <content type="html"><![CDATA[<h3 id="u8D77_u56E0"><a href="#u8D77_u56E0" class="headerlink" title="èµ·å› "></a>èµ·å› </h3><p>ç”±äºä¹‹å‰çš„åŒäº‹æ²¡æœ‰å¥½å¥½è§„åˆ’ svn ä»“åº“ç»“æ„, ç°éœ€è¦é‡æ–°è§„åˆ’ç›®å½•ç»“æ„å¦‚ä¸‹:</p>
<pre><code>project1
    â”œâ”€â”€ branches
    â”œâ”€â”€ tags
    â””â”€â”€ trunk
        â”œâ”€â”€ code
        â”‚   â”œâ”€â”€ andriod
        â”‚   â”œâ”€â”€ ios
        â”‚   â”œâ”€â”€ php
        â”‚   â””â”€â”€ sql
        â”œâ”€â”€ doc
        â””â”€â”€ readme.txt
</code></pre><p><strong>trunk</strong>æ˜¯ä¸»åˆ†æ”¯ï¼Œæ˜¯æ—¥å¸¸å¼€å‘è¿›è¡Œçš„åœ°æ–¹ã€‚</p>
<p><strong>branches</strong>æ˜¯åˆ†æ”¯ã€‚ä¸€äº›é˜¶æ®µæ€§çš„releaseç‰ˆæœ¬ï¼Œè¿™äº›ç‰ˆæœ¬æ˜¯å¯ä»¥ç»§ç»­è¿›è¡Œå¼€å‘å’Œç»´æŠ¤çš„ï¼Œåˆ™æ”¾åœ¨branchesç›®å½•ä¸­ã€‚åˆæ¯”å¦‚ä¸ºä¸åŒç”¨æˆ·å®¢åˆ¶åŒ–çš„ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨åˆ†æ”¯ä¸­è¿›è¡Œå¼€å‘ã€‚</p>
<p><strong>tags</strong>ç›®å½•ä¸€èˆ¬æ˜¯åªè¯»çš„ï¼Œè¿™é‡Œå­˜å‚¨é˜¶æ®µæ€§çš„å‘å¸ƒç‰ˆæœ¬ï¼Œåªæ˜¯ä½œä¸ºä¸€ä¸ªé‡Œç¨‹ç¢‘çš„ç‰ˆæœ¬è¿›è¡Œå­˜æ¡£ã€‚    </p>
<p>ç°åœ¨éœ€è¦å°†åˆ†æ•£çš„ä»£ç ä»“åº“éƒ½è¿ç§»æ”¾åˆ° <em>trunk-code</em> ç›®å½•ä¸‹è¿›è¡Œåˆ†ç±»å­˜æ”¾, å¹¶è§„åˆ’ç›¸åº”ä»“åº“çš„äººå‘˜æƒé™</p>
<a id="more"></a>
<h3 id="u6743_u9650_u6D4B_u8BD5"><a href="#u6743_u9650_u6D4B_u8BD5" class="headerlink" title="æƒé™æµ‹è¯•"></a>æƒé™æµ‹è¯•</h3><p>ç”±äºè¿ç§»å¾—å…ˆé€šçŸ¥éƒ¨é—¨æˆå‘˜, åœæ­¢æäº¤å¹¶æš‚åœ svn æœåŠ¡, ä¼°è®¡å¾—æ‰¾ä¸ªå¤œé»‘é£é«˜çš„æ—¶å€™è¿›è¡Œ, å¤§ç™½å¤©çš„æˆ‘è¿˜æ˜¯å…ˆæµ‹è¯•ä¸€ä¸‹å­ç›®å½•é‡Œä»“åº“çš„äººå‘˜æƒé™å§</p>
<p>è™½è¯´æ˜¯æƒé™æµ‹è¯•, æˆ‘ä»¬ä¹Ÿå¾—æç‚¹æ•°æ®è¿‡æ¥, é¡ºä¾¿å½“ä»£ç ä»“åº“è¿ç§»æ¼”ç»ƒå§</p>
<h4 id="u4ED3_u5E93_u95F4_u6570_u636E_u8FC1_u79FB_u65B9_u5F0F_3A"><a href="#u4ED3_u5E93_u95F4_u6570_u636E_u8FC1_u79FB_u65B9_u5F0F_3A" class="headerlink" title="ä»“åº“é—´æ•°æ®è¿ç§»æ–¹å¼:"></a>ä»“åº“é—´æ•°æ®è¿ç§»æ–¹å¼:</h4><p>ä¸èƒ½ç›´æ¥å°†Aä»“åº“é‡å‘½åä¸ºBï¼Œæˆ–å°†Aå¤åˆ¶å¾—åˆ°ä¸€ä¸ªå¤æœ¬ï¼Œå†å°†å¤æœ¬å‘½åä¸ºB</p>
<p>ä½¿ç”¨<em>svnadmin dump</em> &amp; <em>svnadmin load</em></p>
<p>åˆ›å»ºBä»“åº“(å¦‚æœBä¸å­˜åœ¨)</p>
<pre><code>svnadmin create /svndata/B    
</code></pre><p>å¯¼å‡ºAä»“åº“</p>
<pre><code>svnadmin dump /svndata/A &gt; A.dump    
</code></pre><p>å°† Aä»“åº“ å¤‡ä»½æ–‡ä»¶å¯¼å…¥ B ä»“åº“</p>
<pre><code>svnadmin load /svndata/B &lt; A.dump
</code></pre><h4 id="u7136_u800C_u95EE_u9898_u6765_u4E86"><a href="#u7136_u800C_u95EE_u9898_u6765_u4E86" class="headerlink" title="ç„¶è€Œé—®é¢˜æ¥äº†"></a>ç„¶è€Œé—®é¢˜æ¥äº†</h4><p>å‘ç°è®¾æƒ³çš„svnç›®å½•ç»“æ„ä¸å¤ªå¥½å®ç°, å› ä¸ºsvn ä¸æ”¯æŒä»“åº“é‡Œé¢åˆ›å»ºå­ä»“åº“, åªèƒ½è‡ªå·±åˆ›å»ºå­ç›®å½•</p>
<pre><code># svnadmin create project1/trunk
svnadmin: E165002: &apos;/data/svndata/project1/trunk&apos; is a subdirectory of an existing repository rooted at &apos;/data/svndata/project1&apos;
</code></pre><p>å¦‚æœæ˜¯é€šè¿‡å­ç›®å½•çš„æ–¹å¼, å‡è®¾ios ç›®å½•çš„ä»£ç è¦å›æ»š, é‚£å²‚ä¸æ˜¯æ•´ä¸ªä»£ç ä»“åº“éƒ½è¦è·Ÿç€å›æ»šäº†?</p>
<p>ä¸è¿‡ä¹Ÿä¸ç¡®å®šèƒ½ä¸èƒ½åªå›æ»šå•ä¸ªç›®å½•, è¿˜å¾—å®éªŒæµ‹è¯•ä¸€ä¸‹</p>
<p>è€Œä¸”é€šè¿‡ checkout æ—§ä»“åº“åˆ°å­ç›®å½•, ç„¶åå† add/commit åˆ°æ–°ä»“åº“çš„æ–¹å¼, æ—§ä»“åº“çš„å†å²è®°å½•ä¸å°±éƒ½ä¸¢å¤±äº†ä¹ˆ? å› ä¸ºä¸åˆ é™¤ .svn å°±æ— æ³• add, ä¼šæŠ¥é”™çš„</p>
<pre><code>svn: warning: W150002: &apos;/opt/www/svnhook/project1/trunk/code/php/everouter_app&apos; is already under version control
svn: E200009: Could not add all targets because some targets are already versioned
svn: E200009: Illegal target for the requested operation
</code></pre><p>å¦‚æœèƒ½æ¥å—ä¸¢å¤±æ—§åº“å†å²ç‰ˆæœ¬, é‚£ä¹ˆæµ‹è¯•ä¸€ä¸‹èƒ½ä¸èƒ½åªå›æ»šå•ä¸ªç›®å½•(ç»ä¸‹æ–¹æ£€æµ‹, æ˜¯å¯ä»¥çš„)</p>
<h4 id="u597D_u5427_2C__u987A_u4FBF_u6765_u5B66_u4E60_u4E00_u4E0B_svn__u7684_u56DE_u6EDA"><a href="#u597D_u5427_2C__u987A_u4FBF_u6765_u5B66_u4E60_u4E00_u4E0B_svn__u7684_u56DE_u6EDA" class="headerlink" title="å¥½å§, é¡ºä¾¿æ¥å­¦ä¹ ä¸€ä¸‹ svn çš„å›æ»š"></a>å¥½å§, é¡ºä¾¿æ¥å­¦ä¹ ä¸€ä¸‹ svn çš„å›æ»š</h4><p>å…ˆåˆ†åˆ«åˆ°2ä¸ªå­ç›®å½•åšå˜æ›´æäº¤</p>
<pre><code>[root@iZ94c5cs7guZ everouter_app]# touch outest
[root@iZ94c5cs7guZ everouter_app]# svn add outest
A         outest
[root@iZ94c5cs7guZ everouter_app]# svn ci -m &quot;add outest&quot;

[root@iZ94c5cs7guZ everinner_app]# touch intest
[root@iZ94c5cs7guZ everinner_app]# svn add intest
A         intest
[root@iZ94c5cs7guZ everinner_app]# svn ci -m &quot;add intest&quot;    
</code></pre><p>è¿˜æœ‰2ä¸ªæœªæäº¤çš„    </p>
<pre><code>[root@iZ94c5cs7guZ everinner_app]# echo 123 &gt; intest
[root@iZ94c5cs7guZ everinner_app]# svn st
M       intest
[root@iZ94c5cs7guZ everinner_app]# cd ..
[root@iZ94c5cs7guZ php]# cd everouter_app/
[root@iZ94c5cs7guZ everouter_app]# echo 456 &gt; outest
[root@iZ94c5cs7guZ everouter_app]# svn st
M       outest
[root@iZ94c5cs7guZ everouter_app]# cd ..
[root@iZ94c5cs7guZ php]# svn st
M       everinner_app/intest
M       everouter_app/outest
</code></pre><p>ç°åœ¨æœ‰2ä¸ªå°šæœªæäº¤çš„æ”¹åŠ¨, è¯•è¯•çœ‹èƒ½ä¸èƒ½åª revert å…¶ä¸­ä¸€ä¸ª</p>
<pre><code>[root@iZ94c5cs7guZ php]# svn revert everinner_app/intest
Reverted &apos;everinner_app/intest&apos;
[root@iZ94c5cs7guZ php]# svn st
M       everouter_app/outest
</code></pre><p>å¥½, å¯ä»¥ç‡åˆ°, å•ç‹¬ revert ä¸€ä¸ªæœª commit çš„æ–‡ä»¶ç³»æŸé—®é¢˜å˜…</p>
<p>ç„¶åæµ‹è¯•å¯¹æ•´ä¸ªç›®å½•çš„å›æ»š, å…ˆè¿›è¡Œä¸€äº›å˜æ›´</p>
<pre><code>[root@iZ94c5cs7guZ php]# cd everinner_app/
[root@iZ94c5cs7guZ everinner_app]# echo 789 &gt; intest
[root@iZ94c5cs7guZ everinner_app]# cd conf/
[root@iZ94c5cs7guZ conf]# echo 456 &gt; intest2
[root@iZ94c5cs7guZ conf]# svn add intest2
A         intest2
[root@iZ94c5cs7guZ conf]# cd ..
[root@iZ94c5cs7guZ everinner_app]# svn st
M       conf/intest2
M       intest
</code></pre><p>çœ‹çœ‹å‘ç”Ÿçš„å˜æ›´</p>
<pre><code>[root@iZ94c5cs7guZ everinner_app]# cd ..
[root@iZ94c5cs7guZ php]# svn st
A       everinner_app/conf/intest2
M       everinner_app/intest
M       everouter_app/outest
</code></pre><p>å›æ»ševerinner_appç›®å½•</p>
<pre><code>[root@iZ94c5cs7guZ php]# svn revert everinner_app/ --recursive
Reverted &apos;everinner_app/conf/intest2&apos;
Reverted &apos;everinner_app/intest&apos;
[root@iZ94c5cs7guZ php]# svn st
M       everouter_app/outest
</code></pre><p>å¯ä»¥çœ‹å‡º, æœª commit çš„ç›®å½•ä¹Ÿæ˜¯å¯ä»¥æ•´ä¸ªå›æ»šçš„, ä½†æ˜¯å…·ä½“åˆ°å¼€å‘äººå‘˜ä½¿ç”¨ä¼šæ˜¯æ€æ ·çš„ä¸€ç§æƒ…å†µå‘¢â€¦</p>
<p>é‚£ä¹ˆå·²ç» commit çš„æƒ…å†µä¸‹å‘¢?</p>
<p>æŸ¥çœ‹ä¸€ä¸‹æäº¤çš„å†å²è®°å½•</p>
<pre><code>$ svn update

$ svn log|less

------------------------------------------------------------------------
r5 | hugo | 2016-04-12 16:02:32 +0800 (Tue, 12 Apr 2016) | 1 line

666 outest
------------------------------------------------------------------------
r4 | hugo | 2016-04-12 15:59:55 +0800 (Tue, 12 Apr 2016) | 1 line

add outest change
------------------------------------------------------------------------
r3 | hugo | 2016-04-12 14:20:01 +0800 (Tue, 12 Apr 2016) | 1 line

add outest
------------------------------------------------------------------------
r2 | hugo | 2016-04-12 14:19:25 +0800 (Tue, 12 Apr 2016) | 1 line

add intest
------------------------------------------------------------------------
r1 | hugo | 2016-04-12 11:56:01 +0800 (Tue, 12 Apr 2016) | 1 line

add trunk/code/php/everinner_app and trunk/code/php/everouter_app
------------------------------------------------------------------------
(END)
</code></pre><p>å‡è®¾æˆ‘ä»¬outest æ–‡ä»¶ä¿®æ”¹é”™äº†, è¦å›æ»šåˆ°r3ç‰ˆæœ¬(å½“å‰ç‰ˆæœ¬æ˜¯ r5, ), å…ˆå¯¹æ¯”ä¸€ä¸‹</p>
<pre><code>[root@iZ94c5cs7guZ php]# svn diff -r 5:3 everouter_app/outest
Index: everouter_app/outest
===================================================================
--- everouter_app/outest    (revision 5)
+++ everouter_app/outest    (revision 3)
@@ -1,2 +0,0 @@
-456
-666
</code></pre><p>å¯ä»¥çœ‹å‡º r3ç‰ˆæœ¬æ˜¯æ²¡æœ‰456,666è¿™ä¸¤è¡Œçš„,ç¡®å®šæ— è¯¯ä¹‹å, ç”¨ merge å›æ»š</p>
<pre><code>[root@iZ94c5cs7guZ php]# svn merge -r 5:3 everouter_app/outest
--- Reverse-merging r5 through r4 into &apos;everouter_app/outest&apos;:
U    everouter_app/outest
--- Recording mergeinfo for reverse merge of r5 through r4 into &apos;everouter_app/outest&apos;:
 U   everouter_app/outest
--- Eliding mergeinfo from &apos;everouter_app/outest&apos;:
 U   everouter_app/outest
[root@iZ94c5cs7guZ php]# cat everouter_app/outest
[root@iZ94c5cs7guZ php]#
</code></pre><p>ç¡®è®¤æ— è¯¯å, æäº¤</p>
<pre><code>[root@iZ94c5cs7guZ php]# svn commit -m &quot;revert to revision 3&quot;
Sending        everouter_app/outest
Transmitting file data .
Committed revision 6.
</code></pre><p>å¦‚æœ outer ç›®å½•å’Œ inner ç›®å½•éƒ½æœ‰å˜æ›´, å›æ»šä¼šä¸ä¼šäº’ç›¸å½±å“å‘¢, ç”¨è„šè¶¾å¤´æƒ³æƒ³æ˜¯ä¼šçš„</p>
<pre><code>[root@iZ94c5cs7guZ php]# svn diff -r 7:4
Index: everinner_app/intest
===================================================================
--- everinner_app/intest    (revision 7)
+++ everinner_app/intest    (revision 4)
@@ -1 +0,0 @@
-123
Index: everouter_app/outest
===================================================================
--- everouter_app/outest    (revision 7)
+++ everouter_app/outest    (revision 4)
@@ -0,0 +1 @@
+456  
</code></pre><p>çœ‹ä¸Šé¢çš„å¯¹æ¯”, å¦‚æœæˆ‘ä»¬æƒ³è¦å›åˆ°ç‰ˆæœ¬4,è®© intest å»æ‰123é‚£è¡Œ, é‚£ä¹ˆä¼šä½¿å¾— outest å¢åŠ 456, ç›¸äº’å½±å“äº†</p>
<p>å¥½å§, å­ç›®å½•çš„å›æ»šä¹‹è°œå·²ç»è§£å†³, ç»“è®ºå°±æ˜¯æœª commit çš„å¯ä»¥ç›®å½•å†… revert, å­ç›®å½•é—´ä¸å—å½±å“</p>
<p>å·²ç» commit çš„åˆ™ä¸èƒ½éšæ„ merge äº†, ä¼šå½±å“åˆ°å…¶ä»–ç›®å½•å†…å®¹</p>
<h4 id="u6B63_u5F0F_u5F00_u59CB_u6743_u9650_u6D4B_u8BD5"><a href="#u6B63_u5F0F_u5F00_u59CB_u6743_u9650_u6D4B_u8BD5" class="headerlink" title="æ­£å¼å¼€å§‹æƒé™æµ‹è¯•"></a>æ­£å¼å¼€å§‹æƒé™æµ‹è¯•</h4><p>æäº†è¿™ä¹ˆå¤š,ç›®å½•ç»“æ„ä¹Ÿæ¯”è¾ƒå¤æ‚äº†, å¯ä»¥å¼€å§‹å­ç›®å½•çš„æƒé™æ§åˆ¶æµ‹è¯•äº†</p>
<p>ç°åœ¨è¿›è¡Œç”¨æˆ·è§„åˆ’ç®¡ç†</p>
<p>admin æ‹¥æœ‰project1æ‰€æœ‰çš„æ§åˆ¶æƒé™</p>
<p>cto æ‹¥æœ‰codeç›®å½•ä»¥åŠå­ç›®å½•çš„æƒé™</p>
<p>in_user æ‹¥æœ‰inner ç›®å½•çš„æƒé™</p>
<p>ou_user æ‹¥æœ‰outer ç›®å½•çš„æƒé™</p>
<p>authzæ–‡ä»¶(æ‰å‘ç°ç›´æ¥ä¿®æ”¹é…ç½®æ–‡ä»¶, ä¸ç”¨é‡å¯ svn å°±èƒ½ç”Ÿæ•ˆ)</p>
<pre><code>[groups]
cto = ctouser
in_user = hxk
ou_user = cn

[svndata:/project1]
@cto = r

[svndata:/project1/trunk/code]
@cto = rw
</code></pre><p>checkout è¯•è¯•</p>
<pre><code>$ svn co   svn://test.svn.cn/project1/trunk/code  --username ctouser
A    code/php
A    code/php/everinner_app
A    code/php/everinner_app/conf
A    code/php/everinner_app/conf/config.php    
...    
</code></pre><p>ç–—æ•ˆä¸é”™,ç»“æœå‘ç°æ²¡æœ‰å†™æƒé™â•®(â•¯_â•°)â•­</p>
<p>ç»“æœéƒ½æ˜¯æ³ªå•Š:</p>
<p><em>ç”¨æˆ·åœ¨çˆ¶ç›®å½•çš„æƒé™ä¼šæŠŠå­ç›®å½•çš„ç»™è¦†ç›–â€‹, æ— æ³•è¿›è¡Œæœ‰æ•ˆçš„ç”¨æˆ·æƒé™æ§åˆ¶.</em></p>
<p>ä½ å¯èƒ½ä¼šè¯´, ç›´æ¥åœ¨å­ç›®å½•ç»™æƒé™ä¸å°±è¡Œäº†, æŠ±æ­‰, è¿™æ ·è¿æ ¹ç›®å½•çš„è¯»æƒé™éƒ½æ²¡æœ‰, æ˜¯ä¸èƒ½é€šè¿‡éªŒè¯çš„</p>
<p>æ—¥äº†ğŸ¶    </p>
<p>å‚è€ƒ:</p>
<p><a href="http://blog.csdn.net/pttaag/article/details/8076210" target="_blank" rel="external">SVNçš„æ ‡å‡†ç›®å½•ç»“æ„ï¼štrunkã€branchesã€tags</a></p>
<p><a href="http://huguiqi.com/2016/03/07/linux%E4%B8%8BSVN%E4%BB%93%E5%BA%93%E9%97%B4%E6%95%B0%E6%8D%AE%E8%BD%AC%E7%A7%BB%E6%88%96%E9%87%8D%E5%91%BD%E5%90%8D/" target="_blank" rel="external">linuxä¸‹SVNä»“åº“é—´æ•°æ®è½¬ç§»æˆ–é‡å‘½å</a></p>
<p><a href="http://holbrook.github.io/2014/01/29/svn_install_config_and_mgnt.html" target="_blank" rel="external">subversionå®‰è£…ã€é…ç½®å’Œç®¡ç†</a></p>
<p><a href="http://hushicai.com/2014/03/06/ming-ling-xing-zhong-hui-gun-svn.html" target="_blank" rel="external">å‘½ä»¤è¡Œä¸­å›æ»šsvn</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="u8D77_u56E0"><a href="#u8D77_u56E0" class="headerlink" title="èµ·å› "></a>èµ·å› </h3><p>ç”±äºä¹‹å‰çš„åŒäº‹æ²¡æœ‰å¥½å¥½è§„åˆ’ svn ä»“åº“ç»“æ„, ç°éœ€è¦é‡æ–°è§„åˆ’ç›®å½•ç»“æ„å¦‚ä¸‹:</p>
<pre><code>project1
    â”œâ”€â”€ branches
    â”œâ”€â”€ tags
    â””â”€â”€ trunk
        â”œâ”€â”€ code
        â”‚   â”œâ”€â”€ andriod
        â”‚   â”œâ”€â”€ ios
        â”‚   â”œâ”€â”€ php
        â”‚   â””â”€â”€ sql
        â”œâ”€â”€ doc
        â””â”€â”€ readme.txt
</code></pre><p><strong>trunk</strong>æ˜¯ä¸»åˆ†æ”¯ï¼Œæ˜¯æ—¥å¸¸å¼€å‘è¿›è¡Œçš„åœ°æ–¹ã€‚</p>
<p><strong>branches</strong>æ˜¯åˆ†æ”¯ã€‚ä¸€äº›é˜¶æ®µæ€§çš„releaseç‰ˆæœ¬ï¼Œè¿™äº›ç‰ˆæœ¬æ˜¯å¯ä»¥ç»§ç»­è¿›è¡Œå¼€å‘å’Œç»´æŠ¤çš„ï¼Œåˆ™æ”¾åœ¨branchesç›®å½•ä¸­ã€‚åˆæ¯”å¦‚ä¸ºä¸åŒç”¨æˆ·å®¢åˆ¶åŒ–çš„ç‰ˆæœ¬ï¼Œä¹Ÿå¯ä»¥æ”¾åœ¨åˆ†æ”¯ä¸­è¿›è¡Œå¼€å‘ã€‚</p>
<p><strong>tags</strong>ç›®å½•ä¸€èˆ¬æ˜¯åªè¯»çš„ï¼Œè¿™é‡Œå­˜å‚¨é˜¶æ®µæ€§çš„å‘å¸ƒç‰ˆæœ¬ï¼Œåªæ˜¯ä½œä¸ºä¸€ä¸ªé‡Œç¨‹ç¢‘çš„ç‰ˆæœ¬è¿›è¡Œå­˜æ¡£ã€‚    </p>
<p>ç°åœ¨éœ€è¦å°†åˆ†æ•£çš„ä»£ç ä»“åº“éƒ½è¿ç§»æ”¾åˆ° <em>trunk-code</em> ç›®å½•ä¸‹è¿›è¡Œåˆ†ç±»å­˜æ”¾, å¹¶è§„åˆ’ç›¸åº”ä»“åº“çš„äººå‘˜æƒé™</p>]]>
    
    </summary>
    
      <category term="svn" scheme="http://yoursite.com/tags/svn/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Shellæ•°ç»„]]></title>
    <link href="http://yoursite.com/2016/04/08/Shell%E6%95%B0%E7%BB%84/"/>
    <id>http://yoursite.com/2016/04/08/Shellæ•°ç»„/</id>
    <published>2016-04-08T03:19:37.000Z</published>
    <updated>2016-04-14T01:44:33.000Z</updated>
    <content type="html"><![CDATA[<h3 id="Linux_Shell_u4E2D_u7684_u6570_u7EC4_u53CA_u904D_u5386"><a href="#Linux_Shell_u4E2D_u7684_u6570_u7EC4_u53CA_u904D_u5386" class="headerlink" title="Linux Shellä¸­çš„æ•°ç»„åŠéå†"></a><a href="http://blog.csdn.net/redhat456/article/details/6068409" target="_blank" rel="external">Linux Shellä¸­çš„æ•°ç»„åŠéå†</a></h3><figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ•°ç»„èµ‹å€¼</span></span><br><span class="line">root<span class="variable">@Ubuntu</span><span class="symbol">:~</span><span class="comment"># a=(1 2 3 b c d)</span></span><br><span class="line"><span class="comment"># è°ƒç”¨æ•°ç»„å…ƒç´ </span></span><br><span class="line">root<span class="variable">@Ubuntu</span><span class="symbol">:~</span><span class="comment"># echo $&#123;a[0]&#125;</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">root<span class="variable">@Ubuntu</span><span class="symbol">:~</span><span class="comment"># echo $&#123;a[1]&#125;</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">root<span class="variable">@Ubuntu</span><span class="symbol">:~</span><span class="comment"># echo $&#123;a[3]&#125;</span></span><br><span class="line">b    </span><br><span class="line">root<span class="variable">@Ubuntu</span><span class="symbol">:~</span><span class="comment"># echo $&#123;a[@]&#125;</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> b c d</span><br><span class="line">root<span class="variable">@Ubuntu</span><span class="symbol">:~</span><span class="comment"># for i in $&#123;a[@]&#125;; do echo $i; done</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br></pre></td></tr></table></figure>
<a id="more"></a>]]></content>
    <summary type="html">
    <![CDATA[<h3 id="Linux_Shell_u4E2D_u7684_u6570_u7EC4_u53CA_u904D_u5386"><a href="#Linux_Shell_u4E2D_u7684_u6570_u7EC4_u53CA_u904D_u5386" class="headerlink" title="Linux Shellä¸­çš„æ•°ç»„åŠéå†"></a><a href="http://blog.csdn.net/redhat456/article/details/6068409">Linux Shellä¸­çš„æ•°ç»„åŠéå†</a></h3><figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line"><span class="comment"># æ•°ç»„èµ‹å€¼</span></span><br><span class="line">root<span class="variable">@Ubuntu</span><span class="symbol">:~</span><span class="comment"># a=(1 2 3 b c d)</span></span><br><span class="line"><span class="comment"># è°ƒç”¨æ•°ç»„å…ƒç´ </span></span><br><span class="line">root<span class="variable">@Ubuntu</span><span class="symbol">:~</span><span class="comment"># echo $&#123;a[0]&#125;</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line">root<span class="variable">@Ubuntu</span><span class="symbol">:~</span><span class="comment"># echo $&#123;a[1]&#125;</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line">root<span class="variable">@Ubuntu</span><span class="symbol">:~</span><span class="comment"># echo $&#123;a[3]&#125;</span></span><br><span class="line">b    </span><br><span class="line">root<span class="variable">@Ubuntu</span><span class="symbol">:~</span><span class="comment"># echo $&#123;a[@]&#125;</span></span><br><span class="line"><span class="number">1</span> <span class="number">2</span> <span class="number">3</span> b c d</span><br><span class="line">root<span class="variable">@Ubuntu</span><span class="symbol">:~</span><span class="comment"># for i in $&#123;a[@]&#125;; do echo $i; done</span></span><br><span class="line"><span class="number">1</span></span><br><span class="line"><span class="number">2</span></span><br><span class="line"><span class="number">3</span></span><br><span class="line">b</span><br><span class="line">c</span><br><span class="line">d</span><br></pre></td></tr></table></figure>]]>
    
    </summary>
    
      <category term="shell" scheme="http://yoursite.com/tags/shell/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[centos7 å®‰è£…ç ´è§£confluence 5.8]]></title>
    <link href="http://yoursite.com/2016/04/05/centos7-%E5%AE%89%E8%A3%85%E7%A0%B4%E8%A7%A3confluence-5-8/"/>
    <id>http://yoursite.com/2016/04/05/centos7-å®‰è£…ç ´è§£confluence-5-8/</id>
    <published>2016-04-05T03:09:57.000Z</published>
    <updated>2016-04-12T02:38:32.000Z</updated>
    <content type="html"><![CDATA[<h3 id="u5B89_u88C5_jdk"><a href="#u5B89_u88C5_jdk" class="headerlink" title="å®‰è£… jdk"></a>å®‰è£… jdk</h3><pre><code>$ yum install -y java-1.7.0-openjdk.x86_64
$ java -version
java version &quot;1.7.0_99&quot;
OpenJDK Runtime Environment (rhel-2.6.5.0.el7_2-x86_64 u99-b00)
OpenJDK 64-Bit Server VM (build 24.95-b01, mixed mode)
</code></pre><a id="more"></a>
<h3 id="u5B89_u88C5_u6570_u636E_u5E93"><a href="#u5B89_u88C5_u6570_u636E_u5E93" class="headerlink" title="å®‰è£…æ•°æ®åº“"></a>å®‰è£…æ•°æ®åº“</h3><p><del>æœ¬æ¥æ‰“ç®—ç›´æ¥ç”¨ mariadb çš„, ä½†æ˜¯ confluence ä¸æ”¯æŒè¿™ä¸ªé©±åŠ¨.åªèƒ½å¦å¤–è£… mysql äº†, ä¸‹é¢è¿™å°æ®µä½œåºŸ, ç›´æ¥è·³ mysql å®‰è£…</del></p>
<pre><code>yum install -y mariadb*
systemctl start mariadb.service
systemctl enable mariadb.service
mysql_secure_installation  #ä¸€è·¯ yes ä¸‹å»

#è§£å†³ä¸­æ–‡ä¹±ç é—®é¢˜
vim /etc/my.cnf
[mysqld]
character-set-server =utf8
é‡å¯æœåŠ¡
</code></pre><p>centos7 yum æºä¸å¸¦ mysql, éœ€è¦è‡ªå·±å®‰è£… yum æº</p>
<pre><code>wget http://repo.mysql.com/mysql-community-release-el7-5.noarch.rpm
rpm -ivh mysql-community-release-el7-5.noarch.rpm
yum install mysql-server
</code></pre><h3 id="u5F00_u59CB_u5B89_u88C5_confluence"><a href="#u5F00_u59CB_u5B89_u88C5_confluence" class="headerlink" title="å¼€å§‹å®‰è£… confluence"></a>å¼€å§‹å®‰è£… confluence</h3><pre><code>$ chmod u+x /usr/local/confluence-5.8.10-x64.bin
$ /usr/local/confluence-5.8.10-x64.bin
Unpacking JRE ...
Starting Installer ...
å››æœˆ 05, 2016 3:13:16 ä¸‹åˆ java.util.prefs.FileSystemPreferences$1 run
INFO: Created user preferences directory.

This will install Confluence 5.8.10 on your computer.
OK [o, Enter], Cancel [c]

Choose the appropriate installation or upgrade option.
Please choose one of the following:
Express Install (uses default settings) [1],
Custom Install (recommended for advanced users) [2, Enter],
Upgrade an existing Confluence installation [3]
1
See where Confluence will be installed and the settings that will be used.
Installation Directory: /opt/atlassian/confluence
Home Directory: /var/atlassian/application-data/confluence
HTTP Port: 8090
RMI Port: 8000
Install as service: Yes
Install [i, Enter], Exit [e]
i
</code></pre><p>httpè®¿é—®</p>
<pre><code>http://your.centos.ip:8090
</code></pre><p>ç‚¹å‡»å®‰è£…, è®°å½• serverid : BH9S-DN8I-F20N-QN2C</p>
<p><img src="http://7xpsj5.com1.z0.glb.clouddn.com/confluence-crack1.png" alt="confluence-crack1"></p>
<h3 id="u7834_u89E3"><a href="#u7834_u89E3" class="headerlink" title="ç ´è§£"></a>ç ´è§£</h3><p>åœæ­¢wikiæœåŠ¡, è¿›è¡Œç ´è§£</p>
<pre><code>$ /etc/init.d/confluence stop
executing using dedicated user
If you encounter issues starting up Confluence, please see the Installation guide at http://confluence.atlassian.com/display/DOC/Confluence+Installation+Guide

Server startup logs are located in /opt/atlassian/confluence/logs/catalina.out
Using CATALINA_BASE:   /opt/atlassian/confluence
Using CATALINA_HOME:   /opt/atlassian/confluence
Using CATALINA_TMPDIR: /opt/atlassian/confluence/temp
Using JRE_HOME:        /opt/atlassian/confluence/jre/
Using CLASSPATH:       /opt/atlassian/confluence/bin/bootstrap.jar:/opt/atlassian/confluence/bin/tomcat-juli.jar
Using CATALINA_PID:    /opt/atlassian/confluence/work/catalina.pid
Tomcat stopped.


cp /opt/atlassian/confluence/confluence/WEB-INF/lib/atlassian-extras-decoder-v2-3.2.jar /tmp/atlassian-extras-2.4.jar
</code></pre><p>ç ´è§£å°†åœ¨ mac æœ¬åœ°è¿›è¡Œ, å› ä¸ºéœ€è¦å›¾å½¢ç•Œé¢â€¦</p>
<pre><code>âœ /Users/cristaly7/tmp &gt;scp -r HD_Server_Config:/root/confluence5.8/confluence5.1-crack .
âœ /Users/cristaly7/tmp &gt;cd confluence5.1-crack/iNViSiBLE
âœ /Users/cristaly7/tmp/confluence5.1-crack/iNViSiBLE &gt;chmod u+x keygen_MacOSX.sh

# æŒ‰ç…§ç½‘ä¸Šçš„æ–‡ç« è¿è¡Œå‘½ä»¤
/System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/bin/java -jar confluence_keygen.jar
zsh: no such file or directory: /System/Library/Frameworks/JavaVM.framework/Versions/1.6/Home/bin/java
âœ /Users/cristaly7/tmp/confluence5.1-crack/iNViSiBLE &gt;java -v
No Java runtime present, requesting install.
</code></pre><p>æ²¡æœ‰java, éœ€è¦å®‰è£… java</p>
<p><a href="http://www.oracle.com/technetwork/java/javase/downloads/index.html" target="_blank" rel="external">ä¸‹è½½ java</a>  </p>
<p>è¿è¡Œç ´è§£ç¨‹åº</p>
<pre><code>âœ /Users/cristaly7/tmp/confluence5.1-crack/iNViSiBLE &gt;java -jar confluence_keygen.jar
</code></pre><p>è¾“å…¥ serverid , ç‚¹å‡». patch</p>
<p><img src="http://7xpsj5.com1.z0.glb.clouddn.com/confluence-crack2.png" alt=""></p>
<p>é€‰æ‹© <code>confluence5.1-crack</code> æ–‡ä»¶å¤¹é‡Œçš„ <code>atlassian-extras-2.4.jar</code> </p>
<p><img src="http://7xpsj5.com1.z0.glb.clouddn.com/confluence-crack3.png" alt=""></p>
<p>ç‚¹å‡».gen ä¼šç”Ÿæˆ key, å¹¶ä¸”<code>confluence5.1-crack</code> æ–‡ä»¶å¤¹ä¼šå¤šå‡ºä¸€ä¸ª<code>atlassian-extras-2.4.bak</code></p>
<p><img src="http://7xpsj5.com1.z0.glb.clouddn.com/confluence-crack4.png" alt=""></p>
<p>æ‹·è´ç ´è§£çš„æ–‡ä»¶åˆ°å®‰è£…ç›®å½•è¿›è¡Œè¦†ç›–</p>
<pre><code>âœ /Users/cristaly7/tmp/confluence5.1-crack &gt;scp atlassian-extras-2.4.jar HD_Server_Config:/opt/atlassian/confluence/confluence/WEB-INF/lib
</code></pre><p>å¼€å¯ wiki æœåŠ¡</p>
<pre><code>$ service confluence start
</code></pre><p>åœ¨ License key é‚£é‡Œè¾“å…¥åˆšæ‰ç”Ÿæˆçš„ key</p>
<p>æ‹·è´ mysql é©±åŠ¨</p>
<pre><code>cp mysql-connector-java-5.1.32-bin.jar  /opt/atlassian/confluence/confluence/WEB-INF/lib/
</code></pre><p>é‡å¯æœåŠ¡</p>
<pre><code>service confluence restart
</code></pre><h3 id="u5B89_u88C5_u9875_u9762_u914D_u7F6E"><a href="#u5B89_u88C5_u9875_u9762_u914D_u7F6E" class="headerlink" title="å®‰è£…é¡µé¢é…ç½®"></a>å®‰è£…é¡µé¢é…ç½®</h3><p>åœ¨é¡µé¢ä¸Šï¼Œé€‰æ‹©æ•°æ®åº“â€œMySQLâ€ï¼Œç‚¹å‡»â€œ Externam Databaseâ€</p>
<p>ç™»å½•mysql åˆ›å»ºæ•°æ®åº“åŠè´¦å·</p>
<pre><code>mysql -uroot -p
create database wiki character set UTF8;
grant all on wiki.* to wiki_user@&quot;%&quot; identified by &quot;wiki_password&quot;;
</code></pre><p>æˆ‘è¿™é‡Œè£…çš„æ˜¯ percona 5.6</p>
<p>ç¡®å®šå­˜å‚¨å¼•æ“æ˜¯ InnoDB</p>
<p>åœ¨é¡µé¢ä¸Šç‚¹å‡»â€œDirect JDBCâ€</p>
<p>å¡«å†™dbä¿¡æ¯</p>
<p>Driver Class Nameä¸ç”¨å˜</p>
<p>Database URLï¼Œä¿®æ­£å¯¹åº”ipã€portã€databaseï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>jdbc:mysql://localhost:3306/wiki?useUnicode=true&amp;characterEncoding=UTF8&amp;sessionVariables=storage_engine%3DInnoDB
</code></pre><p>ä¸Šé¢çš„è¿æ¥ç¬¦æ˜¯â€<code>&amp;amp;</code>â€ä¸æ˜¯â€&amp;â€ï¼Œè¿™æ ·æ˜¯æ²¡æœ‰é—®é¢˜çš„ï¼Œå¦‚æœä½ è¦ç”¨â€&amp;â€ä¹Ÿå¯ä»¥å°è¯•ï¼Œä½†åé¢å¯èƒ½å‡ºé”™</p>
<p>ç‚¹å‡»â€œNextâ€ï¼Œæ­¤æ—¶å¯èƒ½ä¼šæœ‰ä¸€ä¸ªæ¯”è¾ƒé•¿çš„ç­‰å¾…ï¼Œå¦‚æœæ­¤å¤„å‡ºé”™äº†ï¼Œåœæ‰wikiæœåŠ¡ï¼Œå¸è½½wikiï¼Œåˆ æ‰wikiæ–‡ä»¶ï¼Œå¸è½½æ•°æ®åº“ï¼Œä»ç¬¬ä¸€æ­¥é‡æ–°æ¥ã€‚</p>
<p>å¦‚æœä¸Šä¸€æ­¥æˆåŠŸçš„è¯ï¼Œç‚¹å‡»â€œEmpty Siteâ€ã€‚ä½ ä¹Ÿå¯ä»¥ç‚¹å‡»â€œExample Siteâ€</p>
<p>ç‚¹å‡»â€œManage users and groups within Confluenceâ€ï¼Œè®¾ç½®ç®¡ç†å‘˜ç›¸å…³ä¿¡æ¯ã€‚è¿™é‡Œæ˜¯â€œä¸‹ä¸€æ­¥â€è¿˜æ˜¯â€œç¡®å®šâ€å¿˜äº†ï¼Œç‚¹å‡»å³å¯</p>
<h3 id="u57FA_u672C_u4F7F_u7528"><a href="#u57FA_u672C_u4F7F_u7528" class="headerlink" title="åŸºæœ¬ä½¿ç”¨"></a>åŸºæœ¬ä½¿ç”¨</h3><h3 id="u5751"><a href="#u5751" class="headerlink" title="å‘"></a>å‘</h3><h4 id="u90AE_u4EF6_u914D_u7F6E_u4E0D_u80FD_u6210_u529F"><a href="#u90AE_u4EF6_u914D_u7F6E_u4E0D_u80FD_u6210_u529F" class="headerlink" title="é‚®ä»¶é…ç½®ä¸èƒ½æˆåŠŸ"></a>é‚®ä»¶é…ç½®ä¸èƒ½æˆåŠŸ</h4><p>æ— è®ºæ˜¯ç›´æ¥é…ç½® smtp, è¿˜æ˜¯ä¿®æ”¹é…ç½®æ–‡ä»¶é…ç½® JNxxçš„, éƒ½ä¸è¡Œ</p>
<p>é…ç½® smtp ç›´æ¥è¯´éªŒè¯å¤±è´¥</p>
<p>é…ç½® JNxx çš„, æ¯æ¬¡ä¸€ç‚¹å‡»æµ‹è¯•é‚®ä»¶å‘é€, å°±æ‰¾ä¸åˆ°é¡µé¢, å¹¶ä¸”ç½‘ä¸Šä¹Ÿæ²¡æœ‰è§£å†³æ–¹æ¡ˆ, å¤ªä»¤äººæš´èºäº†</p>
<h4 id="u4E0A_u4F20_u7684_doc__u4E2D_u6587_u9644_u4EF6_u663E_u793A_u4E71_u7801"><a href="#u4E0A_u4F20_u7684_doc__u4E2D_u6587_u9644_u4EF6_u663E_u793A_u4E71_u7801" class="headerlink" title="ä¸Šä¼ çš„ doc ä¸­æ–‡é™„ä»¶æ˜¾ç¤ºä¹±ç "></a>ä¸Šä¼ çš„ doc ä¸­æ–‡é™„ä»¶æ˜¾ç¤ºä¹±ç </h4><h4 id="mysql-bin_log__u5F88_u5927_21"><a href="#mysql-bin_log__u5F88_u5927_21" class="headerlink" title="mysql-bin log å¾ˆå¤§!"></a>mysql-bin log å¾ˆå¤§!</h4><p>ä»€ä¹ˆåŸå› ? confluence åˆ·äº†å¾ˆå¤šè¿™æ ·çš„æ—¥å¿—:</p>
<pre><code>&lt;/com.atlassian.confluence.schedule.ScheduledJobHistory&gt;
&lt;com.atlassian.confluence.schedule.ScheduledJobHistory&gt;
  &lt;startDate&gt;2016-04-12 09:29:42.126 CST&lt;/startDate&gt;
  &lt;endDate&gt;2016-04-12 09:29:42.126 CST&lt;/endDate&gt;
&lt;/com.atlassian.confluence.schedule.ScheduledJobHistory&gt;
&lt;com.atlassian.confluence.schedule.ScheduledJobHistory&gt;
  &lt;startDate&gt;2016-04-12 09:44:42.126 CST&lt;/startDate&gt;
  &lt;endDate&gt;2016-04-12 09:44:42.127 CST&lt;/endDate&gt;
&lt;/com.atlassian.confluence.schedule.ScheduledJobHistory&gt;
&lt;com.atlassian.confluence.schedule.ScheduledJobHistory&gt;
  &lt;startDate&gt;2016-04-12 09:59:42.126 CST&lt;/startDate&gt;
  &lt;endDate&gt;2016-04-12 09:59:42.126 CST&lt;/endDate&gt;
&lt;/com.atlassian.confluence.schedule.ScheduledJobHistory&gt;
&lt;com.atlassian.confluence.schedule.ScheduledJobHistory&gt;
  &lt;startDate&gt;2016-04-12 10:14:42.126 CST&lt;/startDate&gt;
  &lt;endDate&gt;2016-04-12 10:14:42.126 CST&lt;/endDate&gt;
&lt;/com.atlassian.confluence.schedule.ScheduledJobHistory&gt;
&lt;com.atlassian.confluence.schedule.ScheduledJobHistory&gt;
  &lt;startDate&gt;2016-04-12 10:29:42.126 CST&lt;/startDate&gt;
  &lt;endDate&gt;2016-04-12 10:29:42.126 CST&lt;/endDate&gt;
&lt;/com.atlassian.confluence.schedule.ScheduledJobHistory&gt;
</code></pre><p><em>General Configuration &gt; Scheduled Jobs</em> åˆ°è¿™é‡Œå¯ä»¥è¿›è¡Œè®¾ç½®å’Œå…³é—­ä»»åŠ¡è°ƒåº¦, ç„¶è€Œä¸çŸ¥é“å…³äº†ä¼šæœ‰å•¥åæœ, çœŸæ˜¯æ“è›‹ç©æ„!</p>
<h4 id="Analytics__u6027_u80FD_u6536_u96C6_u53D1_u9001"><a href="#Analytics__u6027_u80FD_u6536_u96C6_u53D1_u9001" class="headerlink" title="Analytics æ€§èƒ½æ”¶é›†å‘é€"></a>Analytics æ€§èƒ½æ”¶é›†å‘é€</h4><p>è¿™ä¸ªä¼šæ”¶é›† confluence ä½¿ç”¨æƒ…å†µå‘é€åˆ° confluence å…¬å¸â€¦.å°¼ç›è€å­ç”¨çš„ç ´è§£ç‰ˆçš„å•Š, è¿˜å‘é€, æœæ–­å…³é—­</p>
<p>æœªå®Œå¾…ç»­â€¦.</p>
<p>å‚è€ƒ:</p>
<p><a href="http://www.jianshu.com/p/d7e253db24d9" target="_blank" rel="external">åˆ›ä¸šå·¥å…·ä¹‹çŸ¥è¯†ç®¡ç†ï¼šConfluence</a></p>
<p><a href="http://www.jianshu.com/p/27cb54b4a81a" target="_blank" rel="external">çŸ¥è¯†ç®¡ç†Confluenceï¼šå¸¸ç”¨åŸºæœ¬æ“ä½œ</a></p>
<p><a href="http://www.tuicool.com/articles/7FvuMn" target="_blank" rel="external">CentOSå®‰è£…confluence(WIKI)</a></p>
<p><a href="http://www.centoscn.com/image-text/install/2015/1121/6441.html" target="_blank" rel="external">centoså®‰è£…confluenceåŠç ´è§£</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="u5B89_u88C5_jdk"><a href="#u5B89_u88C5_jdk" class="headerlink" title="å®‰è£… jdk"></a>å®‰è£… jdk</h3><pre><code>$ yum install -y java-1.7.0-openjdk.x86_64
$ java -version
java version &quot;1.7.0_99&quot;
OpenJDK Runtime Environment (rhel-2.6.5.0.el7_2-x86_64 u99-b00)
OpenJDK 64-Bit Server VM (build 24.95-b01, mixed mode)
</code></pre>]]>
    
    </summary>
    
      <category term="confluence" scheme="http://yoursite.com/tags/confluence/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[mac os å®‰è£…ä½¿ç”¨postgresql]]></title>
    <link href="http://yoursite.com/2016/04/01/mac-os-%E5%AE%89%E8%A3%85%E4%BD%BF%E7%94%A8postgresql/"/>
    <id>http://yoursite.com/2016/04/01/mac-os-å®‰è£…ä½¿ç”¨postgresql/</id>
    <published>2016-04-01T08:42:33.000Z</published>
    <updated>2016-04-08T03:27:53.000Z</updated>
    <content type="html"><![CDATA[<h3 id="u5B89_u88C5"><a href="#u5B89_u88C5" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><pre><code>âœ /Users/cristaly7/Desktop/15/15 &gt;brew install postgres
==&gt; Downloading https://homebrew.bintray.com/bottles/postgresql-9.4.5_2.el_capitan.bottle.tar.gz
######################################################################## 100.0%
==&gt; Pouring postgresql-9.4.5_2.el_capitan.bottle.tar.gz
==&gt; Caveats
If builds of PostgreSQL 9 are failing and you have version 8.x installed,
you may need to remove the previous version first. See:
  https://github.com/Homebrew/homebrew/issues/2510

To migrate existing data from a previous major version (pre-9.4) of PostgreSQL, see:
  https://www.postgresql.org/docs/9.4/static/upgrading.html

To load postgresql:
  launchctl load ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist
Or, if you don&apos;t want/need launchctl, you can just run:
  postgres -D /usr/local/var/postgres
==&gt; Summary
ğŸº  /usr/local/Cellar/postgresql/9.4.5_2: 3,021 files, 33.7M
</code></pre><a id="more"></a>
<h3 id="u521D_u59CB_u5316"><a href="#u521D_u59CB_u5316" class="headerlink" title="åˆå§‹åŒ–"></a>åˆå§‹åŒ–</h3><pre><code>âœ /Users/cristaly7 &gt;initdb ~/postgresql
The files belonging to this database system will be owned by user &quot;cristaly7&quot;.
This user must also own the server process.

The database cluster will be initialized with locales
  COLLATE:  en_US.UTF-8
  CTYPE:    zh_CN.UTF-8
  MESSAGES: en_US.UTF-8
  MONETARY: en_US.UTF-8
  NUMERIC:  en_US.UTF-8
  TIME:     en_US.UTF-8
The default database encoding has accordingly been set to &quot;UTF8&quot;.
initdb: could not find suitable text search configuration for locale &quot;zh_CN.UTF-8&quot;
The default text search configuration will be set to &quot;simple&quot;.

Data page checksums are disabled.

creating directory /Users/cristaly7/postgresql ... ok
creating subdirectories ... ok
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting dynamic shared memory implementation ... posix
creating configuration files ... ok
creating template1 database in /Users/cristaly7/postgresql/base/1 ... ok
initializing pg_authid ... ok
initializing dependencies ... ok
creating system views ... ok
loading system objects&apos; descriptions ... ok
creating collations ... ok
creating conversions ... ok
creating dictionaries ... ok
setting privileges on built-in objects ... ok
creating information schema ... ok
loading PL/pgSQL server-side language ... ok
vacuuming database template1 ... ok
copying template1 to template0 ... ok
copying template1 to postgres ... ok
syncing data to disk ... ok

WARNING: enabling &quot;trust&quot; authentication for local connections
You can change this by editing pg_hba.conf or using the option -A, or
--auth-local and --auth-host, the next time you run initdb.

Success. You can now start the database server using:

    postgres -D /Users/cristaly7/postgresql
or
    pg_ctl -D /Users/cristaly7/postgresql -l logfile start
</code></pre><h3 id="u542F_u52A8_u4E0E_u505C_u6B62"><a href="#u542F_u52A8_u4E0E_u505C_u6B62" class="headerlink" title="å¯åŠ¨ä¸åœæ­¢"></a>å¯åŠ¨ä¸åœæ­¢</h3><pre><code>âœ /Users/cristaly7 &gt;pg_ctl -D /Users/cristaly7/postgresql -l ~/postgresql/logfile start
server starting

âœ /Users/cristaly7 &gt;pg_ctl -D ~/postgresql stop -s -m fast
</code></pre><p>### </p>
<p>å‚è€ƒ:</p>
<p><a href="http://blog.everlose.com/mac-homebrew-postgresql.html" target="_blank" rel="external">Macä¸‹ä½¿ç”¨homebrewå®‰è£…postgresqlåŠé…ç½®</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="u5B89_u88C5"><a href="#u5B89_u88C5" class="headerlink" title="å®‰è£…"></a>å®‰è£…</h3><pre><code>âœ /Users/cristaly7/Desktop/15/15 &gt;brew install postgres
==&gt; Downloading https://homebrew.bintray.com/bottles/postgresql-9.4.5_2.el_capitan.bottle.tar.gz
######################################################################## 100.0%
==&gt; Pouring postgresql-9.4.5_2.el_capitan.bottle.tar.gz
==&gt; Caveats
If builds of PostgreSQL 9 are failing and you have version 8.x installed,
you may need to remove the previous version first. See:
  https://github.com/Homebrew/homebrew/issues/2510

To migrate existing data from a previous major version (pre-9.4) of PostgreSQL, see:
  https://www.postgresql.org/docs/9.4/static/upgrading.html

To load postgresql:
  launchctl load ~/Library/LaunchAgents/homebrew.mxcl.postgresql.plist
Or, if you don&apos;t want/need launchctl, you can just run:
  postgres -D /usr/local/var/postgres
==&gt; Summary
ğŸº  /usr/local/Cellar/postgresql/9.4.5_2: 3,021 files, 33.7M
</code></pre>]]>
    
    </summary>
    
      <category term="os x" scheme="http://yoursite.com/tags/os-x/"/>
    
      <category term="postgresql" scheme="http://yoursite.com/tags/postgresql/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[nginxæ‰“å¼€ç›®å½•æµè§ˆåŠŸèƒ½(autoindex)]]></title>
    <link href="http://yoursite.com/2016/03/29/nginx%E6%89%93%E5%BC%80%E7%9B%AE%E5%BD%95%E6%B5%8F%E8%A7%88%E5%8A%9F%E8%83%BD-autoindex/"/>
    <id>http://yoursite.com/2016/03/29/nginxæ‰“å¼€ç›®å½•æµè§ˆåŠŸèƒ½-autoindex/</id>
    <published>2016-03-29T03:27:44.000Z</published>
    <updated>2016-04-05T02:46:59.000Z</updated>
    <content type="html"><![CDATA[<pre><code>server {
        server_name hook.123.cn;
        root /opt/www/svnhook/document/php;
        location / {
                autoindex on;
                autoindex_localtime on;
                charset utf-8,gbk;  # è§£å†³ä¸­æ–‡ä¹±ç 

                # è®¤è¯ç™»é™†
                auth_basic            &quot;Password please&quot;;
                auth_basic_user_file  /etc/nginx/htpasswd;


                index æŠ•æ ‡å•ä½ç®¡ç†.html;
                if (!-e $request_filename) {
                        rewrite ^(.*)$  /manage.html last;
                }
        }
}
</code></pre><p><code>/etc/nginx/htpasswd</code> è®°å¾—ä¿®æ”¹ä¸º nginx çš„æƒé™ , è´¦å·å¯†ç å¯ä»¥é€šè¿‡åœ¨çº¿çš„htpasswdç”Ÿæˆå™¨ç”Ÿæˆ</p>
<p><a href="http://blog.licess.com/nginx-autoindex/" target="_blank" rel="external">nginxæ‰“å¼€ç›®å½•æµè§ˆåŠŸèƒ½(autoindex)</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<pre><code>server {
        server_name hook.123.cn;
        root /opt/www/svnhook/document/php;
        location / {
                autoin]]>
    </summary>
    
      <category term="nginx" scheme="http://yoursite.com/tags/nginx/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[ä½¿ç”¨rsync]]></title>
    <link href="http://yoursite.com/2016/03/28/%E4%BD%BF%E7%94%A8rsync/"/>
    <id>http://yoursite.com/2016/03/28/ä½¿ç”¨rsync/</id>
    <published>2016-03-28T07:57:13.000Z</published>
    <updated>2016-03-28T08:00:56.000Z</updated>
    <content type="html"><![CDATA[<h3 id="u62F7_u8D1D_u6587_u4EF6_u5939_u9664_u4E86_u5E26_mysql__u4E4B_u5916_u7684_u6587_u4EF6"><a href="#u62F7_u8D1D_u6587_u4EF6_u5939_u9664_u4E86_u5E26_mysql__u4E4B_u5916_u7684_u6587_u4EF6" class="headerlink" title="æ‹·è´æ–‡ä»¶å¤¹é™¤äº†å¸¦ mysql ä¹‹å¤–çš„æ–‡ä»¶"></a>æ‹·è´æ–‡ä»¶å¤¹é™¤äº†å¸¦ mysql ä¹‹å¤–çš„æ–‡ä»¶</h3><pre><code>rsync -av --exclude &apos;*mysql*&apos; root@server:/home/eg/php2 /home/php

-a for archive (mostly all files)
-v for verbose output
</code></pre><p><a href="http://stackoverflow.com/questions/1228466/how-to-filter-files-when-using-scp-to-copy-dir-recursively" target="_blank" rel="external">How to filter files when using scp to copy dir recursively?</a></p>
<p>é¡ºä¾¿å­¦ä¹ åˆ°äº†ls çš„è¿™ç§ç”¨æ³•</p>
<pre><code>ls --ignore=*mysql* 
</code></pre>]]></content>
    <summary type="html">
    <![CDATA[<h3 id="u62F7_u8D1D_u6587_u4EF6_u5939_u9664_u4E86_u5E26_mysql__u4E4B_u5916_u7684_u6587_u4EF6"><a href="#u62F7_u8D1D_u6587_u4EF6_u5939_u9664_]]>
    </summary>
    
      <category term="rsync" scheme="http://yoursite.com/tags/rsync/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[centos7å¸¸ç”¨å‘½ä»¤]]></title>
    <link href="http://yoursite.com/2016/03/25/centos7%E5%B8%B8%E7%94%A8%E5%91%BD%E4%BB%A4/"/>
    <id>http://yoursite.com/2016/03/25/centos7å¸¸ç”¨å‘½ä»¤/</id>
    <published>2016-03-25T07:30:43.000Z</published>
    <updated>2016-03-31T03:25:12.000Z</updated>
    <content type="html"><![CDATA[<p>å…¶å®è¿™äº›ä¸œè¥¿å¤§éƒ¨åˆ† ansible éƒ½èƒ½åš</p>
<h3 id="systemd__u76F8_u5173"><a href="#systemd__u76F8_u5173" class="headerlink" title="systemd ç›¸å…³"></a>systemd ç›¸å…³</h3><p>è®¾ç½®å¼€æœºè‡ªå¯åŠ¨å‘½ä»¤</p>
<pre><code>å¯åŠ¨nginxæœåŠ¡
systemctl start nginx.service
è®¾ç½®å¼€æœºè‡ªå¯åŠ¨
systemctl enable nginx.service
åœæ­¢å¼€æœºè‡ªå¯åŠ¨
systemctl disable nginx.service
æŸ¥çœ‹æœåŠ¡å½“å‰çŠ¶æ€
systemctl status nginx.service
é‡æ–°å¯åŠ¨æœåŠ¡
systemctl restart nginx.service
æŸ¥çœ‹æ‰€æœ‰å·²å¯åŠ¨çš„æœåŠ¡
systemctl list-units --type=service
</code></pre><h3 id="u67E5_u770B_u7CFB_u7EDF_u7248_u672C"><a href="#u67E5_u770B_u7CFB_u7EDF_u7248_u672C" class="headerlink" title="æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬"></a>æŸ¥çœ‹ç³»ç»Ÿç‰ˆæœ¬</h3><pre><code>$ cat /etc/redhat-release
CentOS Linux release 7.2.1511 (Core)
</code></pre><h3 id="u9632_u706B_u5899"><a href="#u9632_u706B_u5899" class="headerlink" title="é˜²ç«å¢™"></a>é˜²ç«å¢™</h3><p>å®¢æˆ·ç«¯å‘½ä»¤firewalldå¯ä»¥ç”¨æ¥ä¿®æ”¹firewalldçš„æ°¸ä¹…é…ç½®æˆ–è€…è¿è¡Œæ—¶é…ç½®ã€‚firewalldçš„é…ç½®æ–‡ä»¶ä¿å­˜åœ¨<code>/usr/lib/firewalld/</code> å’Œ <code>/etc/firewalld/</code>ä¸­ï¼Œå…¶ä¸­å‰è€…æ˜¯é»˜è®¤çš„é…ç½®ï¼Œè¯·ä¸è¦ä¿®æ”¹ã€‚å¯ä»¥åœ¨<code>/etc/firewalld/</code>ä¸­ç¼–è¾‘è‡ªå·±çš„é…ç½®ï¼Œfirewalldä¼˜å…ˆä½¿ç”¨<code>/etc/firewalld/</code>ä¸­çš„é…ç½®ã€‚</p>
<p><a href="http://mlworks.cn/posts/Redhat7-Centos7-firewalld/" target="_blank" rel="external">Redhat 7ä¸Centos 7ä¸­çš„é˜²ç«å¢™Firewalld</a></p>
<p><a href="https://argcv.com/articles/3167.c" target="_blank" rel="external">CentOS 7 ä¸‹ä½¿ç”¨ iptables</a></p>
<pre><code>service iptables save #ä¿å­˜è®¾ç½®
iptables-save &gt; /etc/iptables.save  #å¯¼å‡ºè®¾ç½®
iptables-restore /etc/iptables.save #å¯¼å…¥è®¾ç½®

åŸå…ˆçš„ iptables è„šæœ¬åœ¨K`/usr/libexec/iptables/iptables.init`
å¯ä»¥æ‹·è´ç”¨..
cp /usr/libexec/iptables/iptables.init /etc/init.d/iptables
</code></pre>]]></content>
    <summary type="html">
    <![CDATA[<p>å…¶å®è¿™äº›ä¸œè¥¿å¤§éƒ¨åˆ† ansible éƒ½èƒ½åš</p>
<h3 id="systemd__u76F8_u5173"><a href="#systemd__u76F8_u5173" class="headerlink" title="systemd ç›¸å…³"></a>systemd]]>
    </summary>
    
      <category term="Centos 7" scheme="http://yoursite.com/tags/Centos-7/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[mysql ä½¿ç”¨éšè®°]]></title>
    <link href="http://yoursite.com/2016/03/25/mysql-%E4%BD%BF%E7%94%A8%E9%9A%8F%E8%AE%B0/"/>
    <id>http://yoursite.com/2016/03/25/mysql-ä½¿ç”¨éšè®°/</id>
    <published>2016-03-25T06:31:28.000Z</published>
    <updated>2016-04-08T16:38:02.000Z</updated>
    <content type="html"><![CDATA[<h3 id="u514D_u5BC6_u7801_u767B_u9646"><a href="#u514D_u5BC6_u7801_u767B_u9646" class="headerlink" title="å…å¯†ç ç™»é™†"></a>å…å¯†ç ç™»é™†</h3><p>é»˜è®¤ä½¿ç”¨~/.my.cnf</p>
<pre><code>$ vim ~/.my.cnf
[client]
password=your_pass
user=your_user
$ chmod 400 ~/.my.cnf
</code></pre><p>ä¹Ÿå¯ä»¥æŒ‡å®šç‰¹å®šæ–‡ä»¶</p>
<pre><code>$ mysql --defaults-file=/home/imlonghao/mysql-opts
</code></pre><h3 id="mysql__u5907_u4EFD"><a href="#mysql__u5907_u4EFD" class="headerlink" title="mysql å¤‡ä»½"></a>mysql å¤‡ä»½</h3><p>åˆ›å»ºå¤‡ä»½ç”¨æˆ·</p>
<pre><code># åˆ›å»ºä¸€ä¸ªåªå…è®¸æœ¬åœ°ç™»å½•çš„backupç”¨æˆ·ï¼Œå¯†ç ä¸º12345ã€‚
CREATE USER &apos;backup&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;12345&apos;; 

# å¢åŠ EVENT,LOCK TABLES,SELECT,SHOW DATABASESç­‰æƒé™ï¼Œè¿™æ˜¯MySQLå®˜æ–¹å·¥å…·å»ºè®®çš„BackupAdminè§’è‰²åº”è¯¥æ‹¥æœ‰çš„æƒé™ã€‚
GRANT EVENT,LOCK TABLES,SELECT,SHOW DATABASES ON  *.* TO &apos;backup&apos;@&apos;localhost&apos; ;

# åˆ·æ–°æƒé™ï¼Œä½¿åˆšæ·»åŠ çš„ç”¨æˆ·ç”Ÿæ•ˆã€‚
FLUSH PRIVILEGES;
</code></pre><p>åˆ›å»ºå¤‡ä»½ç›®å½•</p>
<pre><code>$ mkdir -p /data/backup/shell
$ mkdir /data/backup//mysql
$ cd /data/backup/shell
</code></pre><p>å¤‡ä»½è„šæœ¬</p>
<pre><code>$ vim mysql_backup.sh

#!/bin/bash


# å¤‡ä»½
DB=bid
MYSQL_PATH=/opt/mysql/bin/
BACKUP_DIR=/data/backup/mysql/
USER=backup
PASSWD=backup123
$MYSQL_PATH/mysqldump -hlocalhost -u$USER -p$PASSWD $DB  &gt; $BACKUP_DIR/$DB$(date -d &quot;today&quot; +&quot;%Y%m%d_%H%M%S&quot;).sql.gz 2&gt;&gt; /tmp/backup.err

if [ $? -eq 0 ]; then
    echo `date  +&quot;%Y-%m-%d %H:%M:%S&quot;`&quot;  mysql backup succeeded!&quot; &gt;&gt; /var/log/cron
else
    echo `date  +&quot;%Y-%m-%d %H:%M:%S&quot;`&quot;  mysql backup failed!&quot; &gt;&gt; /var/log/cron
fi


# åˆ é™¤10å¤©å‰çš„å¤‡ä»½æ–‡ä»¶
find $BACKUP_DIR -mtime +10 -name &quot;*.sql&quot; -type f -exec rm -rf {} \;
</code></pre><p>ä¿®æ”¹ä¸€ä¸‹è„šæœ¬æƒé™</p>
<pre><code>$ chmod 700 mysql_backup.sh
</code></pre><p>ç¼–è¾‘ crontab</p>
<pre><code>$ crontab -e
0 */2 * * * sh /data/backup/shell/mysql_backup.sh
</code></pre><a id="more"></a>
<h4 id="u5907_u4EFD_u8868_u7ED3_u6784"><a href="#u5907_u4EFD_u8868_u7ED3_u6784" class="headerlink" title="å¤‡ä»½è¡¨ç»“æ„"></a>å¤‡ä»½è¡¨ç»“æ„</h4><p>å¯¼å‡ºæ•¸æ“šåº“ç‚ºdbnameçš„è¡¨ç»“æ„ï¼ˆå…¶ä¸­ç”¨æˆ¶åç‚ºroot,å¯†ç ç‚ºdbpasswd,ç”Ÿæˆçš„è„šæœ¬åç‚ºdb.sqlï¼‰</p>
<pre><code>mysqldump -uroot -pdbpasswd -d dbname &gt;db.sql;
</code></pre><h3 id="u5E38_u7528_u547D_u4EE4"><a href="#u5E38_u7528_u547D_u4EE4" class="headerlink" title="å¸¸ç”¨å‘½ä»¤"></a>å¸¸ç”¨å‘½ä»¤</h3><h4 id="create_table"><a href="#create_table" class="headerlink" title="create table"></a>create table</h4><pre><code>create table `user` (  
`id` int(11) not null auto_increment, 
`name` varchar(100) default null,
 primary key (`id`))    
</code></pre><h4 id="insert_into__u63D2_u5165_u6570_u636E"><a href="#insert_into__u63D2_u5165_u6570_u636E" class="headerlink" title="insert into æ’å…¥æ•°æ®"></a>insert into æ’å…¥æ•°æ®</h4><pre><code>insert into user (name) values (&apos;bob&apos;);
insert into user (name) values (&apos;mark&apos;);
</code></pre><h4 id="truncate__u6E05_u7A7A_u8868"><a href="#truncate__u6E05_u7A7A_u8868" class="headerlink" title="truncate æ¸…ç©ºè¡¨"></a>truncate æ¸…ç©ºè¡¨</h4><pre><code>truncate table user;
</code></pre><h3 id="AB_u4E3B_u4ECE"><a href="#AB_u4E3B_u4ECE" class="headerlink" title="ABä¸»ä»"></a>ABä¸»ä»</h3><p>é…ç½®æ–¹æ³•ç½‘ä¸Šå¾ˆå¤šâ€¦è‡ªå·±æ‰¾å»å§ </p>
<h4 id="u4E3B_u4ECE_u707E_u96BE_u6062_u590D_u6F14_u7EC3"><a href="#u4E3B_u4ECE_u707E_u96BE_u6062_u590D_u6F14_u7EC3" class="headerlink" title="ä¸»ä»ç¾éš¾æ¢å¤æ¼”ç»ƒ"></a>ä¸»ä»ç¾éš¾æ¢å¤æ¼”ç»ƒ</h4><h3 id="u6253_u5F00_general_log"><a href="#u6253_u5F00_general_log" class="headerlink" title="æ‰“å¼€ general_log"></a>æ‰“å¼€ general_log</h3><p><a href="http://blog.itpub.net/25704976/viewspace-1251022/" target="_blank" rel="external">MySQLå¼€å¯general log</a></p>
<pre><code>mysql&gt;show variables like %general_log%;
mysql&gt;set global general_log_file=&apos;/tmp/general.log&apos;;
mysql&gt;set global general_log=on;
mysql&gt;set global general_log=off;
</code></pre><p>å‚è€ƒ:</p>
<p><a href="http://www.cnblogs.com/yuanyouqi/archive/2010/04/28/1722738.html" target="_blank" rel="external">Mysqlå¯¼å‡ºè¡¨ç»“æ„åŠè¡¨æ•°æ® mysqldumpç”¨æ³•</a></p>
<p><a href="http://wangwei007.blog.51cto.com/68019/965575" target="_blank" rel="external">Mysqlæ•°æ®åº“ä¸»ä»å¿ƒå¾—æ•´ç†</a>  </p>
<p><a href="http://ucode.blog.51cto.com/10837891/1747078" target="_blank" rel="external">MySQLä¸»ä»å¤åˆ¶ä¹‹ä¸»åº“å®•æœºå¤„ç†</a></p>
<p><a href="http://blog.csdn.net/JesseYoung/article/details/41211841" target="_blank" rel="external">mysqlå¤‡ä»½è¿˜åŸ-åŸºäºbinlogçš„å¢é‡å¤‡ä»½è¿˜åŸ</a>    </p>
<p><a href="http://ifxoxo.com/mysql_binlog.html" target="_blank" rel="external">ä»mysqlçš„binlogæ¢å¤æ•°æ®çš„æ­¥éª¤</a></p>
<p><a href="http://lizhenliang.blog.51cto.com/7876557/1669829" target="_blank" rel="external">ä¸åœæ­¢MySQLæœåŠ¡å¢åŠ ä»åº“çš„ä¸¤ç§æ–¹å¼</a></p>
<p><a href="https://imlonghao.com/7.html" target="_blank" rel="external">Shell ä¸‹å…å¯†ç å¿«é€Ÿç™»é™† MySQL æ•°æ®åº“</a></p>
<p><a href="http://www.zzbaike.com/wiki/CentOS/%E4%BD%BF%E7%94%A8tar%E5%A4%87%E4%BB%BD" target="_blank" rel="external">tarå¤‡ä»½</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="u514D_u5BC6_u7801_u767B_u9646"><a href="#u514D_u5BC6_u7801_u767B_u9646" class="headerlink" title="å…å¯†ç ç™»é™†"></a>å…å¯†ç ç™»é™†</h3><p>é»˜è®¤ä½¿ç”¨~/.my.cnf</p>
<pre><code>$ vim ~/.my.cnf
[client]
password=your_pass
user=your_user
$ chmod 400 ~/.my.cnf
</code></pre><p>ä¹Ÿå¯ä»¥æŒ‡å®šç‰¹å®šæ–‡ä»¶</p>
<pre><code>$ mysql --defaults-file=/home/imlonghao/mysql-opts
</code></pre><h3 id="mysql__u5907_u4EFD"><a href="#mysql__u5907_u4EFD" class="headerlink" title="mysql å¤‡ä»½"></a>mysql å¤‡ä»½</h3><p>åˆ›å»ºå¤‡ä»½ç”¨æˆ·</p>
<pre><code># åˆ›å»ºä¸€ä¸ªåªå…è®¸æœ¬åœ°ç™»å½•çš„backupç”¨æˆ·ï¼Œå¯†ç ä¸º12345ã€‚
CREATE USER &apos;backup&apos;@&apos;localhost&apos; IDENTIFIED BY &apos;12345&apos;; 

# å¢åŠ EVENT,LOCK TABLES,SELECT,SHOW DATABASESç­‰æƒé™ï¼Œè¿™æ˜¯MySQLå®˜æ–¹å·¥å…·å»ºè®®çš„BackupAdminè§’è‰²åº”è¯¥æ‹¥æœ‰çš„æƒé™ã€‚
GRANT EVENT,LOCK TABLES,SELECT,SHOW DATABASES ON  *.* TO &apos;backup&apos;@&apos;localhost&apos; ;

# åˆ·æ–°æƒé™ï¼Œä½¿åˆšæ·»åŠ çš„ç”¨æˆ·ç”Ÿæ•ˆã€‚
FLUSH PRIVILEGES;
</code></pre><p>åˆ›å»ºå¤‡ä»½ç›®å½•</p>
<pre><code>$ mkdir -p /data/backup/shell
$ mkdir /data/backup//mysql
$ cd /data/backup/shell
</code></pre><p>å¤‡ä»½è„šæœ¬</p>
<pre><code>$ vim mysql_backup.sh

#!/bin/bash


# å¤‡ä»½
DB=bid
MYSQL_PATH=/opt/mysql/bin/
BACKUP_DIR=/data/backup/mysql/
USER=backup
PASSWD=backup123
$MYSQL_PATH/mysqldump -hlocalhost -u$USER -p$PASSWD $DB  &gt; $BACKUP_DIR/$DB$(date -d &quot;today&quot; +&quot;%Y%m%d_%H%M%S&quot;).sql.gz 2&gt;&gt; /tmp/backup.err

if [ $? -eq 0 ]; then
    echo `date  +&quot;%Y-%m-%d %H:%M:%S&quot;`&quot;  mysql backup succeeded!&quot; &gt;&gt; /var/log/cron
else
    echo `date  +&quot;%Y-%m-%d %H:%M:%S&quot;`&quot;  mysql backup failed!&quot; &gt;&gt; /var/log/cron
fi


# åˆ é™¤10å¤©å‰çš„å¤‡ä»½æ–‡ä»¶
find $BACKUP_DIR -mtime +10 -name &quot;*.sql&quot; -type f -exec rm -rf {} \;
</code></pre><p>ä¿®æ”¹ä¸€ä¸‹è„šæœ¬æƒé™</p>
<pre><code>$ chmod 700 mysql_backup.sh
</code></pre><p>ç¼–è¾‘ crontab</p>
<pre><code>$ crontab -e
0 */2 * * * sh /data/backup/shell/mysql_backup.sh
</code></pre>]]>
    
    </summary>
    
      <category term="mysql" scheme="http://yoursite.com/tags/mysql/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[macç¯å¢ƒ]]></title>
    <link href="http://yoursite.com/2016/03/25/mac%E7%8E%AF%E5%A2%83/"/>
    <id>http://yoursite.com/2016/03/25/macç¯å¢ƒ/</id>
    <published>2016-03-25T03:02:48.000Z</published>
    <updated>2016-04-08T02:54:41.000Z</updated>
    <content type="html"><![CDATA[<h3 id="u5B89_u88C5_svn"><a href="#u5B89_u88C5_svn" class="headerlink" title="å®‰è£… svn"></a>å®‰è£… svn</h3><p>mac æœ¬èº«è‡ªå¸¦äº† svn, åªæ˜¯ç‰ˆæœ¬è¿‡æ—§, ç”¨ brew å®‰è£…æ–°ç‰ˆçš„</p>
<pre><code>brew install subversion
</code></pre><p>æ–°å¼€ä¸€ä¸ªçª—å£</p>
<pre><code>svn --version
svn, version 1.9.3 (r1718519)
</code></pre><h3 id="u5404_u79CD_u5E94_u7528_u8F6F_u4EF6"><a href="#u5404_u79CD_u5E94_u7528_u8F6F_u4EF6" class="headerlink" title="å„ç§åº”ç”¨è½¯ä»¶"></a>å„ç§åº”ç”¨è½¯ä»¶</h3><p>Filezilla</p>
<p>Potplayer</p>
<p>å¥‡å¦™æ¸…å•</p>
<p>Mou</p>
<p>Sequal Pro</p>
<p>MySQLWorkbench</p>
<p>Alfred 2</p>
<h3 id="u5B89_u88C5_u7834_u89E3_Bartender"><a href="#u5B89_u88C5_u7834_u89E3_Bartender" class="headerlink" title="å®‰è£…ç ´è§£ Bartender"></a>å®‰è£…ç ´è§£ Bartender</h3><p><a href="http://xclient.info/s/bartender.html" target="_blank" rel="external">å®‰è£…ç ´è§£ Bartender</a></p>
<p><img src="http://7xpsj5.com1.z0.glb.clouddn.com/Bartender2_patch.png" alt=""></p>
<p><img src="http://7xpsj5.com1.z0.glb.clouddn.com/Bartender2_generate.png" alt=""></p>
<h3 id="u7EC8_u7AEF_u63D0_u793A_u7B26_2C__u52A0_u5165_-bashrc"><a href="#u7EC8_u7AEF_u63D0_u793A_u7B26_2C__u52A0_u5165_-bashrc" class="headerlink" title="ç»ˆç«¯æç¤ºç¬¦, åŠ å…¥ .bashrc"></a>ç»ˆç«¯æç¤ºç¬¦, åŠ å…¥ .bashrc</h3><pre><code>export  PROMPT=&apos;${ret_status}%{$fg_bold[green]%}%p %{$fg[cyan]%}%d %{$fg_bold[blue]%}$(git_prompt_info)%{$fg_bold[blue]%}% $ %{$reset_color%}&apos;
</code></pre>]]></content>
    <summary type="html">
    <![CDATA[<h3 id="u5B89_u88C5_svn"><a href="#u5B89_u88C5_svn" class="headerlink" title="å®‰è£… svn"></a>å®‰è£… svn</h3><p>mac æœ¬èº«è‡ªå¸¦äº† svn, åªæ˜¯ç‰ˆæœ¬è¿‡æ—§, ç”¨ brew å®‰è£…æ–°ç‰ˆçš„<]]>
    </summary>
    
      <category term="os x" scheme="http://yoursite.com/tags/os-x/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[nginx rewrite]]></title>
    <link href="http://yoursite.com/2016/03/25/nginx-rewrite/"/>
    <id>http://yoursite.com/2016/03/25/nginx-rewrite/</id>
    <published>2016-03-25T02:34:06.000Z</published>
    <updated>2016-04-09T07:19:35.000Z</updated>
    <content type="html"><![CDATA[<h3 id="u7F51_u5740_u8DF3_u8F6C"><a href="#u7F51_u5740_u8DF3_u8F6C" class="headerlink" title="ç½‘å€è·³è½¬"></a>ç½‘å€è·³è½¬</h3><figure class="highlight nginx"><table><tr><td class="code"><pre><span class="line"><span class="title">server</span> &#123;</span><br><span class="line">	<span class="title">listen</span>       <span class="number">80</span>;</span><br><span class="line">	<span class="title">server_name</span>  www.<span class="number">123</span>.cn <span class="number">123</span>.cn;</span><br><span class="line">	<span class="title">access_log</span> <span class="built_in">off</span>;</span><br><span class="line">	<span class="title">rewrite</span><span class="regexp"> ^/(.*)$</span> <span class="url">http://www.123.com/<span class="variable">$1</span></span> <span class="built_in">permanent</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é…ç½®ç”Ÿæ•ˆå, ç”¨curlæŸ¥çœ‹ä¸€ä¸‹</p>
<pre><code>$ curl -I www.123.cn
HTTP/1.1 301 Moved Permanently
Server: nginx/1.8.1
Date: Fri, 25 Mar 2016 02:38:44 GMT
Content-Type: text/html
Content-Length: 184
Connection: keep-alive
Location: http://www.123.com/
</code></pre>]]></content>
    <summary type="html">
    <![CDATA[<h3 id="u7F51_u5740_u8DF3_u8F6C"><a href="#u7F51_u5740_u8DF3_u8F6C" class="headerlink" title="ç½‘å€è·³è½¬"></a>ç½‘å€è·³è½¬</h3><figure class="highlight ng]]>
    </summary>
    
      <category term="nginx" scheme="http://yoursite.com/tags/nginx/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[svnä½¿ç”¨éšè®°]]></title>
    <link href="http://yoursite.com/2016/03/24/svn%E4%BD%BF%E7%94%A8%E9%9A%8F%E8%AE%B0/"/>
    <id>http://yoursite.com/2016/03/24/svnä½¿ç”¨éšè®°/</id>
    <published>2016-03-24T01:44:46.000Z</published>
    <updated>2016-04-11T02:51:38.000Z</updated>
    <content type="html"><![CDATA[<h3 id="u521B_u5EFA_u4ED3_u5E93"><a href="#u521B_u5EFA_u4ED3_u5E93" class="headerlink" title="åˆ›å»ºä»“åº“"></a>åˆ›å»ºä»“åº“</h3><pre><code>svnadmin create /data/svndata/winne  # winneä¸ºç‰ˆæœ¬åº“åç§°
</code></pre><h3 id="u6DFB_u52A0_u8D26_u6237"><a href="#u6DFB_u52A0_u8D26_u6237" class="headerlink" title="æ·»åŠ è´¦æˆ·"></a>æ·»åŠ è´¦æˆ·</h3><pre><code>cd /data/svndata/winne/conf
</code></pre><p>ç¼–è¾‘ <code>authz</code> æ–‡ä»¶, ç”¨æˆ·æƒé™</p>
<pre><code>[groups]
admin = bill,ada   
[/]
@admin = rw
[svndata:/document]
@admin     = rw
</code></pre><p>ç¼–è¾‘ <code>passwd</code> æ–‡ä»¶, ç”¨æˆ·çš„å¯†ç </p>
<pre><code>[users]
ada = ada
bill = 123123123123
</code></pre><p>ç¼–è¾‘<code>svnserve.conf</code> , ç¡®ä¿æœ‰ä»¥ä¸‹é…ç½®</p>
<pre><code>[general]
auno-access = none
auth-access = write
password-db = passwd
authz-db = authz
</code></pre><a id="more"></a>
<h3 id="u91CD_u542F_u751F_u6548"><a href="#u91CD_u542F_u751F_u6548" class="headerlink" title="é‡å¯ç”Ÿæ•ˆ"></a>é‡å¯ç”Ÿæ•ˆ</h3><p>å…ˆ kill, ç„¶å</p>
<pre><code>svnserve -d -r /data/svndata/
</code></pre><h3 id="u5C3D_u91CF_u91CD_u547D_u540D_2C__u4E0D_u8981_rm_-rf"><a href="#u5C3D_u91CF_u91CD_u547D_u540D_2C__u4E0D_u8981_rm_-rf" class="headerlink" title="å°½é‡é‡å‘½å, ä¸è¦ rm -rf"></a>å°½é‡é‡å‘½å, ä¸è¦ rm -rf</h3><h3 id="u5907_u4EFD"><a href="#u5907_u4EFD" class="headerlink" title="å¤‡ä»½"></a>å¤‡ä»½</h3><p>å¤‡ä»½è„šæœ¬:</p>
<figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="shebang">#!/bin/bash</span><br><span class="line"></span></span><br><span class="line"><span class="keyword">if</span> [ <span class="variable">$#</span> != <span class="number">3</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"usage: svn-backup ['full'|'part'] [svn root] [backup dir root]"</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="string">"example 1: svn-backup full /opt/svn-repos /opt/svn-backup"</span></span><br><span class="line">    <span class="built_in">exit</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">mode=<span class="variable">$1</span></span><br><span class="line">svn_root=<span class="variable">$2</span></span><br><span class="line">backup_root=<span class="variable">$3</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">for</span> project <span class="keyword">in</span> `ls -F <span class="variable">$svn_root</span> | grep /$ | sed <span class="string">'s/\///g'</span>`</span><br><span class="line"><span class="keyword">do</span></span><br><span class="line">    project_dir=<span class="string">"<span class="variable">$svn_root</span>/<span class="variable">$project</span>"</span></span><br><span class="line">    backup_dir=<span class="string">"<span class="variable">$backup_root</span>/<span class="variable">$project</span>"</span></span><br><span class="line">    backup_info=<span class="string">"<span class="variable">$project_dir</span>/backup_info"</span></span><br><span class="line">    last_version=`svnlook youngest <span class="variable">$project_dir</span>`</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ ! <span class="operator">-f</span> <span class="variable">$backup_info</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="number">0</span> &gt; <span class="variable">$backup_info</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">    last_backup_version=`cat <span class="variable">$backup_info</span>`</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> [ <span class="variable">$mode</span> != <span class="string">'full'</span> ] &amp;&amp; [ <span class="variable">$last_backup_version</span> == <span class="variable">$last_version</span> ]; <span class="keyword">then</span></span><br><span class="line">        <span class="built_in">echo</span> <span class="string">"`date +"</span>%F %R:%S<span class="string">"`  '<span class="variable">$project</span>' nothing to do"</span></span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">if</span> [ <span class="variable">$mode</span> == <span class="string">'full'</span> ] || [ <span class="variable">$last_backup_version</span> == <span class="string">'0'</span> ] || [ ! <span class="operator">-d</span> <span class="variable">$backup_dir</span> ]; <span class="keyword">then</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"`date +"</span>%F %R:%S<span class="string">"`  '<span class="variable">$project</span>' full backup"</span></span><br><span class="line">            rm -rf <span class="variable">$backup_dir</span></span><br><span class="line">            svnadmin hotcopy <span class="variable">$project_dir</span> <span class="variable">$backup_dir</span></span><br><span class="line">            last_version=`svnlook youngest <span class="variable">$backup_dir</span>`</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="built_in">echo</span> <span class="string">"`date +"</span>%F %R:%S<span class="string">"`  '<span class="variable">$project</span>' version <span class="variable">$last_backup_version</span> to <span class="variable">$last_version</span>"</span></span><br><span class="line">            backup_file=<span class="string">"<span class="variable">$backup_dir</span>/v<span class="variable">$last_backup_version</span>-<span class="variable">$last_version</span>.bk"</span></span><br><span class="line">            svnadmin dump --incremental -q -r <span class="variable">$last_backup_version</span>:<span class="variable">$last_version</span> <span class="variable">$project_dir</span> &gt; <span class="variable">$backup_file</span></span><br><span class="line">        <span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">        <span class="built_in">echo</span> <span class="variable">$last_version</span> &gt; <span class="variable">$backup_info</span></span><br><span class="line">    <span class="keyword">fi</span></span><br><span class="line"><span class="keyword">done</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"`date +"</span>%F %R:%S<span class="string">"`  done"</span></span><br></pre></td></tr></table></figure>
<p>é…ç½® crontab:</p>
<pre><code>### æ¯å¤©å‡Œæ™¨4ç‚¹è¿›è¡Œsvnå…¨å¤‡ä»½
0 4 * * * sh /data/backup/shell/svn_backup.sh full /data/svndata/ /data/backup/svn/
</code></pre><p>### </p>
<h3 id="u5BA2_u6237_u7AEF_u7684_u4F7F_u7528"><a href="#u5BA2_u6237_u7AEF_u7684_u4F7F_u7528" class="headerlink" title="å®¢æˆ·ç«¯çš„ä½¿ç”¨"></a>å®¢æˆ·ç«¯çš„ä½¿ç”¨</h3><p>æˆ‘çš„æ˜¯ mac os çš„, å…ˆç”¨å‘½ä»¤è¡Œå§â€¦ , windows ä¸Šé¢æœ‰ä¹Œé¾Ÿçš„é‚£ä¸ªå®¢æˆ·ç«¯, è²Œä¼¼å®‰è£…äº†ä¹‹åå¤§å¤šæ“ä½œæ˜¯é€šè¿‡å³é”®ç‚¹ç‚¹ç‚¹æ¥è¿›è¡Œ</p>
<h4 id="u521D_u59CB_u5316_u5BFC_u5165"><a href="#u521D_u59CB_u5316_u5BFC_u5165" class="headerlink" title="åˆå§‹åŒ–å¯¼å…¥"></a>åˆå§‹åŒ–å¯¼å…¥</h4><pre><code>$ svn import ~/Documents/eg/svn/svnhook svn://localhost/testhook --username hooktest --password hooktest -m &quot;åˆå§‹åŒ–å¯¼å…¥&quot;
Adding         test1
Committing transaction...
Committed revision 1.
</code></pre><h4 id="u4E0B_u8F7D"><a href="#u4E0B_u8F7D" class="headerlink" title="ä¸‹è½½"></a>ä¸‹è½½</h4><pre><code>âœ /Users/cristaly7/Documents/svn $ svn checkout svn://120.76.27.38/document --username ksdfhs --password 123456
</code></pre><h4 id="u6DFB_u52A0_u65B0_u6587_u4EF6"><a href="#u6DFB_u52A0_u65B0_u6587_u4EF6" class="headerlink" title="æ·»åŠ æ–°æ–‡ä»¶"></a>æ·»åŠ æ–°æ–‡ä»¶</h4><pre><code>svn add file
</code></pre><h4 id="u63D0_u4EA4_u66F4_u65B0"><a href="#u63D0_u4EA4_u66F4_u65B0" class="headerlink" title="æäº¤æ›´æ–°"></a>æäº¤æ›´æ–°</h4><pre><code>svn ci file 
</code></pre><h4 id="u5220_u9664_u6587_u4EF6"><a href="#u5220_u9664_u6587_u4EF6" class="headerlink" title="åˆ é™¤æ–‡ä»¶"></a>åˆ é™¤æ–‡ä»¶</h4><pre><code>svn delete file
</code></pre><h3 id="svn_hooks"><a href="#svn_hooks" class="headerlink" title="svn hooks"></a>svn hooks</h3><p>1 åˆ›å»ºä¸€ä¸ªé¡¹ç›®</p>
<pre><code>svnadmin create /data/svndata/testhook
</code></pre><p>2 åˆ›å»ºé¡¹ç›®é’©å­è„šæœ¬</p>
<pre><code>$ cp /data/svndata/testhook/hooks/post-commit.tmpl /data/svndata/testhook/hooks/post-commit
$ chmod u+x /data/svndata/testhook/hooks/post-commit
</code></pre><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">$ cat /data/svndata/testhook/hooks/post-commit</span><br><span class="line"><span class="shebang">#!/bin/sh</span></span><br><span class="line">PATH=/usr/bin/</span><br><span class="line">UPDATE_DIR=/opt/www/svnhook/testhook/</span><br><span class="line"></span><br><span class="line"><span class="comment"># è§¦å‘é’©å­ä¼šä¼ å…¥2ä¸ªå‚æ•°: ä¸€ä¸ªæ˜¯ä»“åº“å, ä¸€ä¸ªæ˜¯ç‰ˆæœ¬å·</span></span><br><span class="line">REPOS=<span class="string">"<span class="variable">$1</span>"</span></span><br><span class="line">REV=<span class="string">"<span class="variable">$2</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># è·å–æäº¤è€…å’Œæäº¤ä¿¡æ¯</span></span><br><span class="line">AUTHOR=$(<span class="variable">$PATH</span>/svnlook author -r <span class="variable">$REV</span> <span class="variable">$REPOS</span>)</span><br><span class="line">MESSAGE=$(<span class="variable">$PATH</span>/svnlook <span class="built_in">log</span> <span class="variable">$REPOS</span> -r <span class="variable">$REV</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># æ›´æ–°æ“ä½œ</span></span><br><span class="line"><span class="variable">$PATH</span>/svn update --username=svnhook --password=svnhook4rfv --no-auth-cache --non-interactive <span class="variable">$UPDATE_DIR</span> <span class="number">2</span>&gt;&gt; /tmp/svnhook_error.log</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> [ $? == <span class="number">0</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"`date +"</span>%F %R:%S<span class="string">"` author: <span class="variable">$AUTHOR</span>  update <span class="variable">$REPOS</span> version: <span class="variable">$REV</span> message: <span class="variable">$MESSAGE</span>"</span> &gt;&gt; /tmp/svnhook.log</span><br><span class="line"><span class="keyword">fi</span></span><br></pre></td></tr></table></figure>
<p>3 ä¸ºtesthookä»“åº“æ·»åŠ ä¸€ä¸ªåªè¯»ç”¨æˆ·,ç”¨äºæ›´æ–°ç›®æ ‡ä»“åº“:</p>
<pre><code>$ cd /data/svndata/testhook/conf

$ grep -Ev &quot;(^$|^#)&quot; authz
[groups]
hook = svnhook


[/]
@hook = r

[svndata:/test]
@hook = r


$ grep -Ev &quot;(^$|^#)&quot; passwd
[users]
svnhook = svnhook


$ grep -Ev &quot;(^$|^#)&quot; svnserve.conf
[general]
anon-access = none
auth-access = write
password-db = passwd
authz-db = authz
[sasl]
</code></pre><p>4 é‡å¯ svn, ä½¿é…ç½®ç”Ÿæ•ˆ</p>
<p>5 åˆ° nginx ç›®å½•ä¸‹å…ˆ checkout é¡¹ç›®</p>
<pre><code>$ cd /opt/www/svnhook/
$ svn co  svn://localhost/testhook
</code></pre><p>6 æœ¬åœ° checkout ä»“åº“, ä¿®æ”¹æ–‡ä»¶ä¸Šä¼ , çœ‹æ˜¯å¦è§¦å‘é’©å­</p>
<h4 id="u9047_u5230_u7684_u5751"><a href="#u9047_u5230_u7684_u5751" class="headerlink" title="é‡åˆ°çš„å‘"></a>é‡åˆ°çš„å‘</h4><p>æµ‹è¯•ç”¨çš„ä»“åº“æ˜¯æ²¡é—®é¢˜äº†, ä½†æ˜¯åœ¨æ–‡æ¡£ä»“åº“åšè¿™ä¸ªé…ç½®ä¹‹å, å‘ç°ä¸èƒ½å®ç°æ›´æ–°, ä¸€å¼€å§‹ä»¥ä¸ºæ²¡è§¦å‘é’©å­, é¦–å…ˆä»¥ä¸ºæ˜¯<strong>æƒé™é—®é¢˜</strong>, æŠŠ <code>post-commit</code> è„šæœ¬æ”¹æˆäº†777, æŠŠæ›´æ–°ç›®å½•çš„ç”¨æˆ·ä¹ŸæŠ˜è…¾äº†ä¸€ä¸‹, è¿˜æ˜¯ä¸è¡Œ.</p>
<p>åæ¥ä»¥ä¸º<strong>é’©å­æ²¡è§¦å‘</strong>, ä½†æ˜¯åœ¨é’©å­è„šæœ¬ä¸­åŠ å…¥çš„æµ‹è¯•æ—¥å¿—è¡¨æ˜, æ˜¯è§¦å‘äº†é’©å­çš„</p>
<p>äºæ˜¯å°±å»çœ‹<strong>é”™è¯¯æ—¥å¿—</strong>, å‘ç°æœ‰è¿™æ ·çš„æŠ¥é”™:</p>
<pre><code>cat /tmp/svnhook_error.log
Updating &apos;opt/www/svnhook/document&apos;:
svn: E000022: Error converting entry in directory &apos;/opt/www/svnhook/testhook/php&apos; to UTF-8
svn: E000022: Can&apos;t convert string from native encoding to &apos;UTF-8&apos;:
svn: E000022: ?\230?\149?\176?\230?\141?\174?\230?\168?\161?\229?\158?\139
</code></pre><p>åŸæ¥æ˜¯å­—ç¬¦é›†çš„é—®é¢˜, localeçœ‹äº†ä¸€ä¸‹ç³»ç»Ÿçš„, æ˜¯ en_US, ä½†æ˜¯æ–‡ä»¶ä¸­æœ‰ä¸­æ–‡, æ‰€ä»¥å°±æ‰§è¡Œä¸äº† update äº†</p>
<p>è§£å†³æ–¹æ³• â†’ åœ¨è„šæœ¬ä¸­åŠ å…¥:</p>
<pre><code>export LC_ALL=zh_CN.UTF-8
</code></pre><p><strong>æ—¥å¿—å¾ˆé‡è¦!!</strong></p>
<p><strong>æ—¥å¿—å¾ˆé‡è¦!!</strong></p>
<p><strong>æ—¥å¿—å¾ˆé‡è¦!!</strong></p>
<h3 id="u5E38_u7528_u7BA1_u7406_u547D_u4EE4"><a href="#u5E38_u7528_u7BA1_u7406_u547D_u4EE4" class="headerlink" title="å¸¸ç”¨ç®¡ç†å‘½ä»¤"></a>å¸¸ç”¨ç®¡ç†å‘½ä»¤</h3><h4 id="u67E5_u770B_u6240_u6709_u4ED3_u5E93_u7248_u672C_u6570"><a href="#u67E5_u770B_u6240_u6709_u4ED3_u5E93_u7248_u672C_u6570" class="headerlink" title="æŸ¥çœ‹æ‰€æœ‰ä»“åº“ç‰ˆæœ¬æ•°"></a>æŸ¥çœ‹æ‰€æœ‰ä»“åº“ç‰ˆæœ¬æ•°</h4><pre><code>$ for i in `ls -l /data/svndata |awk &apos;/^d/{print $9}&apos;`;do echo $i;svnlook youngest $i ;done
config_app
24
document
7
app
2
Nevermore
2
inner_app
125
outer_app
8
</code></pre><h3 id="u5410_u69FD"><a href="#u5410_u69FD" class="headerlink" title="åæ§½"></a>åæ§½</h3><p>1 ä¸€ä¸ªé¡¹ç›®é‡Œçš„å¤šä¸ªå­é¡¹ç›®å±…ç„¶æ˜¯å¹¶åˆ—åˆ›å»ºåœ¨æ ¹ç›®å½•ä¸‹é¢çš„â€¦ æ­£ç¡®çš„å§¿åŠ¿ä¸åº”è¯¥æ˜¯åˆ›å»ºåœ¨åŒä¸€ä¸ªé¡¹ç›®ç›®å½•æ¯”å¦‚ brunchä¸‹é¢ä¹ˆ, æ¯æ¬¡ checkout brunch å°±èƒ½æŠŠé¡¹ç›®å†…çš„å­é¡¹ç›®éƒ½ä¸‹è½½äº† - -</p>
<p>2 å±…ç„¶æœ‰äººæŠŠä¸€ä¸ª800M çš„è½¯ä»¶ä¸Šä¼  svn â€¦â€¦ å¦‚æœè¿˜æœ‰äººè¿™ä¹ˆæ, æˆ‘å¾—å¼„ä¸ª<code>pre-commit</code>é™åˆ¶ä¸Šä¼ çš„æ–‡ä»¶å¤§å°äº†</p>
<p><a href="http://blog.csdn.net/yuanya/article/details/23271951" target="_blank" rel="external">linuxä¸‹svnå‘½ä»¤å¤§å…¨</a></p>
<p><a href="http://songxj.blog.51cto.com/620981/396113" target="_blank" rel="external">å‚è€ƒ</a></p>
<p><a href="http://blog.csdn.net/pttaag/article/details/8076210" target="_blank" rel="external">SVNçš„æ ‡å‡†ç›®å½•ç»“æ„ï¼štrunkã€branchesã€tags</a></p>
<p><a href="http://spiritfrog.iteye.com/blog/448578" target="_blank" rel="external">svnå¤‡ä»½å’Œè¿˜åŸ</a></p>
<p><a href="https://segmentfault.com/a/1190000000596975" target="_blank" rel="external">Ubuntuä¸‹svnçš„ä½¿ç”¨æ€»ç»“</a></p>
<p><a href="http://www.ha97.com/4467.html" target="_blank" rel="external">CentOS Linuxæ­å»ºSVN Serveré…ç½®è¯¦è§£</a></p>
<p><a href="http://cnbin.github.io/blog/2015/06/13/mac-da-jian-svn-fu-wu-qi-huan-jing/" target="_blank" rel="external">Mac æ­å»º SVN æœåŠ¡å™¨ç¯å¢ƒ</a></p>
<p><a href="http://yangzb.iteye.com/blog/315023" target="_blank" rel="external">svnå¤‡ä»½ç­–ç•¥</a></p>
<p><a href="http://1234n.com/?post/dd00ny" target="_blank" rel="external">æ”¯æŒå®Œæ•´ï¼‹å·®å¼‚ï¼‹å‹ç¼©çš„Subversionå¤‡ä»½è„šæœ¬</a></p>
<p>hook</p>
<p><a href="http://blog.csdn.net/lgm252008/article/details/7026426" target="_blank" rel="external">Linuxä¸‹SVNè‡ªåŠ¨æ›´æ–°web</a></p>
<p><a href="http://www.cnblogs.com/gaohj/p/3154448.html" target="_blank" rel="external">SVN-é’©å­ç¥¥è§£ä¸é…ç½®</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="u521B_u5EFA_u4ED3_u5E93"><a href="#u521B_u5EFA_u4ED3_u5E93" class="headerlink" title="åˆ›å»ºä»“åº“"></a>åˆ›å»ºä»“åº“</h3><pre><code>svnadmin create /data/svndata/winne  # winneä¸ºç‰ˆæœ¬åº“åç§°
</code></pre><h3 id="u6DFB_u52A0_u8D26_u6237"><a href="#u6DFB_u52A0_u8D26_u6237" class="headerlink" title="æ·»åŠ è´¦æˆ·"></a>æ·»åŠ è´¦æˆ·</h3><pre><code>cd /data/svndata/winne/conf
</code></pre><p>ç¼–è¾‘ <code>authz</code> æ–‡ä»¶, ç”¨æˆ·æƒé™</p>
<pre><code>[groups]
admin = bill,ada   
[/]
@admin = rw
[svndata:/document]
@admin     = rw
</code></pre><p>ç¼–è¾‘ <code>passwd</code> æ–‡ä»¶, ç”¨æˆ·çš„å¯†ç </p>
<pre><code>[users]
ada = ada
bill = 123123123123
</code></pre><p>ç¼–è¾‘<code>svnserve.conf</code> , ç¡®ä¿æœ‰ä»¥ä¸‹é…ç½®</p>
<pre><code>[general]
auno-access = none
auth-access = write
password-db = passwd
authz-db = authz
</code></pre>]]>
    
    </summary>
    
      <category term="svn" scheme="http://yoursite.com/tags/svn/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[sedå­¦ä¹ ç¬”è®°]]></title>
    <link href="http://yoursite.com/2016/03/11/sed%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    <id>http://yoursite.com/2016/03/11/sedå­¦ä¹ ç¬”è®°/</id>
    <published>2016-03-11T12:20:04.000Z</published>
    <updated>2016-04-07T12:25:43.000Z</updated>
    <content type="html"><![CDATA[<p>å®šä½è¡Œ â€˜/pattern/â€˜</p>
<p>å®šä½è¡Œå†…åŒ¹é…å˜é‡  â€˜s///3â€™</p>
<p>æ“ä½œ:</p>
<p>ä¿®æ”¹è¡Œå†… s</p>
<h3 id="u5173_u4E8E_u6B63_u5219_u8868_u8FBE_u5F0F"><a href="#u5173_u4E8E_u6B63_u5219_u8868_u8FBE_u5F0F" class="headerlink" title="å…³äºæ­£åˆ™è¡¨è¾¾å¼"></a>å…³äºæ­£åˆ™è¡¨è¾¾å¼</h3><p>æµæ´¾:</p>
<pre><code>æ­£åˆ™è¡¨è¾¾å¼
    |-- PCRE
    `-- POSIX
        |-- BRE
        |   |-- grep
        |   |-- sed
        |   `-- vi
        `-- ERE
            |-- awk
            `-- egrep
</code></pre><p>æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€:</p>
<pre><code>^ è¡¨ç¤ºä¸€è¡Œçš„å¼€å¤´ã€‚å¦‚ï¼š/^#/ ä»¥#å¼€å¤´çš„åŒ¹é…ã€‚
$ è¡¨ç¤ºä¸€è¡Œçš„ç»“å°¾ã€‚å¦‚ï¼š/}$/ ä»¥}ç»“å°¾çš„åŒ¹é…ã€‚
\&lt; è¡¨ç¤ºè¯é¦–ã€‚ å¦‚ \&lt;abc è¡¨ç¤ºä»¥ abc ä¸ºé¦–çš„è©ã€‚
\&gt; è¡¨ç¤ºè¯å°¾ã€‚ å¦‚ abc\&gt; è¡¨ç¤ºä»¥ abc çµå°¾çš„è©ã€‚
. è¡¨ç¤ºä»»ä½•å•ä¸ªå­—ç¬¦ã€‚
\* è¡¨ç¤ºæŸä¸ªå­—ç¬¦å‡ºç°äº†0æ¬¡æˆ–å¤šæ¬¡ã€‚
[ ] å­—ç¬¦é›†åˆã€‚ å¦‚ï¼š[abc]è¡¨ç¤ºåŒ¹é…aæˆ–bæˆ–cï¼Œè¿˜æœ‰[a-zA-Z]è¡¨ç¤ºåŒ¹é…æ‰€æœ‰çš„26ä¸ªå­—ç¬¦ã€‚å¦‚æœå…¶ä¸­æœ‰^è¡¨ç¤ºåï¼Œå¦‚[^a]è¡¨ç¤ºéaçš„å­—ç¬¦
</code></pre><a id="more"></a>
<h3 id="Hold_Space__u7F13_u51B2_u533A"><a href="#Hold_Space__u7F13_u51B2_u533A" class="headerlink" title="Hold Space ç¼“å†²åŒº"></a>Hold Space ç¼“å†²åŒº</h3><p>Pattern Space å°±æ˜¯å½“å‰è¯»å…¥è¡Œ</p>
<pre><code>gï¼š å°†hold spaceä¸­çš„å†…å®¹æ‹·è´åˆ°pattern spaceä¸­ï¼ŒåŸæ¥pattern spaceé‡Œçš„å†…å®¹æ¸…é™¤
Gï¼š å°†hold spaceä¸­çš„å†…å®¹appendåˆ°pattern space\nå
hï¼š å°†pattern spaceä¸­çš„å†…å®¹æ‹·è´åˆ°hold spaceä¸­ï¼ŒåŸæ¥çš„hold spaceé‡Œçš„å†…å®¹è¢«æ¸…é™¤
Hï¼š å°†pattern spaceä¸­çš„å†…å®¹appendåˆ°hold space\nå
xï¼š äº¤æ¢pattern spaceå’Œhold spaceçš„å†…å®¹
</code></pre><p>g( go, èµ°ä½  ) ç±»ä¼¼äº cat <code>hold space</code> &gt; <code>pattern space</code></p>
<p>G( å¤§ç‹—, è¿½åŠ  ) ç±»ä¼¼äº cat <code>hold space</code> &gt;&gt; <code>pattern space</code></p>
<p>h( è·Ÿgç›¸å ),  cat <code>pattern space</code> &gt; <code>hold space</code></p>
<p>H ( è·ŸGç›¸å ), ç±»ä¼¼äº <code>pattern space</code> cat  &gt;&gt; <code>hold space</code></p>
<h3 id="u5B9E_u4F8B"><a href="#u5B9E_u4F8B" class="headerlink" title="å®ä¾‹"></a>å®ä¾‹</h3><p>1.åŒ¹é…ä»¥500ç»“å°¾çš„å·¥èµ„(BREæ­£åˆ™è¦è½¬ä¹‰)</p>
<pre><code>root@Ubuntu:~/awkpractice# sed -n &quot;/:[0-9]+500$/p&quot; datafile
root@Ubuntu:~/awkpractice# sed -n &quot;/:[0-9]\+500$/p&quot; datafile
Paco Gutierrez:835-365-1284:454 Easy Street, Decatur, IL 75732:2/28/53:123500
Barbara Kertz:385-573-8326:832 Ponce Drive, Gary, IN 83756:12/1/46:268500
William Kopf:846-836-2837:6937 Ware Road, Milton, PA 93756:9/21/46:43500
Sir Lancelot:837-835-8257:474 Camelot Boulevard, Bath, WY 28356:5/13/69:24500
Zippy Pinhead:834-823-8319:2356 Bizarro Ave., Farmount, IL 84357:1/1/67:89500
</code></pre><p>2.å§“åäº¤æ¢ä½ç½®â€“åœ†æ‹¬å·çš„ä½¿ç”¨</p>
<pre><code>root@Ubuntu:~/awkpractice# sed  &apos;s/\(^[a-zA-Z]\+\)\ \([a-zA-Z]\+\):\(.*\)/\2 \1:\3/&apos; datafile
Corder Norma:397-857-2735:74 Pine Street, Dearborn, MI 23874:3/28/45:245700
Cowan Jennifer:548-834-2348:583 Laurel Ave., Kingsville, TX 83745:10/1/35:58900
DeLoach Jon:408-253-3122:123 Park St., San Jose, CA 04086:7/25/53:85100
Evich Karen:284-758-2857:23 Edgecliff Place, Lincoln, NB 92086:7/25/53:85100
Evich Karen:284-758-2867:23 Edgecliff Place, Lincoln, NB 92743:11/3/35:58200
</code></pre><p>3.æŠŠ port çš„æ•°å­—å¡«åˆ° zoneidé‡Œå» (ä½¿ç”¨ ERE æ¨¡å¼çš„ sed)</p>
<figure class="highlight vhdl"><table><tr><td class="code"><pre><span class="line">root@Ubuntu:~/awkpractice# cat gamefile</span><br><span class="line">&lt;server name=<span class="string">"92æœ"</span>  <span class="keyword">port</span>=<span class="string">"10092"</span> os=<span class="string">"android"</span>  hidden=<span class="string">"false"</span> recommendrate=<span class="string">"0"</span> newport=<span class="string">""</span> zoneid=<span class="string">""</span> tabname=<span class="string">"åœ°åŒºæœ"</span>/&gt;</span><br><span class="line">&lt;server name=<span class="string">"93æœ"</span>  <span class="keyword">port</span>=<span class="string">"10093"</span> os=<span class="string">"android"</span>  hidden=<span class="string">"false"</span> recommendrate=<span class="string">"0"</span> newport=<span class="string">""</span> zoneid=<span class="string">""</span> tabname=<span class="string">"åœ°åŒºæœ"</span>/&gt;</span><br><span class="line">&lt;server name=<span class="string">"94æœ"</span>  <span class="keyword">port</span>=<span class="string">"10094"</span> os=<span class="string">"android"</span>  hidden=<span class="string">"false"</span> recommendrate=<span class="string">"0"</span> newport=<span class="string">""</span> zoneid=<span class="string">""</span> tabname=<span class="string">"åœ°åŒºæœ"</span>/&gt;</span><br><span class="line">&lt;server name=<span class="string">"95æœ"</span>  <span class="keyword">port</span>=<span class="string">"10095"</span> os=<span class="string">"android"</span>  hidden=<span class="string">"false"</span> recommendrate=<span class="string">"0"</span> newport=<span class="string">""</span> zoneid=<span class="string">""</span> tabname=<span class="string">"åœ°åŒºæœ"</span>/&gt;</span><br><span class="line">&lt;server name=<span class="string">"96æœ"</span>  <span class="keyword">port</span>=<span class="string">"10096"</span> os=<span class="string">"android"</span>  hidden=<span class="string">"false"</span> recommendrate=<span class="string">"0"</span> newport=<span class="string">""</span> zoneid=<span class="string">""</span> tabname=<span class="string">"åœ°åŒºæœ"</span>/&gt;</span><br><span class="line">root@Ubuntu:~/awkpractice# sed -r <span class="attribute">'s</span>/(.*<span class="keyword">port</span>=<span class="string">")([0-9]+)("</span>.*zoneid=<span class="string">")("</span>.*$)/\<span class="number">1</span>\<span class="number">2</span>\<span class="number">3</span>\<span class="number">2</span>\<span class="number">4</span>/' gamefile</span><br><span class="line">&lt;server name=<span class="string">"92æœ"</span>  <span class="keyword">port</span>=<span class="string">"10092"</span> os=<span class="string">"android"</span>  hidden=<span class="string">"false"</span> recommendrate=<span class="string">"0"</span> newport=<span class="string">""</span> zoneid=<span class="string">"10092"</span> tabname=<span class="string">"åœ°åŒºæœ"</span>/&gt;</span><br><span class="line">&lt;server name=<span class="string">"93æœ"</span>  <span class="keyword">port</span>=<span class="string">"10093"</span> os=<span class="string">"android"</span>  hidden=<span class="string">"false"</span> recommendrate=<span class="string">"0"</span> newport=<span class="string">""</span> zoneid=<span class="string">"10093"</span> tabname=<span class="string">"åœ°åŒºæœ"</span>/&gt;</span><br><span class="line">&lt;server name=<span class="string">"94æœ"</span>  <span class="keyword">port</span>=<span class="string">"10094"</span> os=<span class="string">"android"</span>  hidden=<span class="string">"false"</span> recommendrate=<span class="string">"0"</span> newport=<span class="string">""</span> zoneid=<span class="string">"10094"</span> tabname=<span class="string">"åœ°åŒºæœ"</span>/&gt;</span><br><span class="line">&lt;server name=<span class="string">"95æœ"</span>  <span class="keyword">port</span>=<span class="string">"10095"</span> os=<span class="string">"android"</span>  hidden=<span class="string">"false"</span> recommendrate=<span class="string">"0"</span> newport=<span class="string">""</span> zoneid=<span class="string">"10095"</span> tabname=<span class="string">"åœ°åŒºæœ"</span>/&gt;</span><br><span class="line">&lt;server name=<span class="string">"96æœ"</span>  <span class="keyword">port</span>=<span class="string">"10096"</span> os=<span class="string">"android"</span>  hidden=<span class="string">"false"</span> recommendrate=<span class="string">"0"</span> newport=<span class="string">""</span> zoneid=<span class="string">"10096"</span> tabname=<span class="string">"åœ°åŒºæœ"</span>/&gt;</span><br></pre></td></tr></table></figure>
<p>sedé»˜è®¤æ˜¯BREï¼ŒåŠ ä¸Š-rå‚æ•°åå˜æˆERE</p>
<p>4.<a href="http://bbs.chinaunix.net/thread-4241283-1-1.html" target="_blank" rel="external">å…³äºsedä¸­çš„\1\2\3èƒ½å¦èµ‹å€¼ç»™å˜é‡</a></p>
<p>æ„Ÿè°¢:</p>
<p><a href="http://coolshell.cn/articles/9104.html" target="_blank" rel="external">sed ç®€æ˜æ•™ç¨‹</a></p>
<p><a href="http://www.infoq.com/cn/news/2011/07/regular-expressions-6-POSIX" target="_blank" rel="external">Linux/Unixå·¥å…·ä¸æ­£åˆ™è¡¨è¾¾å¼çš„POSIXè§„èŒƒ</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<p>å®šä½è¡Œ â€˜/pattern/â€˜</p>
<p>å®šä½è¡Œå†…åŒ¹é…å˜é‡  â€˜s///3â€™</p>
<p>æ“ä½œ:</p>
<p>ä¿®æ”¹è¡Œå†… s</p>
<h3 id="u5173_u4E8E_u6B63_u5219_u8868_u8FBE_u5F0F"><a href="#u5173_u4E8E_u6B63_u5219_u8868_u8FBE_u5F0F" class="headerlink" title="å…³äºæ­£åˆ™è¡¨è¾¾å¼"></a>å…³äºæ­£åˆ™è¡¨è¾¾å¼</h3><p>æµæ´¾:</p>
<pre><code>æ­£åˆ™è¡¨è¾¾å¼
    |-- PCRE
    `-- POSIX
        |-- BRE
        |   |-- grep
        |   |-- sed
        |   `-- vi
        `-- ERE
            |-- awk
            `-- egrep
</code></pre><p>æ­£åˆ™è¡¨è¾¾å¼åŸºç¡€:</p>
<pre><code>^ è¡¨ç¤ºä¸€è¡Œçš„å¼€å¤´ã€‚å¦‚ï¼š/^#/ ä»¥#å¼€å¤´çš„åŒ¹é…ã€‚
$ è¡¨ç¤ºä¸€è¡Œçš„ç»“å°¾ã€‚å¦‚ï¼š/}$/ ä»¥}ç»“å°¾çš„åŒ¹é…ã€‚
\&lt; è¡¨ç¤ºè¯é¦–ã€‚ å¦‚ \&lt;abc è¡¨ç¤ºä»¥ abc ä¸ºé¦–çš„è©ã€‚
\&gt; è¡¨ç¤ºè¯å°¾ã€‚ å¦‚ abc\&gt; è¡¨ç¤ºä»¥ abc çµå°¾çš„è©ã€‚
. è¡¨ç¤ºä»»ä½•å•ä¸ªå­—ç¬¦ã€‚
\* è¡¨ç¤ºæŸä¸ªå­—ç¬¦å‡ºç°äº†0æ¬¡æˆ–å¤šæ¬¡ã€‚
[ ] å­—ç¬¦é›†åˆã€‚ å¦‚ï¼š[abc]è¡¨ç¤ºåŒ¹é…aæˆ–bæˆ–cï¼Œè¿˜æœ‰[a-zA-Z]è¡¨ç¤ºåŒ¹é…æ‰€æœ‰çš„26ä¸ªå­—ç¬¦ã€‚å¦‚æœå…¶ä¸­æœ‰^è¡¨ç¤ºåï¼Œå¦‚[^a]è¡¨ç¤ºéaçš„å­—ç¬¦
</code></pre>]]>
    
    </summary>
    
      <category term="sed" scheme="http://yoursite.com/tags/sed/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[awkå­¦ä¹ ç¬”è®°(ä¸€)]]></title>
    <link href="http://yoursite.com/2016/03/08/awk%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-%E4%B8%80/"/>
    <id>http://yoursite.com/2016/03/08/awkå­¦ä¹ ç¬”è®°-ä¸€/</id>
    <published>2016-03-08T01:18:04.000Z</published>
    <updated>2016-04-07T12:26:02.000Z</updated>
    <content type="html"><![CDATA[<h3 id="u8BED_u6CD5"><a href="#u8BED_u6CD5" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p>awk â€˜/PATTERN/{action}â€™  <a href="http://ama2000.iteye.com/blog/1304823" target="_blank" rel="external">è¯¦æƒ…å‚è€ƒ</a></p>
<p>else if è¿™ç§ä¸èƒ½æ”¾ pattern, åªèƒ½æ”¾ action</p>
<p>æ¥ç‚¹ä¾‹å­åŠ æ·±å°è±¡:</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line">awk -F, '&#123;<span class="keyword">print</span> <span class="string">""</span>;<span class="keyword">print</span> <span class="label">$2&#125;</span>' OFS=<span class="string">"\t"</span></span><br><span class="line">awk 'BEGIN&#123;FS=<span class="string">":"</span>&#125; &#123;<span class="keyword">if</span>(<span class="label">$6</span> ~ /TIME/ ) <span class="keyword">print</span> <span class="label">$1&#125;</span>'</span><br><span class="line">awk &#123;<span class="keyword">sum</span>+=<span class="label">$5&#125;</span> END &#123;<span class="keyword">print</span> <span class="keyword">sum</span>&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥é©±åŠ¨</p>
<p>åŒ¹é…è¡Œ /xx/</p>
<p>åŒ¹é…å­—æ®µ $6 ~ /xx/</p>
<a id="more"></a>
<h4 id="u5B66_u4E60_u8D44_u6599"><a href="#u5B66_u4E60_u8D44_u6599" class="headerlink" title="å­¦ä¹ èµ„æ–™"></a>å­¦ä¹ èµ„æ–™</h4><p>æ®è¯´çœ‹å®Œ<a href="http://xstarcd.github.io/wiki/shell/awk_oneliner.html" target="_blank" rel="external">awk_oneliner</a>å°±æˆ awk é«˜æ‰‹äº†, çœ‹äº†80%, è‡ªæˆ‘æ„Ÿè§‰ä¸é”™~, å¤§éƒ¨åˆ† awk å­¦ä¹ åšå®¢çš„ä¾‹å­å·²ç»å¯ä»¥è‡ªè¡Œè§£å†³äº†</p>
<h3 id="u7591_u95EE"><a href="#u7591_u95EE" class="headerlink" title="ç–‘é—®"></a>ç–‘é—®</h3><p>1.ä¸‹é¢çš„ä¸ºä½•+å·ä½ç½®ä¸åŒ, å¯¼è‡´ root çš„å†…å­˜å ç”¨ä¹Ÿä¸åŒå‘¢? ä¼¼ä¹ += è¿™ç§æ˜¯æ­£ç¡®çš„å†™æ³•</p>
<figure class="highlight elixir"><table><tr><td class="code"><pre><span class="line">root<span class="variable">@Ubuntu</span><span class="symbol">:~/awkpractice</span><span class="comment"># ps aux |awk 'NR!=1&#123;a[$1]=+$6&#125; END &#123;for (i in a) print i, a[i]"KB"&#125;'</span></span><br><span class="line">privoxy <span class="number">3392</span>KB</span><br><span class="line">message+ <span class="number">2492</span>KB</span><br><span class="line">syslog <span class="number">3872</span>KB</span><br><span class="line">daemon <span class="number">164</span>KB</span><br><span class="line">root <span class="number">6228</span>KB</span><br><span class="line">root<span class="variable">@Ubuntu</span><span class="symbol">:~/awkpractice</span><span class="comment"># ps aux |awk 'NR!=1&#123;a[$1]+=$6&#125; END &#123;for (i in a) print i, a[i]"KB"&#125;'</span></span><br><span class="line">privoxy <span class="number">3392</span>KB</span><br><span class="line">message+ <span class="number">2492</span>KB</span><br><span class="line">syslog <span class="number">3872</span>KB</span><br><span class="line">daemon <span class="number">164</span>KB</span><br><span class="line">root <span class="number">94852</span>KB</span><br></pre></td></tr></table></figure>
<h3 id="u5B9E_u4F8B_3A"><a href="#u5B9E_u4F8B_3A" class="headerlink" title="å®ä¾‹:"></a>å®ä¾‹:</h3><p>1.å»é‡å¤è¡Œ, åŸç†å°±æ˜¯åˆ©ç”¨åˆå§‹æ•°ç»„å˜é‡å€¼ä¸ºé›¶<a href="http://blog.csdn.net/crazyhacking/article/details/12521919" target="_blank" rel="external">å»é‡åŸç†åˆ†æ</a></p>
<pre><code>awk &apos;!a[$0]++&apos; &lt;filename&gt;
</code></pre><p>2.æ˜¾ç¤ºæ‰€æœ‰åªæœ‰å››ä¸ªå­—ç¬¦çš„å</p>
<pre><code>awk  &apos;{if(length($1)==4)  print $1}&apos; datafile
</code></pre><p>3.æ–‡ä»¶åˆå¹¶</p>
<p>æˆ‘æœ‰2ä¸ªæ–‡ä»¶ tmp1.txt å’Œ tmp2.txt</p>
<pre><code>tmp1.txt
20
18
19

tmp2.txt
15
14
13
</code></pre><p>æˆ‘æƒ³åšä¸ªæ–‡ä»¶tmp3.txtåšæˆ</p>
<pre><code>20 15
18 14
19 13
</code></pre><p>æ–¹æ³•ä¸€, ç”¨ paste å‘½ä»¤</p>
<pre><code>paste tmp1.txt tmp2.txt &gt;tmp3.txt
</code></pre><p>æ–¹æ³•äºŒ, ç”¨ FNR å’Œ NR , è¾“å‡º$0 (åˆå¹¶2ä¸ªæ–‡ä»¶æœ‰ç”¨)</p>
<pre><code>awk &apos;NR==FNR{a[NR]=$0} NR&gt;FNR{print a[FNR],$0}&apos; tmp1.txt tmp2.txt | tee tmp3.txt
</code></pre><p>æ–¹æ³•ä¸‰, ä½¿ç”¨æ•°ç»„å­˜å‚¨$1</p>
<pre><code>awk &apos;NR==FNR{a[NR]=$1;count=NR} NR&gt;FNR{b[NR-count]=$1} END{for(i=1;i&lt;=count;i++)print a[i],b[i]}&apos; tmp1.txt tmp2.txt | tee tmp3.txt
</code></pre><p>4.æŠŠä»¥\ç»“æŸçš„è¡ŒåŒä¸‹ä¸€è¡Œç›¸æ¥(sub, getline, nextç”¨æ³•)</p>
<pre><code>awk &apos;/\\$/ { sub(/\\$/,&quot;&quot;); getline t; print $0 t; next }; 1â€²
</code></pre><p>é¦–å…ˆæŸ¥æ‰¾ä»¥\ç»“æŸçš„è¡Œï¼Œå¹¶åˆ é™¤\ã€‚ç„¶ågetlineå‡½æ•°è·å–ä¸‹ä¸€è¡Œçš„å†…å®¹ï¼Œè¾“å‡ºå½“å‰è¡Œï¼ˆå»æ‰äº†\ï¼‰å’Œä¸‹ä¸€è¡Œçš„ç›¸æ¥åçš„å†…å®¹ã€‚å¹¶ç”¨nextè·³è¿‡åé¢çš„1é¿å…é‡å¤è¾“å‡ºã€‚å¦‚æœå½“å‰è¡Œè¡Œæœ«æ²¡æœ‰\ï¼Œä¼šç›´æ¥æ‰§è¡Œ1è¾“å‡ºã€‚</p>
<p>5.åˆå¹¶è¡Œè¾“å‡º(nextåœ¨å¤šè¡Œåˆå¹¶ï¼Œä»¥åŠé€‰æ‹©æ€§è¾“å‡ºæ–¹é¢ï¼Œéå¸¸æ–¹ä¾¿)</p>
<figure class="highlight erlang-repl"><table><tr><td class="code"><pre><span class="line"><span class="function_or_atom">root</span>@<span class="variable">Ubuntu</span>:~/<span class="function_or_atom">awkpractice</span># <span class="function_or_atom">cat</span> <span class="number">6</span>.<span class="function_or_atom">c</span></span><br><span class="line"><span class="function_or_atom">web01</span>[<span class="number">192.168</span>.<span class="number">2.100</span>]</span><br><span class="line"></span><br><span class="line"><span class="function_or_atom">httpd</span>            <span class="ok">ok</span></span><br><span class="line"><span class="function_or_atom">tomcat</span>               <span class="ok">ok</span></span><br><span class="line"><span class="function_or_atom">sendmail</span>               <span class="ok">ok</span></span><br><span class="line"><span class="function_or_atom">web02</span>[<span class="number">192.168</span>.<span class="number">2.101</span>]</span><br><span class="line"><span class="function_or_atom">httpd</span>            <span class="ok">ok</span></span><br><span class="line"><span class="function_or_atom">postfix</span>               <span class="ok">ok</span></span><br><span class="line"><span class="function_or_atom">web03</span>[<span class="number">192.168</span>.<span class="number">2.102</span>]</span><br><span class="line"><span class="function_or_atom">mysqld</span>            <span class="ok">ok</span></span><br><span class="line"><span class="function_or_atom">httpd</span>               <span class="ok">ok</span></span><br><span class="line"><span class="function_or_atom">root</span>@<span class="variable">Ubuntu</span>:~/<span class="function_or_atom">awkpractice</span># <span class="function_or_atom">awk</span> <span class="string">'$1 ~ /web/ &#123;a=$0;next&#125; ; !/^$/ &#123;print a":\t" $0&#125;'</span> <span class="number">6</span>.<span class="function_or_atom">c</span></span><br><span class="line"><span class="function_or_atom">web01</span>[<span class="number">192.168</span>.<span class="number">2.100</span>]:	<span class="function_or_atom">httpd</span>            <span class="ok">ok</span></span><br><span class="line"><span class="function_or_atom">web01</span>[<span class="number">192.168</span>.<span class="number">2.100</span>]:	<span class="function_or_atom">tomcat</span>               <span class="ok">ok</span></span><br><span class="line"><span class="function_or_atom">web01</span>[<span class="number">192.168</span>.<span class="number">2.100</span>]:	<span class="function_or_atom">sendmail</span>               <span class="ok">ok</span></span><br><span class="line"><span class="function_or_atom">web02</span>[<span class="number">192.168</span>.<span class="number">2.101</span>]:	<span class="function_or_atom">httpd</span>            <span class="ok">ok</span></span><br><span class="line"><span class="function_or_atom">web02</span>[<span class="number">192.168</span>.<span class="number">2.101</span>]:	<span class="function_or_atom">postfix</span>               <span class="ok">ok</span></span><br><span class="line"><span class="function_or_atom">web03</span>[<span class="number">192.168</span>.<span class="number">2.102</span>]:	<span class="function_or_atom">mysqld</span>            <span class="ok">ok</span></span><br><span class="line"><span class="function_or_atom">web03</span>[<span class="number">192.168</span>.<span class="number">2.102</span>]:	<span class="function_or_atom">httpd</span>               <span class="ok">ok</span></span><br></pre></td></tr></table></figure>
<p>6.æŠŠæ¯5è¡Œç”¨é€—å·ç›¸è¿</p>
<p>pattern ? pattern : pattern  (ä¸‰ç›®è¿ç®—ç¬¦) æ»¡è¶³è¡¨è¾¾å¼æ¡ä»¶, å°±è¾“å‡º?åé¢çš„, ä¸æ»¡è¶³è¾“å‡º:åé¢çš„</p>
<pre><code>awk &apos;ORS=NR%5?&quot;,&quot;:&quot;\n&quot;&apos;
</code></pre><p>è¿™é‡Œåœ¨æ¯è¡Œè¾“å‡ºå‰ï¼Œå¯¹ORSé‡æ–°è¿›è¡Œå®šä¹‰ï¼Œå¦‚æœè¡Œå·èƒ½è¢«5æ•´é™¤åˆ™ä¸º\nï¼Œå¦åˆ™ä¸ºé€—å·ã€‚ï¼ˆä¹Ÿå¾ˆå¤©ä¹¦çš„ä¸€å¥ï¼‰</p>
<p>7.getline çš„ä¸€äº›ç”¨æ³•</p>
<pre><code>#è¾“å‡ºå¶æ•°è¡Œ, ä¸è·Ÿå˜é‡èµ‹å€¼ç»™$0
seq 10 |awk &apos;{getline;print}&apos;
#è¾“å‡ºå¥‡æ•°è¡Œ
seq 10 |awk &apos;{getline t;print}&apos;
#é…åˆ system , å› ä¸º system(cmd)è¿”å›çš„æ˜¯ cmd çš„è¿”å›å€¼
awk &apos;BEGIN{ while( system(&quot;ls -l&quot;) | getline line ){ print line } }&apos;
</code></pre><p>8.split</p>
<p>The awk function split(s,a,sep) splits a string s into an awk array a using the delimiter sep.</p>
<pre><code>set time = 12:34:56
set hr = `echo $time | awk &apos;{split($0,a,&quot;:&quot; ); print a[1]}&apos;` # = 12
set sec = `echo $time | awk &apos;{split($0,a,&quot;:&quot; ); print a[3]}&apos;` # = 56
# = 12 34 56
set hms = `echo $time | awk &apos;{split($0,a,&quot;:&quot; ); print a[1], a[2], a[3]}&apos;`
</code></pre><p>Q:</p>
<pre><code>name=&quot;76868&amp;5676&amp;435&amp;43526&amp;334&amp;12312312&amp;12321&quot;
awk &apos;BEGIN {print split(&quot;$name&quot;, filearray, &quot;&amp;&quot;)}&apos;
</code></pre><p>ä¸ºä»€ä¹ˆæ˜¯1</p>
<p>è€Œ</p>
<pre><code>awk &apos;BEGIN {print split(&quot;76868&amp;5676&amp;435&amp;43526&amp;334&amp;12312312&amp;12321&quot;, filearray, &quot;&amp;&quot;)}&apos;
</code></pre><p>åˆ™è¿”å›æ­£ç¡®çš„ç»“æœï¼Œåº”è¯¥æ˜¯7ï¼Œæœ‰æ²¡æœ‰äººè§£ç­”ä¸€ä¸‹ï¼Ÿ</p>
<p>A:</p>
<p>å˜é‡å¼•ç”¨é”™è¯¯ï¼Œè¿™æ ·åšè¯•è¯•</p>
<pre><code>awk &apos;BEGIN {print split(&apos;&quot;\&quot;$name\&quot;&quot;&apos;, filearray, &quot;&amp;&quot;)}&apos;
</code></pre><p>awkè§„å®šå¼•ç”¨ç³»ç»Ÿå˜é‡å¿…é¡»ä½¿ç”¨å•å¼•å·åŠ åŒå¼•å·ï¼Œå³â€™â€$sysvarâ€â€˜è¿™æ ·çš„æ ¼å¼ï¼Œä½†æ˜¯splitå‡½æ•°ä¹Ÿéœ€è¦åŒå¼•å·æ¥å®šç•Œï¼Œä½†è¿™ä¸ªåŒå¼•å·åˆä¸èƒ½è®©shè§£é‡Šï¼Œè€Œåº”ç•™ç»™awkæ¥è§£é‡Šï¼Œæ‰€ä»¥ä½¿ç”¨äº†\â€å’Œ\â€ç»„æˆçš„åŒå¼•å·</p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="u8BED_u6CD5"><a href="#u8BED_u6CD5" class="headerlink" title="è¯­æ³•"></a>è¯­æ³•</h3><p>awk â€˜/PATTERN/{action}â€™  <a href="http://ama2000.iteye.com/blog/1304823">è¯¦æƒ…å‚è€ƒ</a></p>
<p>else if è¿™ç§ä¸èƒ½æ”¾ pattern, åªèƒ½æ”¾ action</p>
<p>æ¥ç‚¹ä¾‹å­åŠ æ·±å°è±¡:</p>
<figure class="highlight stata"><table><tr><td class="code"><pre><span class="line">awk -F, '&#123;<span class="keyword">print</span> <span class="string">""</span>;<span class="keyword">print</span> <span class="label">$2&#125;</span>' OFS=<span class="string">"\t"</span></span><br><span class="line">awk 'BEGIN&#123;FS=<span class="string">":"</span>&#125; &#123;<span class="keyword">if</span>(<span class="label">$6</span> ~ /TIME/ ) <span class="keyword">print</span> <span class="label">$1&#125;</span>'</span><br><span class="line">awk &#123;<span class="keyword">sum</span>+=<span class="label">$5&#125;</span> END &#123;<span class="keyword">print</span> <span class="keyword">sum</span>&#125;</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥é©±åŠ¨</p>
<p>åŒ¹é…è¡Œ /xx/</p>
<p>åŒ¹é…å­—æ®µ $6 ~ /xx/</p>]]>
    
    </summary>
    
      <category term="awk" scheme="http://yoursite.com/tags/awk/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[ä¸‰æœˆä»½çš„ç¢ç¢å¿µ]]></title>
    <link href="http://yoursite.com/2016/03/03/%E4%B8%89%E6%9C%88%E4%BB%BD%E7%9A%84%E7%A2%8E%E7%A2%8E%E5%BF%B5/"/>
    <id>http://yoursite.com/2016/03/03/ä¸‰æœˆä»½çš„ç¢ç¢å¿µ/</id>
    <published>2016-03-03T00:57:16.000Z</published>
    <updated>2016-04-07T01:44:33.000Z</updated>
    <content type="html"><![CDATA[<h3 id="2016_u5E743_u67081_u65E5"><a href="#2016_u5E743_u67081_u65E5" class="headerlink" title="2016å¹´3æœˆ1æ—¥"></a>2016å¹´3æœˆ1æ—¥</h3><h3 id="2016_u5E743_u67082_u65E5"><a href="#2016_u5E743_u67082_u65E5" class="headerlink" title="2016å¹´3æœˆ2æ—¥"></a>2016å¹´3æœˆ2æ—¥</h3><p>ç”Ÿæ´»é¡ºå¿ƒçš„ä¸€ä¸ªå…³é”®å­—: æ—©</p>
<h3 id="2016_u5E743_u67083_u65E5"><a href="#2016_u5E743_u67083_u65E5" class="headerlink" title="2016å¹´3æœˆ3æ—¥"></a>2016å¹´3æœˆ3æ—¥</h3><p>åˆ«æŠŠåˆ«äººçœ¼ä¸­çš„è‡ªå·±, çœ‹çš„å¤ªé‡</p>
<h3 id="2016_u5E743_u67084_u65E5"><a href="#2016_u5E743_u67084_u65E5" class="headerlink" title="2016å¹´3æœˆ4æ—¥"></a>2016å¹´3æœˆ4æ—¥</h3><p>ç¬¦å·-æŒ‡é’ˆ-æ„ä¹‰</p>
<p>BGM: è„±ç¼°</p>
<p>æ›¾ç»å¬ä¸æ‡‚çš„æ­Œ, çœ‹ä¸æ˜ç™½çš„æ–‡å­—, ä¼šåœ¨ä½ ç»å†äº†æŸäº›äº‹ä¹‹å, æ˜ç™½å…¶æ„ä¹‰. <strong>ä¸€åˆ‡çš„è¡¨ç°å½¢å¼(æ–‡å­—,éŸ³ä¹ç­‰)éƒ½æ˜¯â€ç¬¦å·â€. ç»å†åˆ™æ˜¯â€æŒ‡é’ˆâ€. ç¬¦å·åªæœ‰ç»è¿‡æŒ‡é’ˆ, æ‰èƒ½æŒ‡åˆ°ä½ äººç”Ÿæ„ä¹‰çš„æ¢¯ç”°ä¸Š</strong>. æ‰€ä»¥, è¯»ä¸‡å·ä¹¦, æ˜¯è·å–ç¬¦å·, è¡Œä¸‡é‡Œè·¯åˆ™æ˜¯å¯»æ‰¾æŒ‡é’ˆ. æ‰€ä»¥æ‰ä¼šæœ‰: çº¸ä¸Šå¾—æ¥ç»ˆè§‰æµ…, ç»çŸ¥æ­¤äº‹è¦èº¬è¡Œ.</p>
<h3 id="2016_u5E743_u67085_u65E5"><a href="#2016_u5E743_u67085_u65E5" class="headerlink" title="2016å¹´3æœˆ5æ—¥"></a>2016å¹´3æœˆ5æ—¥</h3><p>ä¸è¦åšçŸ­åŠè¡°æœŸçš„äº‹æƒ…, è¦åšèƒ½å åŠ æ•ˆç›Šçš„äº‹æƒ…</p>
<p>å‡­ä»€ä¹ˆæˆ‘è¦è¢«æŒ‘é€‰, æˆ‘è¦å»å½“å¯ä»¥æŒ‘é€‰çš„äºº, æ— è®ºæ˜¯æŒ‘äºº, è¿˜æ˜¯æŒ‘ç‰©, æŒ‘çŸ¥è¯†.</p>
<p>æœ‰å¿ƒæ ½èŠ±èŠ±ä¸æˆ, æ— å¿ƒæ’æŸ³æŸ³æˆè«</p>
<p>æ„Ÿæƒ…çš„è„†å¼±æ€§â€“ç«¥è¯ä¸­ä¸¤ä¸ªè´ªå¿ƒçš„äººæŒ–åœ°ä¸‹çš„è´¢å®ï¼Œç»“æœæŒ–å‡ºä¸€ä¸ªäººçš„éª¸éª¨ï¼Œè™½ç„¶è¿…é€ŸåŸ‹ä¸Šäº†ï¼Œç”šè‡³åœ¨ä¸Šé¢ç§äº†æ ‘ï¼Œæ ½äº†èŠ±ï¼Œä½†ä¸¤ä¸ªäººå¿ƒé‡Œéƒ½çŸ¥é“åº•ä¸‹åŸ‹çš„æ˜¯ä»€ä¹ˆã€‚çœ‹è§æ ‘ï¼Œçœ‹è§èŠ±ï¼Œæƒ³çš„å´æ˜¯åœ°ä¸‹çš„é‚£å…·éª¸éª¨ã€‚</p>
<h3 id="2016_u5E743_u67086_u65E5"><a href="#2016_u5E743_u67086_u65E5" class="headerlink" title="2016å¹´3æœˆ6æ—¥"></a>2016å¹´3æœˆ6æ—¥</h3><p>è®¸å¤šäººè¯´è¦å¯¹ç”Ÿå‘½é‡Œé‚£äº›å¯¹è‡ªå·±é€ æˆä¼¤å®³çš„äººå¿ƒå­˜æ„Ÿæ¿€ï¼Œå› ä¸ºä»–ä»¬å¯¹æˆ‘ä»¬çš„æˆé•¿æœ‰å¸®åŠ©ï¼Œä»–ä»¬æ˜¯æˆ‘ä»¬çš„è´µäººã€‚å¯æ˜¯æˆ‘è¦è¯´é‚£å®¶ä¼™å°±æ˜¯è´±äººï¼Œå°±æ˜¯ä¸€ä¸ªè´±äºº.                 â€“by ä¹æŠŠåˆ€</p>
<h3 id="2016_u5E743_u67087_u65E5"><a href="#2016_u5E743_u67087_u65E5" class="headerlink" title="2016å¹´3æœˆ7æ—¥"></a>2016å¹´3æœˆ7æ—¥</h3><p>å¦‚æœä½ æ— æ³•æ‰¿æ‹…å¤±å»ä¸€ä»¶äº‹ç‰©, é‚£ä¹ˆæœ€å¥½ä¸è¦æ‹¥æœ‰å®ƒ.</p>
<p>å½“ä½ åœ¨ç¡è§‰ç©ä¹æ—¶, æƒ³æƒ³åˆ«äººéƒ½åœ¨å¦‚ä½•çš„å¥‹æ–—</p>
<p>äººç”Ÿå°±æ˜¯æ— æ•°ä¸ªå†³å®šç»„æˆçš„, ç¡å‰å¯ä»¥å›å¿†ä¸€ä¸‹è¿™äº›å†³å®šå¸¦ç»™è‡ªå·±çš„å½±å“.</p>
<p>å½¼ä»¥å›½å£«å¾…æˆ‘ï¼Œæˆ‘ä»¥å›½å£«æŠ¥ä¹‹ï¼›å½¼ä»¥ä¼—äººå¾…æˆ‘ï¼Œæˆ‘ä»¥ä¼—äººæŠ¥ä¹‹.  </p>
<p>å‘¨æœ«å®‰åˆ©ä¸€éƒ¨éŸ©å‰§&lt;&lt;æœªç”Ÿ&gt;&gt;. è¿™éƒ¨å‰§â€¦çœŸæ˜¯ä¸€æ”¹æˆ‘å¯¹éŸ©å‰§çš„å°è±¡. &lt;&lt;&gt;&gt;</p>
<h3 id="2016_u5E743_u67088_u65E5"><a href="#2016_u5E743_u67088_u65E5" class="headerlink" title="2016å¹´3æœˆ8æ—¥"></a>2016å¹´3æœˆ8æ—¥</h3><p>æ’å¤§é¢è¯•, ç¾Šå…¥ç‹¼ç¾¤, å¾—å˜å¾—åƒè›‡ä¸€æ ·èªæ•, åƒé¸½å­ä¸€æ ·çº¯æ´.  - -</p>
<h3 id="2016_u5E743_u67089_u65E5"><a href="#2016_u5E743_u67089_u65E5" class="headerlink" title="2016å¹´3æœˆ9æ—¥"></a>2016å¹´3æœˆ9æ—¥</h3><p>å·¥ä½œäº¤æ¥çš„æœ€åŸºæœ¬åŸåˆ™æ˜¯è®©ä»–ä»¬ä¸è¦å†æ‰¾æˆ‘ä»¬äº†</p>
<h3 id="2016_u5E743_u670810_u65E5"><a href="#2016_u5E743_u670810_u65E5" class="headerlink" title="2016å¹´3æœˆ10æ—¥"></a>2016å¹´3æœˆ10æ—¥</h3><p>ä¸åšè®¡åˆ’çš„æ—¥å­å®¹æ˜“è™šåº¦â€¦</p>
<h3 id="2016_u5E743_u670811_u65E5"><a href="#2016_u5E743_u670811_u65E5" class="headerlink" title="2016å¹´3æœˆ11æ—¥"></a>2016å¹´3æœˆ11æ—¥</h3><p>hd hr ä»Šå¤©è¿Ÿè¿Ÿä¸æ¥ç”µè¯, æœ€åæˆ‘æ²‰ä¸ä½æ°”æ‰“äº†è¿‡å», å‘Šè¯‰ä»–æˆ‘è€ƒè™‘å¥½äº†, ä¸‹å‘¨å¯ä»¥å»æŠ¥åˆ°. ( ç›¸å½“é€‰æ‹©æƒåˆè¿˜å›å»äº†â€¦)</p>
<p>ç»“æœ hr è¯´ä»€ä¹ˆä»–ä»¬äººåŠ›éƒ¨é—¨åˆæ–°æ‹›äº†äººä»€ä¹ˆçš„, è¯´æ™šç‚¹ç­”å¤æˆ‘. æˆ‘æ€ä¹ˆæ„Ÿè§‰æœ‰ç‚¹æ‚¬å‘¢. </p>
<p>æœ¬æ¥è¿˜ä¸å¤ªé«˜å…´å»çš„, å› ä¸ºå·¥ä½œå†…å®¹è¿˜æœ‰å…¬å¸åˆ¶åº¦ä¸æ˜¯å¾ˆå–œæ¬¢. åæ¥çœ‹å¾…é‡ç¡®å®ä¸é”™, å°±è¯´æœäº†è‡ªå·±å». </p>
<p>æœŸé—´å„ç§ YY â€¦â€¦ ç»“æœä»Šå¤©å¼„è¿™ä¸€èŒ¬, å¿ƒé‡Œå¾ˆä¸çˆ½. ä¹Ÿè®¸è¿™å°±æ˜¯æ‚£å¾—æ‚£å¤±å§. ä¸»è¦ä¹‹å‰è¯´è€ƒè™‘, æ˜¯è§‰å¾—è‡ª<br>å·±åº”è¯¥è¿˜æœ‰æ›´å¥½çš„æœºä¼š, ç»“æœç®€å†è¿ç»­è¢«æ‹’äº†â€¦ å¯¹è‡ªå·±ä¹Ÿæœ‰ç‚¹æ²¡æŠŠæ¡äº†æ„Ÿè§‰â€¦ å°±æ›´æƒ³å» hd äº†æˆ‘è‰¹. </p>
<p>å½’æ ¹ç»“åº•, è¿˜æ˜¯èƒ½åŠ›é—®é¢˜. è¦æ˜¯æœ‰è¿ç»´å¼€å‘çš„èƒ½åŠ›, æˆ‘æ‰ä¸ä¼šé€‰æ‹© hd å‘¢, å“¼â•­(â•¯^â•°)â•®. </p>
<p>å“, ç»“æœ, å°±é»„äº†. <strong>äºº, éœ€è¦æœ‰ä¸ªåŸºå‡†, ä¸å¯å¤ªè´ª.</strong></p>
<p>è¿˜æœ‰, åœ¨äº‹æƒ…æœ€ç»ˆç¡®å®šå‰, è¿˜æ˜¯ä¸è¦å»å®£ä¼ äº†, ä½ å¿˜äº†å¥¹ç”Ÿæ—¥é‚£å¤©çš„äº‹äº†ä¹ˆ, åƒä¸‡æ²‰ä½æ°”, æ²‰ä½æ°”æ‰æœ‰æŒä¹…çš„èƒœåˆ©!</p>
<p>ä»Šå¹´å¼€å¤´æœ‰ç‚¹ä¸é¡ºå‘¢, å·¥ä½œæ„Ÿæƒ…åŒåŒå—æŒ«.</p>
<h3 id="2016_u5E743_u670812_u65E5"><a href="#2016_u5E743_u670812_u65E5" class="headerlink" title="2016å¹´3æœˆ12æ—¥"></a>2016å¹´3æœˆ12æ—¥</h3><p>æ¤æ ‘èŠ‚â€“ç§ä¸€æ£µæ ‘æœ€å¥½çš„æ—¶é—´æ˜¯åå¹´å‰, å…¶æ¬¡æ˜¯ç°åœ¨.</p>
<p>è²Œä¼¼å­¦ä¼šäº†æ—©ç¡çš„æ–¹æ³•â€“èººåºŠä¸Šé—­çœ¼ç›å›å¿†ä¸€äº›äº‹æƒ…</p>
<p>æ—¢ç„¶æ²¡è¢«æŸç¼š, é‚£å°±å­¦ä¹ ä¸€äº›è‡ªç”±çš„æŠ€èƒ½: é¦–æ¨è‹±è¯­, ç„¶åæ˜¯æŠ•èµ„, ç¼–ç¨‹ç»ˆç©¶è¿˜æ˜¯ç”¨æ¥æå‡æ•ˆç‡çš„å¤š.</p>
<h3 id="2016_u5E743_u670813_u65E5"><a href="#2016_u5E743_u670813_u65E5" class="headerlink" title="2016å¹´3æœˆ13æ—¥"></a>2016å¹´3æœˆ13æ—¥</h3><p>å­¦äº†ä¸€å¤© awk å§â€¦, æ—©ä¸Šèµ·æ¥æ™šäº†, ä¸è¿‡ä¸­åˆä¸ç”¨ç¡åˆè§‰äº†å€’æ˜¯ä¸é”™.</p>
<h3 id="2016_u5E743_u670814_u65E5"><a href="#2016_u5E743_u670814_u65E5" class="headerlink" title="2016å¹´3æœˆ14æ—¥"></a>2016å¹´3æœˆ14æ—¥</h3><p>ç™½è‰²æƒ…äººèŠ‚, æ— è¨€</p>
<p>æ—¶å…‰ä¸ä»…èƒ½æŠšå¹³ä¼¤ç—›, è¿˜èƒ½æ·¡åŒ–ä»¥å¾€çš„å¿«ä¹, æŠ¹å»ä½ çš„éŸ³å®¹. ä¹Ÿè®¸, æˆ‘çš„è®°å¿†åŠ›çœŸæ˜¯è¶Šæ¥è¶Šå·®äº†, å¯èƒ½åªæ˜¯ä¸æƒ³å›å¿†å§â€¦</p>
<h3 id="2016_u5E743_u670815_u65E5"><a href="#2016_u5E743_u670815_u65E5" class="headerlink" title="2016å¹´3æœˆ15æ—¥"></a>2016å¹´3æœˆ15æ—¥</h3><p>å«é†’ä½ çš„ä¸æ˜¯é—¹é’Ÿ, ä¹Ÿä¸æ˜¯æ¢¦æƒ³, è€Œæ˜¯æ—©ç¡, å…¶æ¬¡æ˜¯é¥¿äº†â€¦</p>
<h3 id="2016_u5E743_u670816_u65E5"><a href="#2016_u5E743_u670816_u65E5" class="headerlink" title="2016å¹´3æœˆ16æ—¥"></a>2016å¹´3æœˆ16æ—¥</h3><p>ä¸å¤Ÿè‡ªç§ä¹Ÿä¼šæˆä¸ºè¢«æ‹’ç»çš„ç†ç”±</p>
<p>æ¯ä¸ªå­å¥³éƒ½æ˜¯çˆ¶æ¯çš„éª„å‚², ä¹Ÿè¯·åšå­å¥³çš„å¯¹å¾—èµ·è¿™ä¸ªç§°å·.</p>
<p>æ˜¯å•Š, æ¯«æ— æ ¹æ®çš„å¸Œæœ›å’Œå®‰æ…°åˆæœ‰ä»€ä¹ˆç”¨å‘¢</p>
<p>2016å¹´3æœˆ21æ—¥</p>
<p>è®°ä½, ä½ é€‰æ‹©è¿™å®¶å…¬å¸çš„ç†ç”±: </p>
<p>1.æå‡è–ªèµ„æ°´å¹³</p>
<p>2.åŸ¹å…»è‰¯å¥½çš„å·¥ä½œç”Ÿæ´»ä¹ æƒ¯</p>
<p>3.é€‚åº”å¤§å…¬å¸çš„åˆ¶åº¦</p>
<p>4.ç£¨ç»ƒæ„å¿—, é”»ç‚¼å¥½å¿ƒæ€</p>
<h3 id="2016_u5E743_u670824_u65E5"><a href="#2016_u5E743_u670824_u65E5" class="headerlink" title="2016å¹´3æœˆ24æ—¥"></a>2016å¹´3æœˆ24æ—¥</h3><p><a href="https://sg.godaddy.com/zh/help/moving-a-domain-name-out-of-your-account-822" target="_blank" rel="external">godaddy åŸŸåè½¬å‡ºåˆ°é˜¿é‡Œäº‘</a></p>
<h3 id="2016_u5E743_u670825_u65E5"><a href="#2016_u5E743_u670825_u65E5" class="headerlink" title="2016å¹´3æœˆ25æ—¥"></a>2016å¹´3æœˆ25æ—¥</h3><p>å¿™æˆç‹—, æƒ³åˆ°é’±, è¿˜æ˜¯å¿äº†</p>
<h3 id="2016_u5E743_u670826_u65E5"><a href="#2016_u5E743_u670826_u65E5" class="headerlink" title="2016å¹´3æœˆ26æ—¥"></a>2016å¹´3æœˆ26æ—¥</h3><p><a href="http://blog.csdn.net/cankingapp/article/details/18312117" target="_blank" rel="external">git å–æ¶ˆä¿®æ”¹ï¼Œæ¢å¤ç‰ˆæœ¬ å‘½ä»¤å¤§å…¨</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="2016_u5E743_u67081_u65E5"><a href="#2016_u5E743_u67081_u65E5" class="headerlink" title="2016å¹´3æœˆ1æ—¥"></a>2016å¹´3æœˆ1æ—¥</h3><h3 id="2016_u5]]>
    </summary>
    
      <category term="ç¢ç¢å¿µ" scheme="http://yoursite.com/tags/%E7%A2%8E%E7%A2%8E%E5%BF%B5/"/>
    
      <category term="life" scheme="http://yoursite.com/categories/life/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[è§£å†³ä¸€äº›ç”µè„‘é—®é¢˜]]></title>
    <link href="http://yoursite.com/2016/02/25/%E8%A7%A3%E5%86%B3%E4%B8%80%E4%BA%9B%E7%94%B5%E8%84%91%E9%97%AE%E9%A2%98/"/>
    <id>http://yoursite.com/2016/02/25/è§£å†³ä¸€äº›ç”µè„‘é—®é¢˜/</id>
    <published>2016-02-25T03:38:54.000Z</published>
    <updated>2016-04-13T08:23:40.000Z</updated>
    <content type="html"><![CDATA[<h3 id="windows7__u5185_u90E8_u7248_u672C7601_2C_u6B64windows_u526F_u672C_u4E0D_u662F_u6B63_u7248"><a href="#windows7__u5185_u90E8_u7248_u672C7601_2C_u6B64windows_u526F_u672C_u4E0D_u662F_u6B63_u7248" class="headerlink" title="windows7 å†…éƒ¨ç‰ˆæœ¬7601,æ­¤windowså‰¯æœ¬ä¸æ˜¯æ­£ç‰ˆ"></a>windows7 å†…éƒ¨ç‰ˆæœ¬7601,æ­¤windowså‰¯æœ¬ä¸æ˜¯æ­£ç‰ˆ</h3><p>ä¸‹è½½<a href="http://www.2cto.com/os/201601/456247.html" target="_blank" rel="external">å°é©¬win7æ¿€æ´»å·¥å…·</a>, è§£å‹, è¿è¡Œ</p>
<h3 id="ubuntu__u7EC8_u7AEF_u4E2D_u6587_u4E71_u7801"><a href="#ubuntu__u7EC8_u7AEF_u4E2D_u6587_u4E71_u7801" class="headerlink" title="ubuntu ç»ˆç«¯ä¸­æ–‡ä¹±ç "></a>ubuntu ç»ˆç«¯ä¸­æ–‡ä¹±ç </h3><p>ubuntu iterm è¿æ¥ä¹‹å, ç»ˆç«¯æ— æ³•è¾“å…¥ä¸­æ–‡ , vim é‡Œé¢çš„ä¸­æ–‡éƒ½æ˜¯ä¹±ç , ubuntu tty æ˜¾ç¤ºä¸­æ–‡ä¸ºä¹±ç </p>
<p>è§£å†³æ–¹æ³•:</p>
<pre><code>æ·»åŠ ä¸­æ–‡å­—ç¬¦ç¼–ç ï¼š
$sudo vim /var/lib/locales/supported.d/local
#æ·»åŠ ä¸‹é¢çš„ä¸­æ–‡å­—ç¬¦é›†, ä¸€å¼€å§‹æ˜¯åªæœ‰en_US.UTF-8 UTF-8è¿™ä¸€è¡Œçš„
zh_CN.GBK GBK
zh_CN.GB2312 GB2312
zh_CN.GB18030 GB18030
ä½¿å…¶ç”Ÿæ•ˆï¼š
$sudo dpkg-reconfigure locales
ç„¶åé‡å¯, æˆ–è€…é‡æ–°ç™»å½•ç»ˆç«¯å°± ok äº†
</code></pre><a id="more"></a>
<h3 id="Error_checking_TLS_connection_3A_Host_is_not_running"><a href="#Error_checking_TLS_connection_3A_Host_is_not_running" class="headerlink" title="Error checking TLS connection: Host is not running"></a>Error checking TLS connection: Host is not running</h3><p>mac ä¸Šç”¨ Dockertool å®‰è£…äº† Docker, æˆ‘æŠŠ<code>eval $(docker-machine env default)</code> åŠ åˆ°äº† <code>.bashrc</code> é‡Œé¢, ä½†æ˜¯å½“ç½‘ç»œå‘ç”Ÿå˜åŒ–çš„æ—¶å€™, Docker çš„ ip ä¼šå‡ºç°é—®é¢˜ ,è¿æ¥ä¸ä¸Š, äºæ˜¯ä¼šæç¤ºè¿™ä¸ªé”™è¯¯</p>
<p>æŠŠä¸Šé¢é‚£å¥æ”¹æˆä¸‹é¢çš„å°±è§£å†³äº†:</p>
<pre><code># connect your shell to docker-machine
[ Running == `docker-machine ls | awk &apos;NR==2{print $4}&apos;`  ] &amp;&amp; eval $(docker-machine env default) || echo fuck
</code></pre><h3 id="mac_os__u8FD8_u539F_u6700_u5C0F_u5316_u7A97_u53E3_u7684_u5FEB_u6377_u952E"><a href="#mac_os__u8FD8_u539F_u6700_u5C0F_u5316_u7A97_u53E3_u7684_u5FEB_u6377_u952E" class="headerlink" title="mac os è¿˜åŸæœ€å°åŒ–çª—å£çš„å¿«æ·é”®"></a>mac os è¿˜åŸæœ€å°åŒ–çª—å£çš„å¿«æ·é”®</h3><p>æœ€å°åŒ–å¿«æ·é”® command + m</p>
<p>å‘ç°ç”¨cmd + tabé”®ä¸èƒ½è¿˜åŸæœ€å°åŒ–çš„çª—å£ï¼Œéå¸¸ä¸æ–¹ä¾¿ï¼ŒGoogleäº†ä¸€ä¸‹æ‰¾åˆ°ä¸€ä¸ªæœ€ç®€å•çš„æ–¹æ³•ã€‚</p>
<blockquote>
<p>ç”¨cmd+Tabé”®é€‰ä¸­è¦è¿˜åŸçš„ç¨‹åºåï¼Œä¿æŒcmdé”®ä¸æ”¾ï¼Œæ¾å¼€tabé”®å†æŒ‰ä½alt/option é”®ï¼Œå†æ¾å¼€cmdé”®æœ€åæ¾å¼€alt/optioné”®ã€‚</p>
</blockquote>
<p>è¯•è¯•å§ã€‚</p>
<p><a href="http://www.chinamac.com/2014/0328/2471.html" target="_blank" rel="external">æ•™ä½ å¦‚ä½•ç”¨å¿«æ·é”® è¿˜åŸæœ€å°åŒ–çš„çª—å£</a></p>
<h3 id="Filezilla_sftp__u5BC6_u94A5_u767B_u9646"><a href="#Filezilla_sftp__u5BC6_u94A5_u767B_u9646" class="headerlink" title="Filezilla sftp å¯†é’¥ç™»é™†"></a>Filezilla sftp å¯†é’¥ç™»é™†</h3><p>ä½¿ç”¨çš„æ˜¯ id_rsa æ–‡ä»¶, è€Œä¸æ˜¯id_rsa.pub æ–‡ä»¶</p>
<h3 id="Chrome__u9690_u85CF_u4E66_u7B7E_u680F"><a href="#Chrome__u9690_u85CF_u4E66_u7B7E_u680F" class="headerlink" title="Chrome éšè—ä¹¦ç­¾æ "></a>Chrome éšè—ä¹¦ç­¾æ </h3><p>Shift+command+b</p>
<h3 id="/var/log/messages__u65E5_u5FD7_u6587_u4EF6_u91CC_u5927_u91CF_u7684_3A_systemd_3A_Started_Session_1858_of_user_root"><a href="#/var/log/messages__u65E5_u5FD7_u6587_u4EF6_u91CC_u5927_u91CF_u7684_3A_systemd_3A_Started_Session_1858_of_user_root" class="headerlink" title="/var/log/messages æ—¥å¿—æ–‡ä»¶é‡Œå¤§é‡çš„: systemd: Started Session 1858 of user root."></a>/var/log/messages æ—¥å¿—æ–‡ä»¶é‡Œå¤§é‡çš„: systemd: Started Session 1858 of user root.</h3><p>è§£å†³æ–¹æ³•:</p>
<pre><code>vi /etc/systemd/system.conf
LogLevel=notice
</code></pre><p>ç„¶å</p>
<pre><code>systemctl restart rsyslog
systemd-analyze set-log-level notice
</code></pre><p><a href="http://blog.dougco.com/unix/too-many-systemd-created-slice/" target="_blank" rel="external">Too many systemd: Created slice !</a></p>
<h3 id="Mac_tree__u4E2D_u6587_u6587_u4EF6_u540D_u663E_u793A_u5F02_u5E38"><a href="#Mac_tree__u4E2D_u6587_u6587_u4EF6_u540D_u663E_u793A_u5F02_u5E38" class="headerlink" title="Mac tree ä¸­æ–‡æ–‡ä»¶åæ˜¾ç¤ºå¼‚å¸¸"></a>Mac tree ä¸­æ–‡æ–‡ä»¶åæ˜¾ç¤ºå¼‚å¸¸</h3><pre><code>tree -N
</code></pre><p><a href="http://wwdd23.github.io/2015/01/09/mac-tree-chinese-display-error.html" target="_blank" rel="external">å‚è€ƒ</a></p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="windows7__u5185_u90E8_u7248_u672C7601_2C_u6B64windows_u526F_u672C_u4E0D_u662F_u6B63_u7248"><a href="#windows7__u5185_u90E8_u7248_u672C7601_2C_u6B64windows_u526F_u672C_u4E0D_u662F_u6B63_u7248" class="headerlink" title="windows7 å†…éƒ¨ç‰ˆæœ¬7601,æ­¤windowså‰¯æœ¬ä¸æ˜¯æ­£ç‰ˆ"></a>windows7 å†…éƒ¨ç‰ˆæœ¬7601,æ­¤windowså‰¯æœ¬ä¸æ˜¯æ­£ç‰ˆ</h3><p>ä¸‹è½½<a href="http://www.2cto.com/os/201601/456247.html">å°é©¬win7æ¿€æ´»å·¥å…·</a>, è§£å‹, è¿è¡Œ</p>
<h3 id="ubuntu__u7EC8_u7AEF_u4E2D_u6587_u4E71_u7801"><a href="#ubuntu__u7EC8_u7AEF_u4E2D_u6587_u4E71_u7801" class="headerlink" title="ubuntu ç»ˆç«¯ä¸­æ–‡ä¹±ç "></a>ubuntu ç»ˆç«¯ä¸­æ–‡ä¹±ç </h3><p>ubuntu iterm è¿æ¥ä¹‹å, ç»ˆç«¯æ— æ³•è¾“å…¥ä¸­æ–‡ , vim é‡Œé¢çš„ä¸­æ–‡éƒ½æ˜¯ä¹±ç , ubuntu tty æ˜¾ç¤ºä¸­æ–‡ä¸ºä¹±ç </p>
<p>è§£å†³æ–¹æ³•:</p>
<pre><code>æ·»åŠ ä¸­æ–‡å­—ç¬¦ç¼–ç ï¼š
$sudo vim /var/lib/locales/supported.d/local
#æ·»åŠ ä¸‹é¢çš„ä¸­æ–‡å­—ç¬¦é›†, ä¸€å¼€å§‹æ˜¯åªæœ‰en_US.UTF-8 UTF-8è¿™ä¸€è¡Œçš„
zh_CN.GBK GBK
zh_CN.GB2312 GB2312
zh_CN.GB18030 GB18030
ä½¿å…¶ç”Ÿæ•ˆï¼š
$sudo dpkg-reconfigure locales
ç„¶åé‡å¯, æˆ–è€…é‡æ–°ç™»å½•ç»ˆç«¯å°± ok äº†
</code></pre>]]>
    
    </summary>
    
      <category term="error" scheme="http://yoursite.com/tags/error/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Djangoç¬¬ä¸‰å¤©]]></title>
    <link href="http://yoursite.com/2016/02/22/Django%E7%AC%AC%E4%B8%89%E5%A4%A9/"/>
    <id>http://yoursite.com/2016/02/22/Djangoç¬¬ä¸‰å¤©/</id>
    <published>2016-02-22T04:16:57.000Z</published>
    <updated>2016-04-07T11:57:29.000Z</updated>
    <content type="html"><![CDATA[<h3 id="u7EE7_u7EED_u5B8C_u5584_polls_app"><a href="#u7EE7_u7EED_u5B8C_u5584_polls_app" class="headerlink" title="ç»§ç»­å®Œå–„ polls app"></a>ç»§ç»­å®Œå–„ polls app</h3><p><code>polls/views.py</code>æ·»åŠ å¦‚ä¸‹ä»£ç :</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">detail</span><span class="params">(request, question_id)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"You're looking at question %s."</span> % question_id)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">results</span><span class="params">(request, question_id)</span>:</span></span><br><span class="line">    response = <span class="string">"You're looking at the results of question %s."</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(response % question_id)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">vote</span><span class="params">(request, question_id)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"You're voting on question %s."</span> % question_id)</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<p><code>polls/urls.py</code>æ·»åŠ å¦‚ä¸‹ä»£ç :</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.conf.urls <span class="keyword">import</span> url</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> . <span class="keyword">import</span> views</span><br><span class="line"></span><br><span class="line">urlpatterns = [</span><br><span class="line">    <span class="comment"># ex: /polls/</span></span><br><span class="line">    url(<span class="string">r'^$'</span>, views.index, name=<span class="string">'index'</span>),</span><br><span class="line">    <span class="comment"># ex: /polls/5/</span></span><br><span class="line">    url(<span class="string">r'^(?P&lt;question_id&gt;[0-9]+)/$'</span>, views.detail, name=<span class="string">'detail'</span>),</span><br><span class="line">    <span class="comment"># ex: /polls/5/results/</span></span><br><span class="line">    url(<span class="string">r'^(?P&lt;question_id&gt;[0-9]+)/results/$'</span>, views.results, name=<span class="string">'results'</span>),</span><br><span class="line">    <span class="comment"># ex: /polls/5/vote/</span></span><br><span class="line">    url(<span class="string">r'^(?P&lt;question_id&gt;[0-9]+)/vote/$'</span>, views.vote, name=<span class="string">'vote'</span>),</span><br><span class="line">]</span><br></pre></td></tr></table></figure>
<p><code>(?P&lt;question_id&gt;[0-9]+)</code> åœ†æ‹¬å·å†…çš„å†…å®¹æ˜¯ç”¨æ¥ä½œåŒ¹é…çš„, <code>?P&lt;question_id&gt;</code> æ˜¯åŒ¹é…å†…å®¹çš„åç§°</p>
<p>åˆ†åˆ«è®¿é—®<code>/polls/34/</code>,<code>/polls/34/results/</code>,<code>/polls/34/vote/</code> çœ‹çœ‹</p>
<p>å†™ä¸€ä¸ªæœ‰ç‚¹å†…å®¹çš„ view(æ˜¾ç¤ºæœ€è¿‘çš„5ä¸ª question)</p>
<p><code>polls/views.py</code> ä¸­æ·»åŠ ä¸‹é¢çš„ä»£ç , ä¿®æ”¹åŸæ¥çš„ index å‡½æ•°</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Question</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">(request)</span>:</span></span><br><span class="line">    latest_question_list = Question.objects.order_by(<span class="string">'-pub_date'</span>)[:<span class="number">5</span>]</span><br><span class="line">    output = <span class="string">', '</span>.join([q.question_text <span class="keyword">for</span> q <span class="keyword">in</span> latest_question_list])</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(output)</span><br></pre></td></tr></table></figure>
<h3 id="u4F7F_u7528_templates"><a href="#u4F7F_u7528_templates" class="headerlink" title="ä½¿ç”¨ templates"></a>ä½¿ç”¨ templates</h3><p>ä½¿ç”¨æ¨¡æ¿çš„å¥½å¤„æ˜¯å¯ä»¥å°† html ä»£ç ä¸ python ä»£ç åˆ†å¼€</p>
<p>åˆ›å»ºç›®å½•</p>
<pre><code>mkdir -p polls/templates/polls/
</code></pre><p>Django ä¼šè‡ªåŠ¨æœç´¢é…ç½®ä¸­ <code>INSTALLED_APPS</code> ä¸­å„ App ç›®å½•ä¸‹çš„ templates</p>
<p>å†™ä¸€ä¸ª template</p>
<p><code>polls/templates/polls/index.html</code></p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml"></span><span class="template_tag">&#123;% <span class="keyword">if</span> latest_question_list %&#125;</span><span class="xml"></span><br><span class="line">    <span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line">    </span><span class="template_tag">&#123;% <span class="keyword">for</span> question <span class="keyword">in</span> latest_question_list %&#125;</span><span class="xml"></span><br><span class="line">        <span class="tag">&lt;<span class="title">li</span>&gt;</span><span class="tag">&lt;<span class="title">a</span> <span class="attribute">href</span>=<span class="value">"/polls/</span></span></span><span class="variable">&#123;&#123; question.id &#125;&#125;</span><span class="xml"><span class="tag"><span class="value">/"</span>&gt;</span></span><span class="variable">&#123;&#123; question.question_text &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="title">a</span>&gt;</span><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line">    </span><span class="template_tag">&#123;% <span class="keyword">endfor</span> %&#125;</span><span class="xml"></span><br><span class="line">    <span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span><br><span class="line"></span><span class="template_tag">&#123;% <span class="keyword">else</span> %&#125;</span><span class="xml"></span><br><span class="line">    <span class="tag">&lt;<span class="title">p</span>&gt;</span>No polls are available.<span class="tag">&lt;/<span class="title">p</span>&gt;</span></span><br><span class="line"></span><span class="template_tag">&#123;% <span class="keyword">endif</span> %&#125;</span><span class="xml"></span></span><br></pre></td></tr></table></figure>
<p>ç°åœ¨, æˆ‘ä»¬éœ€è¦ä¿®æ”¹ä¸€ä¸‹ <code>polls/views.py</code> çš„ index view , è®©å…¶ä½¿ç”¨ä¸Šé¢çš„æ¨¡æ¿</p>
<p><code>polls/views.py</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> HttpResponse</span><br><span class="line"><span class="keyword">from</span> django.template <span class="keyword">import</span> loader</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Question</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">(request)</span>:</span></span><br><span class="line">    latest_question_list = Question.objects.order_by(<span class="string">'-pub_date'</span>)[:<span class="number">5</span>]</span><br><span class="line">    template = loader.get_template(<span class="string">'polls/index.html'</span>)</span><br><span class="line">    context = &#123;</span><br><span class="line">        <span class="string">'latest_question_list'</span>: latest_question_list,</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> HttpResponse(template.render(context, request))</span><br></pre></td></tr></table></figure>
<p>context é‡Œçš„ <em>latest_question_list</em> ä¼šè¢«æ”¾åˆ° template é‡Œçš„å˜é‡<em>latest_question_list</em>å§</p>
<p>ä¸Šé¢çš„æ˜¯å¸¸è§„å†™æ³•, Djangoè¿˜æä¾›äº†æ›´ç®€ä¾¿çš„å†™æ³•:</p>
<p><code>polls/views.py</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Question</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">index</span><span class="params">(request)</span>:</span></span><br><span class="line">    latest_question_list = Question.objects.order_by(<span class="string">'-pub_date'</span>)[:<span class="number">5</span>]</span><br><span class="line">    context = &#123;<span class="string">'latest_question_list'</span>: latest_question_list&#125;</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'polls/index.html'</span>, context)</span><br></pre></td></tr></table></figure>
<p>The <strong>render()</strong> function takes the request object as its first argument, a template name as its second argument and a dictionary as its optional third argument. It returns an <strong>HttpResponse</strong> object of the given template rendered with the given context.</p>
<h3 id="404"><a href="#404" class="headerlink" title="404"></a>404</h3><p>ç°åœ¨æä¸€æ detail çš„ view</p>
<p><code>polls/views.py</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.http <span class="keyword">import</span> Http404</span><br><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> render</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Question</span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">detail</span><span class="params">(request, question_id)</span>:</span></span><br><span class="line">    <span class="keyword">try</span>:</span><br><span class="line">        question = Question.objects.get(pk=question_id)</span><br><span class="line">    <span class="keyword">except</span> Question.DoesNotExist:</span><br><span class="line">        <span class="keyword">raise</span> Http404(<span class="string">"Question does not exist"</span>)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'polls/detail.html'</span>, &#123;<span class="string">'question'</span>: question&#125;)</span><br></pre></td></tr></table></figure>
<figure class="highlight crystal"><table><tr><td class="code"><pre><span class="line">polls/templates/polls/detail.html</span><br><span class="line"><span class="expansion">&#123;&#123; question &#125;&#125;</span></span><br></pre></td></tr></table></figure>
<h3 id="A_shortcut_3A_get_object_or_404_28_29"><a href="#A_shortcut_3A_get_object_or_404_28_29" class="headerlink" title="A shortcut: get_object_or_404()"></a>A shortcut: get_object_or_404()</h3><p><code>polls/views.py</code></p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">from</span> django.shortcuts <span class="keyword">import</span> get_object_or_404, render</span><br><span class="line"></span><br><span class="line"><span class="keyword">from</span> .models <span class="keyword">import</span> Question</span><br><span class="line"><span class="comment"># ...</span></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">detail</span><span class="params">(request, question_id)</span>:</span></span><br><span class="line">    question = get_object_or_404(Question, pk=question_id)</span><br><span class="line">    <span class="keyword">return</span> render(request, <span class="string">'polls/detail.html'</span>, &#123;<span class="string">'question'</span>: question&#125;)</span><br></pre></td></tr></table></figure>
<p>æ®è¯´ç”¨ shortcut è¿™ç§èƒ½å¤Ÿè®© model å’Œ view è¿™ä¸¤å—æ¾è€¦åˆ</p>
<h3 id="u4F7F_u7528_u6A21_u677F_u7CFB_u7EDF"><a href="#u4F7F_u7528_u6A21_u677F_u7CFB_u7EDF" class="headerlink" title="ä½¿ç”¨æ¨¡æ¿ç³»ç»Ÿ"></a>ä½¿ç”¨æ¨¡æ¿ç³»ç»Ÿ</h3><p>å›åˆ°æˆ‘ä»¬æŠ•ç¥¨åº”ç”¨çš„ detail()è§†å›¾</p>
<p><code>polls/templates/polls/detail.html</code></p>
<figure class="highlight django"><table><tr><td class="code"><pre><span class="line"><span class="xml"><span class="tag">&lt;<span class="title">h1</span>&gt;</span></span><span class="variable">&#123;&#123; question.question_text &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="title">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="title">ul</span>&gt;</span></span><br><span class="line"></span><span class="template_tag">&#123;% <span class="keyword">for</span> choice <span class="keyword">in</span> question.choice_set.all %&#125;</span><span class="xml"></span><br><span class="line">    <span class="tag">&lt;<span class="title">li</span>&gt;</span></span><span class="variable">&#123;&#123; choice.choice_text &#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="title">li</span>&gt;</span></span><br><span class="line"></span><span class="template_tag">&#123;% <span class="keyword">endfor</span> %&#125;</span><span class="xml"></span><br><span class="line"><span class="tag">&lt;/<span class="title">ul</span>&gt;</span></span></span><br></pre></td></tr></table></figure>
<p>To be continue â€¦</p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="u7EE7_u7EED_u5B8C_u5584_polls_app"><a href="#u7EE7_u7EED_u5B8C_u5584_polls_app" class="headerlink" title="ç»§ç»­å®Œå–„ polls app"></a>ç»§ç»­å®Œå–„ polls app</h3><p><code>polls/views.py</code>æ·»åŠ å¦‚ä¸‹ä»£ç :</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">detail</span><span class="params">(request, question_id)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"You're looking at question %s."</span> % question_id)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">results</span><span class="params">(request, question_id)</span>:</span></span><br><span class="line">    response = <span class="string">"You're looking at the results of question %s."</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(response % question_id)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">vote</span><span class="params">(request, question_id)</span>:</span></span><br><span class="line">    <span class="keyword">return</span> HttpResponse(<span class="string">"You're voting on question %s."</span> % question_id)</span><br></pre></td></tr></table></figure>]]>
    
    </summary>
    
      <category term="Django" scheme="http://yoursite.com/tags/Django/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
  <entry>
    <title><![CDATA[Djangoç¬¬äºŒå¤©]]></title>
    <link href="http://yoursite.com/2016/02/18/Django%E7%AC%AC%E4%BA%8C%E5%A4%A9/"/>
    <id>http://yoursite.com/2016/02/18/Djangoç¬¬äºŒå¤©/</id>
    <published>2016-02-18T01:53:33.000Z</published>
    <updated>2016-02-22T04:11:50.000Z</updated>
    <content type="html"><![CDATA[<h3 id="u521B_u5EFA_u6570_u636E_u5E93"><a href="#u521B_u5EFA_u6570_u636E_u5E93" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h3><p>ç›¸å…³æ–‡ä»¶æ˜¯<em>mysite/settings.py</em> , é»˜è®¤ç”¨çš„æ˜¯ SQLite . æˆ‘ç”¨çš„ mysql(ä¹‹å‰åœ¨æœ¬åœ°å®‰è£…å¥½çš„)</p>
<p>å…ˆåœ¨ mysql ä¸­åˆ›å»ºåº“,ç”¨æˆ·</p>
<pre><code>mysql&gt; CREATE DATABASE polls DEFAULT CHARSET=utf8;
Query OK, 1 row affected (0.00 sec)

mysql&gt; GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES ON polls.* TO &apos;poller&apos;@&apos;127.0.0.1&apos; IDENTIFIED BY &apos;poller&apos;;
Query OK, 0 rows affected (0.00 sec)
</code></pre><p>ä¿®æ”¹<em>mysite/settings.py</em>ä¸­çš„æ•°æ®åº“è®¾ç½®</p>
<pre><code>DATABASES = {
    &apos;default&apos;: {
        &apos;ENGINE&apos;: &apos;django.db.backends.mysql&apos;,
        &apos;NAME&apos;: &apos;polls&apos;,
        &apos;USER&apos;: &apos;poller&apos;,
        &apos;PASSWORD&apos;: &apos;poller&apos;,
        &apos;HOST&apos;:&apos;127.0.0.1&apos;,
        &apos;PORT&apos;:&apos;3306&apos;,
    }
}
</code></pre><a id="more"></a>
<p>é¡ºä¾¿ä¿®æ”¹ä¸€ä¸‹æ—¶åŒº:</p>
<pre><code>TIME_ZONE = &apos;Asia/Shanghai&apos;
</code></pre><p>æ³¨æ„åˆ° INSTALL_APPS</p>
<pre><code>INSTALLED_APPS = [
    &apos;django.contrib.admin&apos;,
    &apos;django.contrib.auth&apos;,
    &apos;django.contrib.contenttypes&apos;,
    &apos;django.contrib.sessions&apos;,
    &apos;django.contrib.messages&apos;,
    &apos;django.contrib.staticfiles&apos;,
]
</code></pre><p>ä¸Šé¢è¿™äº›æ˜¯é»˜è®¤çš„ app, æˆ‘ä»¬åœ¨ä½¿ç”¨å®ƒä»¬ä¹‹å‰éœ€è¦å…ˆåœ¨æ•°æ®åº“é‡Œä¸ºå®ƒä»¬åˆ›å»º table</p>
<pre><code>$ python manage.py migrate
Operations to perform:
  Apply all migrations: admin, contenttypes, auth, sessions
Running migrations:
  Rendering model states... DONE
  Applying contenttypes.0001_initial... OK
  Applying auth.0001_initial... OK
  Applying admin.0001_initial... OK
  Applying admin.0002_logentry_remove_auto_add... OK
  Applying contenttypes.0002_remove_content_type_name... OK
  Applying auth.0002_alter_permission_name_max_length... OK
  Applying auth.0003_alter_user_email_max_length... OK
  Applying auth.0004_alter_user_username_opts... OK
  Applying auth.0005_alter_user_last_login_null... OK
  Applying auth.0006_require_contenttypes_0002... OK
  Applying auth.0007_alter_validators_add_error_messages... OK
  Applying sessions.0001_initial... OK
</code></pre><p><code>migrate</code> å‘½ä»¤ä¼šä¾æ® <code>INSTALLED_APPS</code> çš„è®¾ç½®, åˆ›å»ºç›¸åº”çš„æ•°æ®åº“è¡¨</p>
<h3 id="u521B_u5EFA_Model"><a href="#u521B_u5EFA_Model" class="headerlink" title="åˆ›å»º Model"></a>åˆ›å»º Model</h3><p>åœ¨æˆ‘ä»¬çš„æŠ•ç¥¨ app ä¸­, æˆ‘ä»¬å°†åˆ›å»ºä¸¤ä¸ª models: Question and Choice.</p>
<p>Question çš„å­—æ®µ: ä¸€ä¸ªé—®é¢˜å’Œä¸€ä¸ªå‘å¸ƒæ—¶é—´</p>
<p>Choice çš„å­—æ®µ: æ–‡æœ¬å’ŒæŠ•ç¥¨</p>
<p>æ¯ä¸ª Choice éƒ½ä¸ä¸€ä¸ª Question ç›¸å…³è”</p>
<p>äºæ˜¯</p>
<pre><code>cat polls/models.py
from __future__ import unicode_literals

from django.db import models

# Create your models here.
class Question(models.Model):
    question_text = models.CharField(max_length=200)
    pub_date = models.DateTimeField(&apos;date published&apos;)


class Choice(models.Model):
    question = models.ForeignKey(Question, on_delete=models.CASCADE)
    choice_text = models.CharField(max_length=200)
    votes = models.IntegerField(default=0)
</code></pre><p>å…³äºå­—æ®µçš„åç§°: åˆ† machine-readable name å’Œ human-readable name (æ¯”å¦‚ä¸Šé¢çš„ date published )</p>
<p>å¦å¤–å°±æ˜¯æ³¨æ„ä¸€ä¸‹å¤–é”® ForeignKey çš„å®šä¹‰</p>
<h3 id="u6FC0_u6D3B_Model"><a href="#u6FC0_u6D3B_Model" class="headerlink" title="æ¿€æ´» Model"></a>æ¿€æ´» Model</h3><p>ä¸Šé¢çš„é‚£æ®µ Model ä»£ç å¯ä»¥è®© Django:</p>
<ul>
<li>ä¸º polls è¿™ä¸ª app åˆ›å»ºæ•°æ®åº“è¡¨ç»“æ„</li>
<li>ä¸º Question å’Œ Choice åˆ›å»ºä¸€ä¸ªå¯ä»¥è¢«è®¿é—®çš„ API</li>
</ul>
<p>ä½†æ˜¯æˆ‘ä»¬é¦–å…ˆè¦æŠŠ polls è¿™ä¸ª app åŠ åˆ°é…ç½®</p>
<pre><code>mysite/settings.py
INSTALLED_APPS = [
    &apos;polls.apps.PollsConfig&apos;,
    &apos;django.contrib.admin&apos;,
    &apos;django.contrib.auth&apos;,
    &apos;django.contrib.contenttypes&apos;,
    &apos;django.contrib.sessions&apos;,
    &apos;django.contrib.messages&apos;,
    &apos;django.contrib.staticfiles&apos;,
]
</code></pre><p>ç„¶åæ‰§è¡Œå‘½ä»¤</p>
<pre><code>python manage.py makemigrations polls
</code></pre><p>ä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ç»“æœ:</p>
<pre><code>Migrations for &apos;polls&apos;:
  0001_initial.py:
    - Create model Choice
    - Create model Question
    - Add field question to choice
</code></pre><p>ä¸‹é¢è¿™é‡Œæ®µä¸å¥½ç¿»è¯‘, ç›´æ¥æ¬åŸæ–‡äº†:</p>
<p>By running <strong>makemigrations</strong>, youâ€™re telling Django that youâ€™ve made some changes to your models (in this case, youâ€™ve made new ones) and that youâ€™d like the changes to be stored as a <strong>migration</strong>.        </p>
<p><strong>Migrations</strong> are how Django stores changes to your models (and thus your database schema) - theyâ€™re just files on disk. You can read the migration for your new model if you like; itâ€™s the file <code>polls/migrations/0001_initial.py</code></p>
<p>Thereâ€™s a command that will run the migrations for you and manage your database schema automatically - thatâ€™s called <strong>migrate</strong>, and weâ€™ll come to it in a moment - but first, letâ€™s see what SQL that migration would run. The <strong>sqlmigrate</strong> command takes migration names and returns their SQL:</p>
<pre><code>python manage.py sqlmigrate polls 0001
</code></pre><figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="operator"><span class="keyword">BEGIN</span>;</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Create model Choice</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`polls_choice`</span> (<span class="string">`id`</span> <span class="built_in">integer</span> AUTO_INCREMENT <span class="keyword">NOT</span> <span class="literal">NULL</span> PRIMARY <span class="keyword">KEY</span>, <span class="string">`choice_text`</span> <span class="built_in">varchar</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>, <span class="string">`votes`</span> <span class="built_in">integer</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>);</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Create model Question</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">TABLE</span> <span class="string">`polls_question`</span> (<span class="string">`id`</span> <span class="built_in">integer</span> AUTO_INCREMENT <span class="keyword">NOT</span> <span class="literal">NULL</span> PRIMARY <span class="keyword">KEY</span>, <span class="string">`question_text`</span> <span class="built_in">varchar</span>(<span class="number">200</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>, <span class="string">`pub_date`</span> datetime(<span class="number">6</span>) <span class="keyword">NOT</span> <span class="literal">NULL</span>);</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="comment">-- Add field question to choice</span></span><br><span class="line"><span class="comment">--</span></span><br><span class="line"><span class="operator"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`polls_choice`</span> <span class="keyword">ADD</span> <span class="keyword">COLUMN</span> <span class="string">`question_id`</span> <span class="built_in">integer</span> <span class="keyword">NOT</span> <span class="literal">NULL</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`polls_choice`</span> <span class="keyword">ALTER</span> <span class="keyword">COLUMN</span> <span class="string">`question_id`</span> <span class="keyword">DROP</span> <span class="keyword">DEFAULT</span>;</span></span><br><span class="line"><span class="operator"><span class="keyword">CREATE</span> <span class="keyword">INDEX</span> <span class="string">`polls_choice_7aa0f6ee`</span> <span class="keyword">ON</span> <span class="string">`polls_choice`</span> (<span class="string">`question_id`</span>);</span></span><br><span class="line"><span class="operator"><span class="keyword">ALTER</span> <span class="keyword">TABLE</span> <span class="string">`polls_choice`</span> <span class="keyword">ADD</span> <span class="keyword">CONSTRAINT</span> <span class="string">`polls_choice_question_id_c5b4b260_fk_polls_question_id`</span> FOREIGN <span class="keyword">KEY</span> (<span class="string">`question_id`</span>) <span class="keyword">REFERENCES</span> <span class="string">`polls_question`</span> (<span class="string">`id`</span>);</span></span><br><span class="line"></span><br><span class="line"><span class="operator"><span class="keyword">COMMIT</span>;</span></span><br></pre></td></tr></table></figure>
<p><strong>sqlmigrate</strong> å‘½ä»¤å¹¶ä¸ä¼šçœŸæ­£åœ¨ä½ çš„æ•°æ®åº“ä¸Šè¿è¡Œ migration , å®ƒåªæ˜¯æ‰“å°å‡ºDjango è®¤ä¸ºéœ€è¦çš„ SQL è¯­å¥. å¯ä»¥ç”¨æ¥æ£€æŸ¥ SQL è„šæœ¬</p>
<p>å½“ç„¶, æ£€æŸ¥çš„å‘½ä»¤è¿˜æœ‰</p>
<pre><code>python manage.py check
</code></pre><p>ä¸‹é¢è¿è¡Œ migrate åœ¨æ•°æ®åº“ä¸­åˆ›å»ºè¡¨</p>
<pre><code>$ python manage.py migrate
Operations to perform:
  Apply all migrations: admin, contenttypes, polls, auth, sessions
Running migrations:
  Rendering model states... DONE
  Applying polls.0001_initial... OK
</code></pre><p><strong>migrate</strong> å‘½ä»¤ä¼šæŠŠæœ¬åœ°æ‰€æœ‰æ²¡åº”ç”¨åˆ°æ•°æ®åº“çš„è¡¨ç»“æ„å˜æ›´åŒæ­¥åˆ°æ•°æ®åº“</p>
<p>æ”¹å˜ <strong>model</strong> çš„ä¸‰ä¸ªæ­¥éª¤:</p>
<ul>
<li>Change your models (in <strong>models.py</strong>).</li>
<li>Run <strong>python manage.py makemigrations</strong> to create migrations for those changes</li>
<li>Run <strong>python manage.py migrate to apply</strong> those changes to the database.</li>
</ul>
<p>è‡³äºåˆ†å¼€è¿™ä¹ˆå¤šæ­¥å®ç° migrate çš„åŸå› , æˆ‘è¿˜ä¸å¤ªç†è§£, å¼€å‘åšçš„å°‘å•Š</p>
<h3 id="u73A9_u73A9_API"><a href="#u73A9_u73A9_API" class="headerlink" title="ç©ç© API"></a>ç©ç© API</h3><p>ç°åœ¨, è®©æˆ‘ä»¬è¿›å…¥ Python çš„äº¤äº’ç•Œé¢, ç©ç© Django æä¾›ç»™æˆ‘ä»¬çš„ API å§, è°ƒç”¨ Python shell</p>
<pre><code>$ python manage.py shell
</code></pre><p>æ‰§è¡Œè¿™ä¸ªå‘½ä»¤, manage.py ä¼šè®¾ç½® DJANGO_SETTINGS_MODULE çš„ç¯å¢ƒå˜é‡</p>
<p>è¿›å…¥ shell ä¹‹å, çœ‹çœ‹æ•°æ®åº“çš„ API å§</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;</span>&gt; from polls.models import <span class="constant">Question</span>, <span class="constant">Choice</span>   <span class="comment"># Import the model classes we just wrote.</span></span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; <span class="constant">Question</span>.objects.all()</span><br><span class="line">[]</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; from django.utils import timezone</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; q = <span class="constant">Question</span>(question_text=<span class="string">"What's new?"</span>, pub_date=timezone.now())</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; q.save()</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; q.id</span><br><span class="line"><span class="number">1</span>L</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; q.question_text</span><br><span class="line"><span class="string">"What's new?"</span></span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; q.pub_date</span><br><span class="line">datetime.datetime(<span class="number">2012</span>, <span class="number">2</span>, <span class="number">26</span>, <span class="number">13</span>, <span class="number">0</span>, <span class="number">0</span>, <span class="number">775217</span>, tzinfo=&lt;<span class="constant">UTC</span>&gt;)</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; q.question_text = <span class="string">"What's up?"</span></span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; q.save()</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; <span class="constant">Question</span>.objects.all()</span><br><span class="line">[&lt;<span class="constant">Question</span><span class="symbol">:</span> <span class="constant">Question</span> object&gt;]</span><br></pre></td></tr></table></figure>
<p>æœ€åæ˜¾ç¤ºçš„<code>[&lt;Question: Question object&gt;]</code> å¯¹æˆ‘ä»¬æ¥è¯´æ²¡å•¥åµç”¨, å¾—æ”¹ä¸€ä¸‹, åŠ ä¸Š<code>__str()__</code> æ–¹æ³•</p>
<pre><code>polls/models.py
from django.db import models
from django.utils.encoding import python_2_unicode_compatible

@python_2_unicode_compatible  # only if you need to support Python 2
class Question(models.Model):
    # ...
    def __str__(self):
        return self.question_text

@python_2_unicode_compatible  # only if you need to support Python 2
class Choice(models.Model):
    # ...
    def __str__(self):
        return self.choice_text
</code></pre><p>é¡ºä¾¿è‡ªå®šä¹‰ä¸€ä¸ªæ–¹æ³•</p>
<pre><code>polls/models.py
import datetime

from django.db import models
from django.utils import timezone


class Question(models.Model):
    # ...
    def was_published_recently(self):
        return self.pub_date &gt;= timezone.now() - datetime.timedelta(days=1)
</code></pre><p>æ³¨æ„ <code>import datetime</code> å’Œ <code>from django.utils import timezone</code> </p>
<p>è¿è¡Œ python manage.py shell å†æ¬¡è¿›å…¥ shell</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="prompt">&gt;&gt;</span>&gt; <span class="constant">Question</span>.objects.all()</span><br><span class="line">[&lt;<span class="constant">Question</span><span class="symbol">:</span> <span class="constant">What</span><span class="string">'s up?&gt;]</span><br><span class="line">&gt;&gt;&gt; Question.objects.filter(id=1)</span><br><span class="line">[&lt;Question: What'</span>s up?&gt;]</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; <span class="constant">Question</span>.objects.filter(question_text__startswith=<span class="string">'What'</span>)</span><br><span class="line">[&lt;<span class="constant">Question</span><span class="symbol">:</span> <span class="constant">What</span><span class="string">'s up?&gt;]</span><br><span class="line">&gt;&gt;&gt; from django.utils import timezone</span><br><span class="line">&gt;&gt;&gt; current_year = timezone.now().year</span><br><span class="line">&gt;&gt;&gt; Question.objects.get(pub_date__year=current_year)</span><br><span class="line">&lt;Question: What'</span>s up?&gt;</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; <span class="constant">Question</span>.objects.get(id=<span class="number">2</span>)</span><br><span class="line"><span class="constant">Traceback</span> (most recent call last)<span class="symbol">:</span></span><br><span class="line">  <span class="constant">File</span> <span class="string">"&lt;input&gt;"</span>, line <span class="number">1</span>, <span class="keyword">in</span> &lt;<span class="class"><span class="keyword">module</span>&gt;</span></span><br><span class="line">  <span class="constant">File</span> <span class="string">"/Users/cristaly7/.virtualenvs/Django/lib/python2.7/site-packages/django/db/models/manager.py"</span>, line <span class="number">122</span>, <span class="keyword">in</span> manager_method</span><br><span class="line">    <span class="keyword">return</span> getattr(<span class="keyword">self</span>.get_queryset(), name)(*args, **kwargs)</span><br><span class="line">  <span class="constant">File</span> <span class="string">"/Users/cristaly7/.virtualenvs/Django/lib/python2.7/site-packages/django/db/models/query.py"</span>, line <span class="number">387</span>, <span class="keyword">in</span> get</span><br><span class="line">    <span class="keyword">self</span>.model._meta.object_name</span><br><span class="line"><span class="constant">DoesNotExist</span><span class="symbol">:</span> <span class="constant">Question</span> matching query does <span class="keyword">not</span> exist.</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; <span class="constant">Question</span>.objects.get(pk=<span class="number">1</span>)</span><br><span class="line">&lt;<span class="constant">Question</span><span class="symbol">:</span> <span class="constant">What</span><span class="string">'s up?&gt;</span><br><span class="line">&gt;&gt;&gt; q = Question.objects.get(pk=1)</span><br><span class="line">&gt;&gt;&gt; q.was_published_recently()</span><br><span class="line">False</span><br><span class="line">&gt;&gt;&gt; q = Question.objects.get(pk=1)</span><br><span class="line">&gt;&gt;&gt; q.choice_set.all()</span><br><span class="line">[]</span><br><span class="line">&gt;&gt;&gt; q.choice_set.create(choice_text='</span><span class="constant">Not</span> much<span class="string">', votes=0)</span><br><span class="line">&lt;Choice: Not much&gt;</span><br><span class="line">&gt;&gt;&gt; q.choice_set.create(choice_text='</span><span class="constant">The</span> sky<span class="string">', votes=0)</span><br><span class="line">&lt;Choice: The sky&gt;</span><br><span class="line">&gt;&gt;&gt; c = q.choice_set.create(choice_text='</span><span class="constant">Just</span> hacking again<span class="string">', votes=0)</span><br><span class="line">&gt;&gt;&gt; c.question</span><br><span class="line">&lt;Question: What'</span>s up?&gt;</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; q.choice_set.all()</span><br><span class="line">[&lt;<span class="constant">Choice</span><span class="symbol">:</span> <span class="constant">Not</span> much&gt;, &lt;<span class="constant">Choice</span><span class="symbol">:</span> <span class="constant">The</span> sky&gt;, &lt;<span class="constant">Choice</span><span class="symbol">:</span> <span class="constant">Just</span> hacking again&gt;]</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; q.choice_set.count()</span><br><span class="line"><span class="number">3</span></span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; <span class="constant">Choice</span>.objects.filter(question__pub_date__year=current_year)</span><br><span class="line">[&lt;<span class="constant">Choice</span><span class="symbol">:</span> <span class="constant">Not</span> much&gt;, &lt;<span class="constant">Choice</span><span class="symbol">:</span> <span class="constant">The</span> sky&gt;, &lt;<span class="constant">Choice</span><span class="symbol">:</span> <span class="constant">Just</span> hacking again&gt;]</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; c = q.choice_set.filter(choice_text__startswith=<span class="string">'Just hacking'</span>)</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; c.delete()</span><br><span class="line">(<span class="number">1</span>L, &#123;u<span class="string">'polls.Choice'</span><span class="symbol">:</span> <span class="number">1</span>L&#125;)</span><br><span class="line"><span class="prompt">&gt;&gt;</span>&gt; q.choice_set.count()</span><br><span class="line"><span class="number">2</span></span><br></pre></td></tr></table></figure>
<h3 id="Django_Admin"><a href="#Django_Admin" class="headerlink" title="Django Admin"></a>Django Admin</h3><p>åˆ›å»º admin</p>
<pre><code>python manage.py createsuperuser
</code></pre><p>è¿è¡Œæµ‹è¯•æœåŠ¡å™¨</p>
<pre><code>python manage.py runserver
</code></pre><p>è®¿é—® <a href="http://127.0.0.1:8000/admin/" target="_blank" rel="external">http://127.0.0.1:8000/admin/</a> ,ç™»é™†åå°</p>
<p><img src="http://7xpsj5.com1.z0.glb.clouddn.com/Django_admin.png" alt="Django"></p>
<h3 id="u4F7F_u6295_u7968_App__u53EF_u4EE5_u5728_u540E_u53F0_u8FDB_u884C_u7BA1_u7406"><a href="#u4F7F_u6295_u7968_App__u53EF_u4EE5_u5728_u540E_u53F0_u8FDB_u884C_u7BA1_u7406" class="headerlink" title="ä½¿æŠ•ç¥¨ App å¯ä»¥åœ¨åå°è¿›è¡Œç®¡ç†"></a>ä½¿æŠ•ç¥¨ App å¯ä»¥åœ¨åå°è¿›è¡Œç®¡ç†</h3><p>æˆ‘ä»¬åªéœ€è¦åšä¸€ä»¶äº‹: æŠŠ Questionå¯¹è±¡çš„ admin æ¥å£å‘Šè¯‰ admin</p>
<pre><code>polls/admin.py
from django.contrib import admin

from .models import Question

admin.site.register(Question)
</code></pre><p>ç„¶ååˆ·æ–°ä¸€ä¸‹<br><img src="http://7xpsj5.com1.z0.glb.clouddn.com/poll.png" alt="Django"><br>ç‚¹å‡» Questions<br><img src="http://7xpsj5.com1.z0.glb.clouddn.com/poll2.png" alt="Django"><br>ç¼–è¾‘â€Whatâ€™s up?â€<br><img src="http://7xpsj5.com1.z0.glb.clouddn.com/poll1.png" alt="Django"></p>
<p>è‡ªå·±å°è¯•ä¸€ä¸‹æ“ä½œ.</p>
]]></content>
    <summary type="html">
    <![CDATA[<h3 id="u521B_u5EFA_u6570_u636E_u5E93"><a href="#u521B_u5EFA_u6570_u636E_u5E93" class="headerlink" title="åˆ›å»ºæ•°æ®åº“"></a>åˆ›å»ºæ•°æ®åº“</h3><p>ç›¸å…³æ–‡ä»¶æ˜¯<em>mysite/settings.py</em> , é»˜è®¤ç”¨çš„æ˜¯ SQLite . æˆ‘ç”¨çš„ mysql(ä¹‹å‰åœ¨æœ¬åœ°å®‰è£…å¥½çš„)</p>
<p>å…ˆåœ¨ mysql ä¸­åˆ›å»ºåº“,ç”¨æˆ·</p>
<pre><code>mysql&gt; CREATE DATABASE polls DEFAULT CHARSET=utf8;
Query OK, 1 row affected (0.00 sec)

mysql&gt; GRANT SELECT, INSERT, UPDATE, DELETE, CREATE, DROP, INDEX, ALTER, CREATE TEMPORARY TABLES, LOCK TABLES ON polls.* TO &apos;poller&apos;@&apos;127.0.0.1&apos; IDENTIFIED BY &apos;poller&apos;;
Query OK, 0 rows affected (0.00 sec)
</code></pre><p>ä¿®æ”¹<em>mysite/settings.py</em>ä¸­çš„æ•°æ®åº“è®¾ç½®</p>
<pre><code>DATABASES = {
    &apos;default&apos;: {
        &apos;ENGINE&apos;: &apos;django.db.backends.mysql&apos;,
        &apos;NAME&apos;: &apos;polls&apos;,
        &apos;USER&apos;: &apos;poller&apos;,
        &apos;PASSWORD&apos;: &apos;poller&apos;,
        &apos;HOST&apos;:&apos;127.0.0.1&apos;,
        &apos;PORT&apos;:&apos;3306&apos;,
    }
}
</code></pre>]]>
    
    </summary>
    
      <category term="Django" scheme="http://yoursite.com/tags/Django/"/>
    
      <category term="it" scheme="http://yoursite.com/categories/it/"/>
    
  </entry>
  
</feed>
